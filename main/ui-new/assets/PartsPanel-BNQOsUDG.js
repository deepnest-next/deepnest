import{c as Q,a as te,o as je,u as ke,t as S,i as l,m as Z,b as M,S as X,d as ce,e as A,s as N,f as ie,g as we,h as _e,P as Qe,j as Oe,F as He,k as U,l as ee,n as We,p as Ie}from"./index-YKK_3g9I.js";const Xe={enableMultiSelect:!0,enableKeyboardShortcuts:!0,enableRangeSelect:!0,selectAllKey:"KeyA",deselectAllKey:"Escape"},Ge=(e,n={})=>{const d={...Xe,...n},[g,w]=Q(new Set),[a,s]=Q(null),[x,v]=Q("single"),m=te(()=>{const t=g();return e().filter(o=>t.has(o.id))}),f=te(()=>g().size),u=te(()=>{const t=e(),o=g();return t.length>0&&t.every(c=>o.has(c.id))}),I=te(()=>g().size===0),T=te(()=>{const t=f();return t>0&&t<e().length}),H=t=>{w(o=>new Set([...o,t])),s(t)},L=t=>{w(o=>{const c=new Set(o);return c.delete(t),c}),a()===t&&s(null)},K=t=>{g().has(t)?L(t):H(t)},q=()=>{const t=e().map(o=>o.id);w(new Set(t)),s(t[t.length-1]||null)},z=()=>{w(new Set),s(null)},b=(t,o)=>{const c=e(),y=c.findIndex(E=>E.id===t),P=c.findIndex(E=>E.id===o);if(y===-1||P===-1)return;const V=Math.min(y,P),B=Math.max(y,P),re=c.slice(V,B+1).map(E=>E.id);w(E=>new Set([...E,...re])),s(o)},i=()=>{const t=e(),o=g(),c=new Set(t.filter(y=>!o.has(y.id)).map(y=>y.id));w(c),s(null)},$=(t,o)=>{if(!d.enableMultiSelect){g().has(t)?z():(w(new Set([t])),s(t));return}if(o.ctrlKey||o.metaKey)v("multi"),K(t);else if(o.shiftKey&&d.enableRangeSelect){v("range");const c=a();c?b(c,t):H(t)}else v("single"),w(new Set([t])),s(t)},p=t=>{if(!d.enableKeyboardShortcuts)return;const o=t.ctrlKey||t.metaKey,c=t.shiftKey;o&&t.code===d.selectAllKey?(t.preventDefault(),q()):t.code===d.deselectAllKey?(t.preventDefault(),z()):o&&t.code==="KeyI"?(t.preventDefault(),i()):(t.code==="ArrowUp"||t.code==="ArrowDown")&&(t.preventDefault(),C(t.code==="ArrowDown"?1:-1,c))},C=(t,o=!1)=>{const c=e();if(c.length===0)return;const y=a();let P=y?c.findIndex(re=>re.id===y):-1;if(P===-1){const re=t>0?0:c.length-1,E=c[re];E&&H(E.id);return}let V;t>0?V=P>=c.length-1?0:P+1:V=P<=0?c.length-1:P-1;const B=c[V];B&&(o&&d.enableRangeSelect?b(y,B.id):(w(new Set([B.id])),s(B.id)))},k=t=>g().has(t),r=()=>({selectedIds:Array.from(g()),selectedItems:m(),selectedCount:f(),isAllSelected:u(),isNoneSelected:I(),isPartiallySelected:T(),lastSelectedId:a(),selectionMode:x()});return d.enableKeyboardShortcuts&&(document.addEventListener("keydown",p),je(()=>{document.removeEventListener("keydown",p)})),{selectedIds:g,selectedItems:m,selectedCount:f,isAllSelected:u,isNoneSelected:I,isPartiallySelected:T,lastSelectedId:a,selectionMode:x,selectItem:H,deselectItem:L,toggleItem:K,selectAll:q,deselectAll:z,selectRange:b,invertSelection:i,navigateSelection:C,handleItemClick:$,isSelected:k,getSelectionInfo:r}};var Ye=S('<span class="text-xs text-gray-500 dark:text-gray-400">(<!>%)'),Je=S('<button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Ze=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),et=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">'),tt=S('<div class="flex items-center gap-1">'),rt=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),lt=S('<div class="flex items-center gap-2">'),nt=S('<div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-4"><div class="flex items-center gap-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300"></span></div><div class="flex items-center gap-1"><button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><span class=text-sm></span></button><button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></button></div></div><div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"><span>:</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">Ctrl+A</kbd><span>,</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">Esc</kbd><span>,</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">↑↓</kbd><span>'),at=S("<button><span class=mr-1>");const st=e=>{const[n]=ke("common"),d=()=>e.isAllSelected?n("deselect_all"):(e.isPartiallySelected,n("select_all")),g=()=>e.isAllSelected?"☑️":e.isPartiallySelected?"◐":"☐",w=()=>{e.isAllSelected?e.onDeselectAll():e.onSelectAll()};return(()=>{var a=nt(),s=a.firstChild,x=s.firstChild,v=x.firstChild,m=x.nextSibling,f=m.firstChild,u=f.firstChild,I=f.nextSibling,T=s.nextSibling,H=T.firstChild,L=H.firstChild,K=H.nextSibling,q=K.nextSibling,z=q.firstChild,b=q.nextSibling,i=b.nextSibling,$=i.firstChild,p=i.nextSibling,C=p.nextSibling;return l(v,(()=>{var k=Z(()=>e.selectedCount>0);return()=>k()?n("selected_count",{count:e.selectedCount,total:e.totalCount}):n("no_selection")})()),l(x,M(X,{get when(){return e.selectedCount>0},get children(){var k=Ye(),r=k.firstChild,t=r.nextSibling;return t.nextSibling,l(k,()=>Math.round(e.selectedCount/e.totalCount*100),t),k}}),null),f.$$click=w,l(u,g),ce(I,"click",e.onInvertSelection,!0),l(m,M(X,{get when(){return e.selectedCount>0},get children(){var k=Je();return ce(k,"click",e.onDeselectAll,!0),A(()=>N(k,"title",n("deselect_all"))),k}}),null),l(a,M(X,{get when(){return e.selectedCount>0},get children(){var k=lt();return l(k,M(X,{get when(){return e.onDuplicateSelected},get children(){var r=Ze();return r.firstChild,ce(r,"click",e.onDuplicateSelected,!0),l(r,()=>n("duplicate"),null),A(()=>N(r,"title",n("duplicate_selected"))),r}}),null),l(k,M(X,{get when(){return e.onExportSelected},get children(){var r=et();return r.firstChild,ce(r,"click",e.onExportSelected,!0),l(r,()=>n("export"),null),A(()=>N(r,"title",n("export_selected"))),r}}),null),l(k,M(X,{get when(){return e.actions&&e.actions.length>0},get children(){var r=tt();return l(r,()=>e.actions.map(t=>(()=>{var o=at(),c=o.firstChild;return ce(o,"click",t.onClick,!0),l(c,()=>t.icon),l(o,()=>t.label,null),A(y=>{var P=t.disabled,V=`inline-flex items-center px-3 py-1 text-sm font-medium rounded-md transition-colors ${t.color==="danger"?"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 disabled:opacity-50":t.color==="primary"?"text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50":"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50"}`,B=t.label;return P!==y.e&&(o.disabled=y.e=P),V!==y.t&&ie(o,y.t=V),B!==y.a&&N(o,"title",y.a=B),y},{e:void 0,t:void 0,a:void 0}),o})())),r}}),null),l(k,M(X,{get when(){return e.onDeleteSelected},get children(){var r=rt();return r.firstChild,ce(r,"click",e.onDeleteSelected,!0),l(r,()=>n("delete"),null),A(()=>N(r,"title",n("delete_selected"))),r}}),null),k}}),T),l(H,()=>n("shortcuts"),L),l(q,()=>n("select_all"),z),l(i,()=>n("deselect"),$),l(C,()=>n("navigate")),A(k=>{var r=d(),t=n("invert_selection");return r!==k.e&&N(f,"title",k.e=r),t!==k.t&&N(I,"title",k.t=t),k},{e:void 0,t:void 0}),a})()};we(["click"]);function it(e,n){let d;const g=(...a)=>{d!==void 0&&clearTimeout(d),d=window.setTimeout(()=>{e(...a),d=void 0},n)},w=()=>{d!==void 0&&(clearTimeout(d),d=void 0)};return je(w),Object.assign(g,{cancel:w})}function Me(e,n,d,g){e.addEventListener(n,d,g),je(()=>{e.removeEventListener(n,d,g)})}const ot={preventDefault:!0,closeOnClick:!0,closeOnScroll:!0,closeOnResize:!0},qe=(e={})=>{const n={...ot,...e},[d,g]=Q(!1),[w,a]=Q({x:0,y:0}),[s,x]=Q([]),[v,m]=Q(null),f=i=>{if(d()&&n.closeOnClick){const $=i.target,p=document.querySelector("[data-context-menu]");p&&!p.contains($)&&L()}},u=()=>{d()&&n.closeOnScroll&&L()},I=()=>{d()&&n.closeOnResize&&L()},T=i=>{i.key==="Escape"&&d()&&(i.preventDefault(),L())};_e(()=>{d()&&(Me(document,"click",f),Me(document,"scroll",u),Me(document,"keydown",T),Me(window,"resize",I))});const H=(i,$)=>{n.preventDefault&&i.preventDefault(),i.stopPropagation(),document.documentElement.getBoundingClientRect();const p=200,C=$.length*32;let k=i.clientX,r=i.clientY;k+p>window.innerWidth&&(k=window.innerWidth-p-10),r+C>window.innerHeight&&(r=window.innerHeight-C-10),a({x:k,y:r}),x($),m(i.currentTarget),g(!0)},L=()=>{g(!1),x([]),m(null)};return{isOpen:d,position:w,menuItems:s,targetElement:v,openMenu:H,closeMenu:L,handleItemClick:i=>{i.disabled||i.submenu||(i.action(),L())},createContextMenuHandler:i=>$=>{const p=i($);p.length>0&&H($,p)},createMenuItem:(i,$,p,C={})=>({id:i,label:$,action:p,...C}),createSeparator:()=>({id:"separator",label:"",action:()=>{},separator:!0})}};var dt=S('<div data-context-menu class="fixed z-50 min-w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 focus:outline-none"tabindex=-1>'),ct=S('<svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),ut=S('<svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),gt=S("<button data-context-item tabindex=0><span class=flex-1>"),xt=S('<div class="h-px bg-gray-200 dark:bg-gray-700 mx-1 my-1">');const Fe=e=>{let n;_e(()=>{e.isOpen&&n&&n.focus()});const d=s=>{if(e.isOpen)switch(s.key){case"Escape":s.preventDefault(),e.onClose();break;case"ArrowDown":s.preventDefault(),g();break;case"ArrowUp":s.preventDefault(),w();break;case"Enter":case" ":s.preventDefault();const x=n?.querySelector("[data-context-item]:focus");x&&x.click();break}},g=()=>{const s=n?.querySelectorAll("[data-context-item]:not([disabled])");if(!s?.length)return;const x=Array.from(s).findIndex(m=>m===document.activeElement);let v;x===-1||x>=s.length-1?v=0:v=x+1,s[v].focus()},w=()=>{const s=n?.querySelectorAll("[data-context-item]:not([disabled])");if(!s?.length)return;const x=Array.from(s).findIndex(m=>m===document.activeElement);let v;x===-1||x<=0?v=s.length-1:v=x-1,s[v].focus()},a=(s="default")=>{switch(s){case"primary":return"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20";case"secondary":return"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800";case"danger":return"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20";default:return"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}};return M(X,{get when(){return e.isOpen},get children(){return M(Qe,{get children(){var s=dt();s.$$keydown=d;var x=n;return typeof x=="function"?Oe(x,s):n=s,l(s,M(He,{get each(){return e.items},children:v=>M(X,{get when(){return!v.separator},get fallback(){return xt()},get children(){var m=gt(),f=m.firstChild;return m.$$click=()=>!v.disabled&&e.onItemClick(v),l(m,M(X,{get when(){return v.icon},get children(){var u=ct(),I=u.firstChild;return A(()=>N(I,"d",v.icon)),u}}),f),l(f,()=>v.label),l(m,M(X,{get when(){return v.submenu},get children(){return ut()}}),null),A(u=>{var I=`w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset ${a(v.color)} ${v.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,T=v.disabled;return I!==u.e&&ie(m,u.e=I),T!==u.t&&(m.disabled=u.t=T),u},{e:void 0,t:void 0}),m}})})),A(v=>{var m=`${e.position.x}px`,f=`${e.position.y}px`;return m!==v.e&&((v.e=m)!=null?s.style.setProperty("left",m):s.style.removeProperty("left")),f!==v.t&&((v.t=f)!=null?s.style.setProperty("top",f):s.style.removeProperty("top")),v},{e:void 0,t:void 0}),s}})}})};we(["keydown","click"]);var ht=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"><div class="relative flex-1 max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-4 h-4 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200"></div><div class="flex items-center gap-3"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><option value=name></option><option value=quantity></option><option value=size></option></select><button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button></div></div></div><div class="flex-1 overflow-auto"><div class=min-w-full><div class="sticky top-0 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10"><div class="grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"><div class="col-span-1 flex items-center"><span class="text-xs text-gray-500 dark:text-gray-400"></span></div><button><span></span></button><button><span></span></button><button><span></span></button><div class="col-span-2 text-center"></div></div></div><div class="bg-white dark:bg-gray-900">'),Pe=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 15l7-7 7 7"></svg>',!1,!0,!1),Ae=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></svg>',!1,!0,!1),De=S('<svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24">'),bt=S('<div><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><div class="col-span-4 flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"></p><p class="text-xs text-gray-500 dark:text-gray-400 truncate"></p></div></div></div><div class="col-span-2 flex items-center"><div class=relative><input type=number min=1 class="w-20 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div></div><div class="col-span-3 flex items-center"><div class="flex items-center gap-2"><div class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-gray-600 dark:text-gray-300"></div><span class="text-xs text-gray-500 dark:text-gray-400">mm</span></div></div><div class="col-span-2 flex items-center justify-center"><div class="flex items-center gap-1"><input type=number min=0 max=360 step=90 class="w-16 px-2 py-1.5 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-xs text-gray-500 dark:text-gray-400">°');const vt=e=>{const[n]=ke("parts"),[d]=ke("common"),[g,w]=Q(""),[a,s]=Q("name"),[x,v]=Q("asc"),m=qe(),f=te(()=>{let b=U.app.parts;if(g()){const i=g().toLowerCase();b=b.filter($=>$.name.toLowerCase().includes(i)||$.source.toLowerCase().includes(i))}return b=[...b].sort((i,$)=>{let p,C;switch(a()){case"name":p=i.name,C=$.name;break;case"quantity":p=i.quantity,C=$.quantity;break;case"size":p=i.bounds.width*i.bounds.height,C=$.bounds.width*$.bounds.height;break;default:p=i.name,C=$.name}return typeof p=="string"&&typeof C=="string"?x()==="asc"?p.localeCompare(C):C.localeCompare(p):x()==="asc"?p-C:C-p}),b}),u=(b,i)=>{i<1&&(i=1),ee.updatePart(b,{quantity:i})},I=(b,i)=>{ee.updatePart(b,{rotation:i})},T=b=>{a()===b?v(x()==="asc"?"desc":"asc"):(s(b),v("asc"))},H=b=>`${b.width.toFixed(1)} × ${b.height.toFixed(1)}`,L=b=>{const i={...b,id:`${b.id}-copy-${Date.now()}`,name:`${b.name} (Copy)`};ee.setParts([...U.app.parts,i])},K=b=>{const i=U.app.parts.filter($=>$.id!==b);ee.setParts(i)},q=b=>{console.log("Exporting part:",b)},z=m.createContextMenuHandler(b=>{const $=b.currentTarget.dataset.partId,p=U.app.parts.find(r=>r.id===$);if(!p)return[];const C=e.isSelected?.(p.id),k=U.app.parts.filter(r=>e.isSelected?.(r.id)).length;return[m.createMenuItem("duplicate",n("duplicate"),()=>L(p),{icon:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",color:"primary"}),m.createMenuItem("export",d("actions.export"),()=>q(p),{icon:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",color:"secondary"}),m.createSeparator(),m.createMenuItem("select",d(C?"actions.deselect":"actions.select"),()=>e.onItemClick?.(p.id,b),{icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"primary"}),...k>1?[m.createMenuItem("bulk-actions",`${k} ${n("items_selected")}`,()=>{},{disabled:!0})]:[],m.createSeparator(),m.createMenuItem("delete",d("actions.delete"),()=>K(p.id),{icon:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",color:"danger"})]});return(()=>{var b=ht(),i=b.firstChild,$=i.firstChild,p=$.firstChild,C=p.firstChild,k=C.nextSibling,r=p.nextSibling,t=r.firstChild,o=t.firstChild,c=t.nextSibling,y=c.firstChild,P=y.nextSibling,V=P.nextSibling,B=c.nextSibling,re=B.firstChild,E=i.nextSibling,he=E.firstChild,ue=he.firstChild,fe=ue.firstChild,oe=fe.firstChild,ve=oe.firstChild,ae=oe.nextSibling,me=ae.firstChild,se=ae.nextSibling,ye=se.firstChild,W=se.nextSibling,j=W.firstChild,le=W.nextSibling,be=ue.nextSibling;return k.$$input=h=>w(h.currentTarget.value),l(t,()=>n("sort_by"),o),c.addEventListener("change",h=>s(h.currentTarget.value)),l(y,()=>n("name")),l(P,()=>n("quantity")),l(V,()=>n("size")),B.$$click=()=>v(x()==="asc"?"desc":"asc"),l(re,(()=>{var h=Z(()=>x()==="asc");return()=>h()?Pe():Ae()})()),l(ve,()=>n("select")),ae.$$click=()=>T("name"),l(me,()=>n("name")),l(ae,(()=>{var h=Z(()=>a()==="name");return()=>h()&&(()=>{var D=De();return l(D,(()=>{var G=Z(()=>x()==="asc");return()=>G()?Pe():Ae()})()),D})()})(),null),se.$$click=()=>T("quantity"),l(ye,()=>n("quantity")),l(se,(()=>{var h=Z(()=>a()==="quantity");return()=>h()&&(()=>{var D=De();return l(D,(()=>{var G=Z(()=>x()==="asc");return()=>G()?Pe():Ae()})()),D})()})(),null),W.$$click=()=>T("size"),l(j,()=>n("size")),l(W,(()=>{var h=Z(()=>a()==="size");return()=>h()&&(()=>{var D=De();return l(D,(()=>{var G=Z(()=>x()==="asc");return()=>G()?Pe():Ae()})()),D})()})(),null),l(le,()=>n("rotation")),l(be,M(He,{get each(){return f()},children:h=>(()=>{var D=bt(),G=D.firstChild,ge=G.firstChild,ne=G.nextSibling,_=ne.firstChild,F=_.firstChild,Y=F.nextSibling,O=Y.firstChild,de=O.nextSibling,J=ne.nextSibling,xe=J.firstChild,pe=xe.firstChild,Se=J.nextSibling,$e=Se.firstChild,Re=$e.firstChild,Ne=Se.nextSibling,Ue=Ne.firstChild,Le=Ue.firstChild;return ce(D,"contextmenu",z,!0),D.$$click=R=>e.onItemClick?.(h.id,R),ge.addEventListener("change",()=>{}),ge.$$click=R=>{R.stopPropagation();const Ce=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:!0,metaKey:!0,shiftKey:R.shiftKey,altKey:R.altKey});e.onItemClick?.(h.id,Ce)},l(O,()=>h.name),l(de,()=>h.source),pe.addEventListener("change",R=>u(h.id,parseInt(R.currentTarget.value))),l(Re,()=>H(h.bounds)),Le.addEventListener("change",R=>I(h.id,parseInt(R.currentTarget.value))),A(R=>{var Ce=`grid grid-cols-12 gap-4 px-4 py-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200 cursor-pointer ${e.isSelected?.(h.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,Ke=h.id,Be=h.source;return Ce!==R.e&&ie(D,R.e=Ce),Ke!==R.t&&N(D,"data-part-id",R.t=Ke),Be!==R.a&&N(O,"title",R.a=Be),R},{e:void 0,t:void 0,a:void 0}),A(()=>ge.checked=e.isSelected?.(h.id)||!1),A(()=>pe.value=h.quantity),A(()=>Le.value=h.rotation),D})()})),l(b,M(Fe,{get isOpen(){return m.isOpen()},get position(){return m.position()},get items(){return m.menuItems()},get onItemClick(){return m.handleItemClick},get onClose(){return m.closeMenu}}),null),A(h=>{var D=n("search_parts"),G=x()==="asc"?"Sort descending":"Sort ascending",ge=`col-span-4 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="name"?"text-blue-600 dark:text-blue-400":""}`,ne=`col-span-2 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="quantity"?"text-blue-600 dark:text-blue-400":""}`,_=`col-span-3 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="size"?"text-blue-600 dark:text-blue-400":""}`;return D!==h.e&&N(k,"placeholder",h.e=D),G!==h.t&&N(B,"title",h.t=G),ge!==h.a&&ie(ae,h.a=ge),ne!==h.o&&ie(se,h.o=ne),_!==h.i&&ie(W,h.i=_),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A(()=>k.value=g()),A(()=>c.value=a()),b})()};we(["input","click","contextmenu"]);function ft(e){const{items:n,itemHeight:d,containerHeight:g,overscan:w=3}=e,[a,s]=Q(0),[x,v]=Q(!1),m=te(()=>n().length*d),f=te(()=>{const K=Math.floor(a()/d)-w;return Math.max(0,K)}),u=te(()=>{const K=Math.ceil((a()+g)/d)+w;return Math.min(n().length-1,K)}),I=te(()=>{const K=f(),q=u(),z=n(),b=[];for(let i=K;i<=q&&i<z.length;i++)b.push({item:z[i],index:i,offset:i*d});return b}),T=it(()=>{v(!1)},150);return{visibleItems:I,totalHeight:m,scrollTop:a,setScrollTop:s,startIndex:f,endIndex:u,handleScroll:K=>{const q=K.target;s(q.scrollTop),v(!0),T()},scrollToIndex:(K,q="start")=>{const z=n().length-1,b=Math.max(0,Math.min(K,z));let i;switch(q){case"center":i=b*d-g/2+d/2;break;case"end":i=b*d-g+d;break;case"start":default:i=b*d;break}const $=m()-g;i=Math.max(0,Math.min(i,$)),s(i);const p=document.querySelector("[data-virtual-scroll-container]");p&&(p.scrollTop=i)}}}var mt=S("<div data-virtual-scroll-container><div>");const yt=e=>(()=>{var n=mt(),d=n.firstChild;return ce(n,"scroll",e.onScroll),d.style.setProperty("position","relative"),l(d,()=>e.children),A(g=>{var w=`overflow-auto ${e.class||""}`,a=`${e.height}px`,s=`${e.totalHeight}px`;return w!==g.e&&ie(n,g.e=w),a!==g.t&&((g.t=a)!=null?n.style.setProperty("height",a):n.style.removeProperty("height")),s!==g.a&&((g.a=s)!=null?d.style.setProperty("height",s):d.style.removeProperty("height")),g},{e:void 0,t:void 0,a:void 0}),n})();var Ve=S("<div>");function pt(e){const n=ft({items:()=>e.items,itemHeight:e.itemHeight,containerHeight:e.height,overscan:e.overscan||3,getItemKey:e.getItemKey});_e(()=>{e.scrollToIndex!==void 0&&e.scrollToIndex>=0&&n.scrollToIndex(e.scrollToIndex,e.scrollAlign)}),_e(()=>{e.onScroll?.(n.scrollTop(),!1)});const d=te(()=>e.items.length===0);return M(X,{get when(){return!d()},get fallback(){return(()=>{var g=Ve();return l(g,()=>e.emptyMessage||"No items to display"),A(()=>ie(g,`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 ${e.class||""}`)),g})()},get children(){return M(yt,{get height(){return e.height},get onScroll(){return n.handleScroll},get totalHeight(){return n.totalHeight()},get class(){return e.class},get children(){return M(He,{get each(){return n.visibleItems()},children:({item:g,index:w,offset:a})=>(()=>{var s=Ve();return s.style.setProperty("position","absolute"),`${a}px`!=null?s.style.setProperty("top",`${a}px`):s.style.removeProperty("top"),s.style.setProperty("left","0"),s.style.setProperty("right","0"),l(s,()=>e.renderItem(g,w)),A(x=>(x=`${e.itemHeight}px`)!=null?s.style.setProperty("height",x):s.style.removeProperty("height")),s})()})}})}})}function kt(e){return M(pt,e)}var $t=S('<div><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><div class="col-span-4 flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"></p><p class="text-xs text-gray-500 dark:text-gray-400 truncate"></p></div></div></div><div class="col-span-2 flex items-center"><div class=relative><input type=number min=1 class="w-20 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div></div><div class="col-span-3 flex items-center"><div class="flex items-center gap-2"><div class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-gray-600 dark:text-gray-300"></div><span class="text-xs text-gray-500 dark:text-gray-400">mm</span></div></div><div class="col-span-2 flex items-center justify-center"><div class="flex items-center gap-1"><input type=number min=0 max=360 step=90 class="w-16 px-2 py-1.5 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-xs text-gray-500 dark:text-gray-400">°'),_t=S('<div class="mt-2 text-xs text-gray-500 dark:text-gray-400">Showing <!> parts with virtual scrolling for performance'),wt=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"><div class="relative flex-1 max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-4 h-4 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200"></div><div class="flex items-center gap-3"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><option value=name></option><option value=quantity></option><option value=size></option></select><button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button></div></div></div><div class="sticky top-0 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10"><div class="grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"><div class="col-span-1 flex items-center"><span class="text-xs text-gray-500 dark:text-gray-400"></span></div><button><span></span></button><button><span></span></button><button><span></span></button><div class="col-span-2 text-center"></div></div></div><div class="flex-1 bg-white dark:bg-gray-900">'),ze=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 15l7-7 7 7"></svg>',!1,!0,!1),Ee=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></svg>',!1,!0,!1),Te=S('<svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24">');const St=e=>{const[n]=ke("parts"),[d]=ke("common"),[g,w]=Q(""),[a,s]=Q("name"),[x,v]=Q("asc"),[m,f]=Q(e.height||600),u=qe(),[I,T]=Q(),H=te(()=>{let r=U.app.parts;if(g()){const t=g().toLowerCase();r=r.filter(o=>o.name.toLowerCase().includes(t)||o.source.toLowerCase().includes(t))}return r=[...r].sort((t,o)=>{let c,y;switch(a()){case"name":c=t.name,y=o.name;break;case"quantity":c=t.quantity,y=o.quantity;break;case"size":c=t.bounds.width*t.bounds.height,y=o.bounds.width*o.bounds.height;break;default:c=t.name,y=o.name}return typeof c=="string"&&typeof y=="string"?x()==="asc"?c.localeCompare(y):y.localeCompare(c):x()==="asc"?c-y:y-c}),r});let L;We(()=>{if(L){const r=new ResizeObserver(t=>{for(const o of t)f(o.contentRect.height)});r.observe(L),je(()=>{r.disconnect()})}}),_e(()=>{const r=H(),t=r.find(o=>e.isSelected?.(o.id));if(t){const o=r.indexOf(t);o>=0&&T(o)}});const K=(r,t)=>{t<1&&(t=1),ee.updatePart(r,{quantity:t})},q=(r,t)=>{ee.updatePart(r,{rotation:t})},z=r=>{a()===r?v(x()==="asc"?"desc":"asc"):(s(r),v("asc"))},b=r=>`${r.width.toFixed(1)} × ${r.height.toFixed(1)}`,i=r=>{const t={...r,id:`${r.id}-copy-${Date.now()}`,name:`${r.name} (Copy)`};ee.setParts([...U.app.parts,t])},$=r=>{const t=U.app.parts.filter(o=>o.id!==r);ee.setParts(t)},p=r=>{console.log("Exporting part:",r)},C=u.createContextMenuHandler(r=>{const o=r.currentTarget.dataset.partId,c=U.app.parts.find(V=>V.id===o);if(!c)return[];const y=e.isSelected?.(c.id),P=U.app.parts.filter(V=>e.isSelected?.(V.id)).length;return[u.createMenuItem("duplicate",n("duplicate"),()=>i(c),{icon:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",color:"primary"}),u.createMenuItem("export",d("actions.export"),()=>p(c),{icon:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",color:"secondary"}),u.createSeparator(),u.createMenuItem("select",d(y?"actions.deselect":"actions.select"),()=>e.onItemClick?.(c.id,r),{icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"primary"}),...P>1?[u.createMenuItem("bulk-actions",`${P} ${n("items_selected")}`,()=>{},{disabled:!0})]:[],u.createSeparator(),u.createMenuItem("delete",d("actions.delete"),()=>$(c.id),{icon:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",color:"danger"})]}),k=(r,t)=>(()=>{var o=$t(),c=o.firstChild,y=c.firstChild,P=c.nextSibling,V=P.firstChild,B=V.firstChild,re=B.nextSibling,E=re.firstChild,he=E.nextSibling,ue=P.nextSibling,fe=ue.firstChild,oe=fe.firstChild,ve=ue.nextSibling,ae=ve.firstChild,me=ae.firstChild,se=ve.nextSibling,ye=se.firstChild,W=ye.firstChild;return ce(o,"contextmenu",C,!0),o.$$click=j=>e.onItemClick?.(r.id,j),y.addEventListener("change",()=>{}),y.$$click=j=>{j.stopPropagation();const le=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:!0,metaKey:!0,shiftKey:j.shiftKey,altKey:j.altKey});e.onItemClick?.(r.id,le)},l(E,()=>r.name),l(he,()=>r.source),oe.addEventListener("change",j=>K(r.id,parseInt(j.currentTarget.value))),l(me,()=>b(r.bounds)),W.addEventListener("change",j=>q(r.id,parseInt(j.currentTarget.value))),A(j=>{var le=`grid grid-cols-12 gap-4 px-4 py-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200 cursor-pointer ${e.isSelected?.(r.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,be=r.id,h=r.source;return le!==j.e&&ie(o,j.e=le),be!==j.t&&N(o,"data-part-id",j.t=be),h!==j.a&&N(E,"title",j.a=h),j},{e:void 0,t:void 0,a:void 0}),A(()=>y.checked=e.isSelected?.(r.id)||!1),A(()=>oe.value=r.quantity),A(()=>W.value=r.rotation),o})();return(()=>{var r=wt(),t=r.firstChild,o=t.firstChild,c=o.firstChild,y=c.firstChild,P=y.nextSibling,V=c.nextSibling,B=V.firstChild,re=B.firstChild,E=B.nextSibling,he=E.firstChild,ue=he.nextSibling,fe=ue.nextSibling,oe=E.nextSibling,ve=oe.firstChild,ae=t.nextSibling,me=ae.firstChild,se=me.firstChild,ye=se.firstChild,W=se.nextSibling,j=W.firstChild,le=W.nextSibling,be=le.firstChild,h=le.nextSibling,D=h.firstChild,G=h.nextSibling,ge=ae.nextSibling,ne=L;return typeof ne=="function"?Oe(ne,r):L=r,P.$$input=_=>w(_.currentTarget.value),l(B,()=>n("sort_by"),re),E.addEventListener("change",_=>s(_.currentTarget.value)),l(he,()=>n("name")),l(ue,()=>n("quantity")),l(fe,()=>n("size")),oe.$$click=()=>v(x()==="asc"?"desc":"asc"),l(ve,(()=>{var _=Z(()=>x()==="asc");return()=>_()?ze():Ee()})()),l(t,M(X,{get when(){return H().length>100},get children(){var _=_t(),F=_.firstChild,Y=F.nextSibling;return Y.nextSibling,l(_,()=>H().length,Y),_}}),null),l(ye,()=>n("select")),W.$$click=()=>z("name"),l(j,()=>n("name")),l(W,(()=>{var _=Z(()=>a()==="name");return()=>_()&&(()=>{var F=Te();return l(F,(()=>{var Y=Z(()=>x()==="asc");return()=>Y()?ze():Ee()})()),F})()})(),null),le.$$click=()=>z("quantity"),l(be,()=>n("quantity")),l(le,(()=>{var _=Z(()=>a()==="quantity");return()=>_()&&(()=>{var F=Te();return l(F,(()=>{var Y=Z(()=>x()==="asc");return()=>Y()?ze():Ee()})()),F})()})(),null),h.$$click=()=>z("size"),l(D,()=>n("size")),l(h,(()=>{var _=Z(()=>a()==="size");return()=>_()&&(()=>{var F=Te();return l(F,(()=>{var Y=Z(()=>x()==="asc");return()=>Y()?ze():Ee()})()),F})()})(),null),l(G,()=>n("rotation")),l(ge,M(kt,{get items(){return H()},itemHeight:80,get height(){return m()-120},overscan:5,renderItem:k,getItemKey:_=>_.id,get emptyMessage(){return n("no_parts_loaded")},get scrollToIndex(){return I()},scrollAlign:"center"})),l(r,M(Fe,{get isOpen(){return u.isOpen()},get position(){return u.position()},get items(){return u.menuItems()},get onItemClick(){return u.handleItemClick},get onClose(){return u.closeMenu}}),null),A(_=>{var F=n("search_parts"),Y=x()==="asc"?"Sort descending":"Sort ascending",O=`col-span-4 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="name"?"text-blue-600 dark:text-blue-400":""}`,de=`col-span-2 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="quantity"?"text-blue-600 dark:text-blue-400":""}`,J=`col-span-3 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${a()==="size"?"text-blue-600 dark:text-blue-400":""}`;return F!==_.e&&N(P,"placeholder",_.e=F),Y!==_.t&&N(oe,"title",_.t=Y),O!==_.a&&ie(W,_.a=O),de!==_.o&&ie(le,_.o=de),J!==_.i&&ie(h,_.i=J),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A(()=>P.value=g()),A(()=>E.value=a()),r})()};we(["click","contextmenu","input"]);var Ct=S('<div class="flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm text-blue-700 dark:text-blue-300 font-medium"> part<!> selected'),It=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="px-6 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm"><svg class="w-5 h-5 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div><h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h1><p class="text-sm text-gray-500 dark:text-gray-400">Manage your parts and import new ones</p></div></div><div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400"></span></div></div></div></div><div class="bg-gray-50 dark:bg-gray-800/50 px-6 py-4 border-b border-gray-200 dark:border-gray-700"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-600 dark:text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Selected</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Area</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div></div></div><div class="bg-white dark:bg-gray-800 px-6 py-3 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><span class="text-sm text-gray-600 dark:text-gray-400">Bulk Actions:</span><div class="flex items-center gap-2"><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button><span class="text-gray-300 dark:text-gray-600">•</span><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button></div><div class="text-xs text-gray-500 dark:text-gray-400 italic">Tip: Hold Ctrl/Cmd for multi-select, Shift for range select</div></div></div></div><div class="flex-1 overflow-hidden bg-gray-50 dark:bg-gray-900">'),Mt=S('<div class="h-full flex flex-col items-center justify-center text-center gap-6 p-8"><div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"><svg class="w-12 h-12 text-gray-400 dark:text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="max-w-sm space-y-3"><h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400 leading-relaxed"></p></div><div class="flex flex-col sm:flex-row gap-3"><button class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><button class="inline-flex items-center gap-2 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 font-medium rounded-lg border border-gray-300 dark:border-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Learn More</button></div><div class="text-xs text-gray-500 dark:text-gray-600 max-w-md"><p>Supported formats: SVG, DXF • Drag and drop files here');const At=()=>{const[e]=ke("parts"),[n]=ke("common"),d=te(()=>U.app.parts.length),g=te(()=>U.app.parts.reduce((f,u)=>f+u.quantity,0)),w=te(()=>U.app.parts.reduce((f,u)=>f+(u.area||0),0)),a=Ge(()=>U.app.parts,{enableMultiSelect:!0,enableKeyboardShortcuts:!0,enableRangeSelect:!0}),s=async()=>{if(!Ie.isAvailable){console.warn("IPC not available");return}try{const f=await Ie.openFileDialog({title:e("import_parts"),filters:[{name:"Vector Files",extensions:["svg","dxf"]},{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(f.canceled||!f.filePaths?.length)return;const u=await Ie.importParts(f.filePaths);ee.setParts([...U.app.parts,...u])}catch(f){console.error("Failed to import parts:",f),ee.setError(e("import_failed"))}},x=async()=>{const f=a.selectedItems();if(f.length===0){ee.setError(e("no_parts_selected"));return}try{const u=await Ie.saveFileDialog();if(u.canceled||!u.filePath)return;console.log("Exporting parts:",f)}catch(u){console.error("Failed to export parts:",u),ee.setError(e("export_failed"))}},v=()=>{const f=a.selectedIds();if(f.size===0){ee.setError(e("no_parts_selected"));return}const u=U.app.parts.filter(I=>!f.has(I.id));ee.setParts(u),a.deselectAll()},m=()=>{const f=a.selectedItems();if(f.length===0)return;const u=f.map(I=>({...I,id:`${I.id}-copy-${Date.now()}`,name:`${I.name} (Copy)`}));ee.setParts([...U.app.parts,...u]),a.deselectAll(),u.forEach(I=>a.selectItem(I.id))};return(()=>{var f=It(),u=f.firstChild,I=u.firstChild,T=I.firstChild,H=T.firstChild,L=H.nextSibling,K=L.firstChild,q=T.nextSibling,z=q.firstChild;z.firstChild;var b=z.nextSibling,i=b.firstChild,$=u.nextSibling,p=$.firstChild,C=p.firstChild,k=C.firstChild,r=k.firstChild,t=r.nextSibling,o=t.firstChild,c=o.nextSibling,y=C.nextSibling,P=y.firstChild,V=P.firstChild,B=V.nextSibling,re=B.firstChild,E=re.nextSibling,he=y.nextSibling,ue=he.firstChild,fe=ue.firstChild,oe=fe.nextSibling,ve=oe.firstChild,ae=ve.nextSibling,me=he.nextSibling,se=me.firstChild,ye=se.firstChild,W=ye.nextSibling,j=W.firstChild,le=j.nextSibling,be=$.nextSibling,h=be.firstChild,D=h.firstChild,G=D.firstChild,ge=G.nextSibling,ne=ge.firstChild,_=ne.nextSibling,F=_.nextSibling,Y=be.nextSibling;return l(K,()=>e("parts_title")),z.$$click=s,l(z,()=>e("import"),null),l(i,()=>e("parts_count",{count:d()})),l(f,M(st,{get selectedCount(){return a.selectedCount()},get totalCount(){return d()},get isAllSelected(){return a.isAllSelected()},get isNoneSelected(){return a.isNoneSelected()},get isPartiallySelected(){return a.isPartiallySelected()},get onSelectAll(){return a.selectAll},get onDeselectAll(){return a.deselectAll},get onInvertSelection(){return a.invertSelection},onDeleteSelected:v,onDuplicateSelected:m,onExportSelected:x}),$),l(o,()=>e("total_parts")),l(c,d),l(re,()=>e("total_quantity")),l(E,g),l(ae,()=>a.selectedCount()),l(le,()=>Math.round(w())),ce(ne,"click",a.selectAll,!0),l(ne,()=>e("select_all")),ce(F,"click",a.deselectAll,!0),l(F,()=>e("deselect_all")),l(h,M(X,{get when(){return a.selectedCount()>0},get children(){var O=Ct(),de=O.firstChild,J=de.nextSibling,xe=J.firstChild,pe=xe.nextSibling;return pe.nextSibling,l(J,()=>a.selectedCount(),xe),l(J,()=>a.selectedCount()===1?"":"s",pe),O}}),null),l(Y,M(X,{get when(){return d()>0},get fallback(){return(()=>{var O=Mt(),de=O.firstChild,J=de.nextSibling,xe=J.firstChild,pe=xe.nextSibling,Se=J.nextSibling,$e=Se.firstChild;return $e.firstChild,l(xe,()=>e("no_parts_loaded")),l(pe,()=>e("import_parts_to_get_started")),$e.$$click=s,l($e,()=>e("import_parts"),null),O})()},get children(){return M(X,{get when(){return d()>50},get fallback(){return M(vt,{get onItemClick(){return a.handleItemClick},get isSelected(){return a.isSelected}})},get children(){return M(St,{get onItemClick(){return a.handleItemClick},get isSelected(){return a.isSelected}})}})}})),A(O=>{var de=e("import_parts"),J=d()===0,xe=d()===0;return de!==O.e&&N(z,"title",O.e=de),J!==O.t&&(ne.disabled=O.t=J),xe!==O.a&&(F.disabled=O.a=xe),O},{e:void 0,t:void 0,a:void 0}),f})()};we(["click"]);export{At as default};
