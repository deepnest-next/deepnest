import{c as Q,a as te,o as ze,u as ke,t as S,i as l,m as Z,b as M,S as X,d as ce,e as A,s as N,f as ie,g as we,h as _e,P as Ue,j as Ve,F as Te,k as U,l as ee,n as Qe,p as Ie}from"./index-DQLctXGg.js";const We={enableMultiSelect:!0,enableKeyboardShortcuts:!0,enableRangeSelect:!0,selectAllKey:"KeyA",deselectAllKey:"Escape"},Xe=(e,n={})=>{const u={...We,...n},[m,C]=Q(new Set),[s,a]=Q(null),[g,f]=Q("single"),h=te(()=>{const t=m();return e().filter(o=>t.has(o.id))}),b=te(()=>m().size),c=te(()=>{const t=e(),o=m();return t.length>0&&t.every(d=>o.has(d.id))}),w=te(()=>m().size===0),L=te(()=>{const t=b();return t>0&&t<e().length}),T=t=>{C(o=>new Set([...o,t])),a(t)},D=t=>{C(o=>{const d=new Set(o);return d.delete(t),d}),s()===t&&a(null)},K=t=>{m().has(t)?D(t):T(t)},q=()=>{const t=e().map(o=>o.id);C(new Set(t)),a(t[t.length-1]||null)},E=()=>{C(new Set),a(null)},v=(t,o)=>{const d=e(),y=d.findIndex(z=>z.id===t),P=d.findIndex(z=>z.id===o);if(y===-1||P===-1)return;const V=Math.min(y,P),B=Math.max(y,P),re=d.slice(V,B+1).map(z=>z.id);C(z=>new Set([...z,...re])),a(o)},i=()=>{const t=e(),o=m(),d=new Set(t.filter(y=>!o.has(y.id)).map(y=>y.id));C(d),a(null)},$=(t,o)=>{if(!u.enableMultiSelect){m().has(t)?E():(C(new Set([t])),a(t));return}if(o.ctrlKey||o.metaKey)f("multi"),K(t);else if(o.shiftKey&&u.enableRangeSelect){f("range");const d=s();d?v(d,t):T(t)}else f("single"),C(new Set([t])),a(t)},p=t=>{if(!u.enableKeyboardShortcuts)return;const o=t.ctrlKey||t.metaKey,d=t.shiftKey;o&&t.code===u.selectAllKey?(t.preventDefault(),q()):t.code===u.deselectAllKey?(t.preventDefault(),E()):o&&t.code==="KeyI"?(t.preventDefault(),i()):(t.code==="ArrowUp"||t.code==="ArrowDown")&&(t.preventDefault(),I(t.code==="ArrowDown"?1:-1,d))},I=(t,o=!1)=>{const d=e();if(d.length===0)return;const y=s();let P=y?d.findIndex(re=>re.id===y):-1;if(P===-1){const re=t>0?0:d.length-1,z=d[re];z&&T(z.id);return}let V;t>0?V=P>=d.length-1?0:P+1:V=P<=0?d.length-1:P-1;const B=d[V];B&&(o&&u.enableRangeSelect?v(y,B.id):(C(new Set([B.id])),a(B.id)))},k=t=>m().has(t),r=()=>({selectedIds:Array.from(m()),selectedItems:h(),selectedCount:b(),isAllSelected:c(),isNoneSelected:w(),isPartiallySelected:L(),lastSelectedId:s(),selectionMode:g()});return u.enableKeyboardShortcuts&&(document.addEventListener("keydown",p),ze(()=>{document.removeEventListener("keydown",p)})),{selectedIds:m,selectedItems:h,selectedCount:b,isAllSelected:c,isNoneSelected:w,isPartiallySelected:L,lastSelectedId:s,selectionMode:g,selectItem:T,deselectItem:D,toggleItem:K,selectAll:q,deselectAll:E,selectRange:v,invertSelection:i,navigateSelection:I,handleItemClick:$,isSelected:k,getSelectionInfo:r}};var Ge=S('<span class="text-xs text-gray-500 dark:text-gray-400">(<!>%)'),Ye=S('<button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Je=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),Ze=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">'),et=S('<div class="flex items-center gap-1">'),tt=S('<button class="inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 rounded-md transition-colors"><svg class="w-4 h-4 mr-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),rt=S('<div class="flex items-center gap-2">'),lt=S('<div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-4"><div class="flex items-center gap-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300"></span></div><div class="flex items-center gap-1"><button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><span class=text-sm></span></button><button class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></button></div></div><div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"><span>:</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">Ctrl+A</kbd><span>,</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">Esc</kbd><span>,</span><kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-xs">↑↓</kbd><span>'),nt=S("<button><span class=mr-1>");const at=e=>{const[n]=ke("common"),u=()=>e.isAllSelected?n("deselect_all"):(e.isPartiallySelected,n("select_all")),m=()=>e.isAllSelected?"☑️":e.isPartiallySelected?"◐":"☐",C=()=>{e.isAllSelected?e.onDeselectAll():e.onSelectAll()};return(()=>{var s=lt(),a=s.firstChild,g=a.firstChild,f=g.firstChild,h=g.nextSibling,b=h.firstChild,c=b.firstChild,w=b.nextSibling,L=a.nextSibling,T=L.firstChild,D=T.firstChild,K=T.nextSibling,q=K.nextSibling,E=q.firstChild,v=q.nextSibling,i=v.nextSibling,$=i.firstChild,p=i.nextSibling,I=p.nextSibling;return l(f,(()=>{var k=Z(()=>e.selectedCount>0);return()=>k()?n("selected_count",{count:e.selectedCount,total:e.totalCount}):n("no_selection")})()),l(g,M(X,{get when(){return e.selectedCount>0},get children(){var k=Ge(),r=k.firstChild,t=r.nextSibling;return t.nextSibling,l(k,()=>Math.round(e.selectedCount/e.totalCount*100),t),k}}),null),b.$$click=C,l(c,m),ce(w,"click",e.onInvertSelection,!0),l(h,M(X,{get when(){return e.selectedCount>0},get children(){var k=Ye();return ce(k,"click",e.onDeselectAll,!0),A(()=>N(k,"title",n("deselect_all"))),k}}),null),l(s,M(X,{get when(){return e.selectedCount>0},get children(){var k=rt();return l(k,M(X,{get when(){return e.onDuplicateSelected},get children(){var r=Je();return r.firstChild,ce(r,"click",e.onDuplicateSelected,!0),l(r,()=>n("duplicate"),null),A(()=>N(r,"title",n("duplicate_selected"))),r}}),null),l(k,M(X,{get when(){return e.onExportSelected},get children(){var r=Ze();return r.firstChild,ce(r,"click",e.onExportSelected,!0),l(r,()=>n("export"),null),A(()=>N(r,"title",n("export_selected"))),r}}),null),l(k,M(X,{get when(){return e.actions&&e.actions.length>0},get children(){var r=et();return l(r,()=>e.actions.map(t=>(()=>{var o=nt(),d=o.firstChild;return ce(o,"click",t.onClick,!0),l(d,()=>t.icon),l(o,()=>t.label,null),A(y=>{var P=t.disabled,V=`inline-flex items-center px-3 py-1 text-sm font-medium rounded-md transition-colors ${t.color==="danger"?"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 disabled:opacity-50":t.color==="primary"?"text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50":"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50"}`,B=t.label;return P!==y.e&&(o.disabled=y.e=P),V!==y.t&&ie(o,y.t=V),B!==y.a&&N(o,"title",y.a=B),y},{e:void 0,t:void 0,a:void 0}),o})())),r}}),null),l(k,M(X,{get when(){return e.onDeleteSelected},get children(){var r=tt();return r.firstChild,ce(r,"click",e.onDeleteSelected,!0),l(r,()=>n("delete"),null),A(()=>N(r,"title",n("delete_selected"))),r}}),null),k}}),L),l(T,()=>n("shortcuts"),D),l(q,()=>n("select_all"),E),l(i,()=>n("deselect"),$),l(I,()=>n("navigate")),A(k=>{var r=u(),t=n("invert_selection");return r!==k.e&&N(b,"title",k.e=r),t!==k.t&&N(w,"title",k.t=t),k},{e:void 0,t:void 0}),s})()};we(["click"]);const st={preventDefault:!0,closeOnClick:!0,closeOnScroll:!0,closeOnResize:!0},Oe=(e={})=>{const n={...st,...e},[u,m]=Q(!1),[C,s]=Q({x:0,y:0}),[a,g]=Q([]),[f,h]=Q(null),b=i=>{if(u()&&n.closeOnClick){const $=i.target,p=document.querySelector("[data-context-menu]");p&&!p.contains($)&&D()}},c=()=>{u()&&n.closeOnScroll&&D()},w=()=>{u()&&n.closeOnResize&&D()},L=i=>{i.key==="Escape"&&u()&&(i.preventDefault(),D())};_e(()=>{u()&&(document.addEventListener("click",b),document.addEventListener("scroll",c),document.addEventListener("keydown",L),window.addEventListener("resize",w),ze(()=>{document.removeEventListener("click",b),document.removeEventListener("scroll",c),document.removeEventListener("keydown",L),window.removeEventListener("resize",w)}))});const T=(i,$)=>{n.preventDefault&&i.preventDefault(),i.stopPropagation(),document.documentElement.getBoundingClientRect();const p=200,I=$.length*32;let k=i.clientX,r=i.clientY;k+p>window.innerWidth&&(k=window.innerWidth-p-10),r+I>window.innerHeight&&(r=window.innerHeight-I-10),s({x:k,y:r}),g($),h(i.currentTarget),m(!0)},D=()=>{m(!1),g([]),h(null)};return{isOpen:u,position:C,menuItems:a,targetElement:f,openMenu:T,closeMenu:D,handleItemClick:i=>{i.disabled||i.submenu||(i.action(),D())},createContextMenuHandler:i=>$=>{const p=i($);p.length>0&&T($,p)},createMenuItem:(i,$,p,I={})=>({id:i,label:$,action:p,...I}),createSeparator:()=>({id:"separator",label:"",action:()=>{},separator:!0})}};var it=S('<div data-context-menu class="fixed z-50 min-w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 focus:outline-none"tabindex=-1>'),ot=S('<svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),dt=S('<svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),ct=S("<button data-context-item tabindex=0><span class=flex-1>"),ut=S('<div class="h-px bg-gray-200 dark:bg-gray-700 mx-1 my-1">');const qe=e=>{let n;_e(()=>{e.isOpen&&n&&n.focus()});const u=a=>{if(e.isOpen)switch(a.key){case"Escape":a.preventDefault(),e.onClose();break;case"ArrowDown":a.preventDefault(),m();break;case"ArrowUp":a.preventDefault(),C();break;case"Enter":case" ":a.preventDefault();const g=n?.querySelector("[data-context-item]:focus");g&&g.click();break}},m=()=>{const a=n?.querySelectorAll("[data-context-item]:not([disabled])");if(!a?.length)return;const g=Array.from(a).findIndex(h=>h===document.activeElement);let f;g===-1||g>=a.length-1?f=0:f=g+1,a[f].focus()},C=()=>{const a=n?.querySelectorAll("[data-context-item]:not([disabled])");if(!a?.length)return;const g=Array.from(a).findIndex(h=>h===document.activeElement);let f;g===-1||g<=0?f=a.length-1:f=g-1,a[f].focus()},s=(a="default")=>{switch(a){case"primary":return"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20";case"secondary":return"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800";case"danger":return"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20";default:return"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}};return M(X,{get when(){return e.isOpen},get children(){return M(Ue,{get children(){var a=it();a.$$keydown=u;var g=n;return typeof g=="function"?Ve(g,a):n=a,l(a,M(Te,{get each(){return e.items},children:f=>M(X,{get when(){return!f.separator},get fallback(){return ut()},get children(){var h=ct(),b=h.firstChild;return h.$$click=()=>!f.disabled&&e.onItemClick(f),l(h,M(X,{get when(){return f.icon},get children(){var c=ot(),w=c.firstChild;return A(()=>N(w,"d",f.icon)),c}}),b),l(b,()=>f.label),l(h,M(X,{get when(){return f.submenu},get children(){return dt()}}),null),A(c=>{var w=`w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset ${s(f.color)} ${f.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,L=f.disabled;return w!==c.e&&ie(h,c.e=w),L!==c.t&&(h.disabled=c.t=L),c},{e:void 0,t:void 0}),h}})})),A(f=>{var h=`${e.position.x}px`,b=`${e.position.y}px`;return h!==f.e&&((f.e=h)!=null?a.style.setProperty("left",h):a.style.removeProperty("left")),b!==f.t&&((f.t=b)!=null?a.style.setProperty("top",b):a.style.removeProperty("top")),f},{e:void 0,t:void 0}),a}})}})};we(["keydown","click"]);var gt=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"><div class="relative flex-1 max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-4 h-4 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200"></div><div class="flex items-center gap-3"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><option value=name></option><option value=quantity></option><option value=size></option></select><button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button></div></div></div><div class="flex-1 overflow-auto"><div class=min-w-full><div class="sticky top-0 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10"><div class="grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"><div class="col-span-1 flex items-center"><span class="text-xs text-gray-500 dark:text-gray-400"></span></div><button><span></span></button><button><span></span></button><button><span></span></button><div class="col-span-2 text-center"></div></div></div><div class="bg-white dark:bg-gray-900">'),Me=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 15l7-7 7 7"></svg>',!1,!0,!1),Pe=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></svg>',!1,!0,!1),je=S('<svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24">'),xt=S('<div><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><div class="col-span-4 flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"></p><p class="text-xs text-gray-500 dark:text-gray-400 truncate"></p></div></div></div><div class="col-span-2 flex items-center"><div class=relative><input type=number min=1 class="w-20 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div></div><div class="col-span-3 flex items-center"><div class="flex items-center gap-2"><div class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-gray-600 dark:text-gray-300"></div><span class="text-xs text-gray-500 dark:text-gray-400">mm</span></div></div><div class="col-span-2 flex items-center justify-center"><div class="flex items-center gap-1"><input type=number min=0 max=360 step=90 class="w-16 px-2 py-1.5 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-xs text-gray-500 dark:text-gray-400">°');const ht=e=>{const[n]=ke("parts"),[u]=ke("common"),[m,C]=Q(""),[s,a]=Q("name"),[g,f]=Q("asc"),h=Oe(),b=te(()=>{let v=U.app.parts;if(m()){const i=m().toLowerCase();v=v.filter($=>$.name.toLowerCase().includes(i)||$.source.toLowerCase().includes(i))}return v=[...v].sort((i,$)=>{let p,I;switch(s()){case"name":p=i.name,I=$.name;break;case"quantity":p=i.quantity,I=$.quantity;break;case"size":p=i.bounds.width*i.bounds.height,I=$.bounds.width*$.bounds.height;break;default:p=i.name,I=$.name}return typeof p=="string"&&typeof I=="string"?g()==="asc"?p.localeCompare(I):I.localeCompare(p):g()==="asc"?p-I:I-p}),v}),c=(v,i)=>{i<1&&(i=1),ee.updatePart(v,{quantity:i})},w=(v,i)=>{ee.updatePart(v,{rotation:i})},L=v=>{s()===v?f(g()==="asc"?"desc":"asc"):(a(v),f("asc"))},T=v=>`${v.width.toFixed(1)} × ${v.height.toFixed(1)}`,D=v=>{const i={...v,id:`${v.id}-copy-${Date.now()}`,name:`${v.name} (Copy)`};ee.setParts([...U.app.parts,i])},K=v=>{const i=U.app.parts.filter($=>$.id!==v);ee.setParts(i)},q=v=>{console.log("Exporting part:",v)},E=h.createContextMenuHandler(v=>{const $=v.currentTarget.dataset.partId,p=U.app.parts.find(r=>r.id===$);if(!p)return[];const I=e.isSelected?.(p.id),k=U.app.parts.filter(r=>e.isSelected?.(r.id)).length;return[h.createMenuItem("duplicate",n("duplicate"),()=>D(p),{icon:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",color:"primary"}),h.createMenuItem("export",u("actions.export"),()=>q(p),{icon:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",color:"secondary"}),h.createSeparator(),h.createMenuItem("select",u(I?"actions.deselect":"actions.select"),()=>e.onItemClick?.(p.id,v),{icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"primary"}),...k>1?[h.createMenuItem("bulk-actions",`${k} ${n("items_selected")}`,()=>{},{disabled:!0})]:[],h.createSeparator(),h.createMenuItem("delete",u("actions.delete"),()=>K(p.id),{icon:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",color:"danger"})]});return(()=>{var v=gt(),i=v.firstChild,$=i.firstChild,p=$.firstChild,I=p.firstChild,k=I.nextSibling,r=p.nextSibling,t=r.firstChild,o=t.firstChild,d=t.nextSibling,y=d.firstChild,P=y.nextSibling,V=P.nextSibling,B=d.nextSibling,re=B.firstChild,z=i.nextSibling,he=z.firstChild,ue=he.firstChild,fe=ue.firstChild,oe=fe.firstChild,ve=oe.firstChild,ae=oe.nextSibling,me=ae.firstChild,se=ae.nextSibling,ye=se.firstChild,W=se.nextSibling,j=W.firstChild,le=W.nextSibling,be=ue.nextSibling;return k.$$input=x=>C(x.currentTarget.value),l(t,()=>n("sort_by"),o),d.addEventListener("change",x=>a(x.currentTarget.value)),l(y,()=>n("name")),l(P,()=>n("quantity")),l(V,()=>n("size")),B.$$click=()=>f(g()==="asc"?"desc":"asc"),l(re,(()=>{var x=Z(()=>g()==="asc");return()=>x()?Me():Pe()})()),l(ve,()=>n("select")),ae.$$click=()=>L("name"),l(me,()=>n("name")),l(ae,(()=>{var x=Z(()=>s()==="name");return()=>x()&&(()=>{var H=je();return l(H,(()=>{var G=Z(()=>g()==="asc");return()=>G()?Me():Pe()})()),H})()})(),null),se.$$click=()=>L("quantity"),l(ye,()=>n("quantity")),l(se,(()=>{var x=Z(()=>s()==="quantity");return()=>x()&&(()=>{var H=je();return l(H,(()=>{var G=Z(()=>g()==="asc");return()=>G()?Me():Pe()})()),H})()})(),null),W.$$click=()=>L("size"),l(j,()=>n("size")),l(W,(()=>{var x=Z(()=>s()==="size");return()=>x()&&(()=>{var H=je();return l(H,(()=>{var G=Z(()=>g()==="asc");return()=>G()?Me():Pe()})()),H})()})(),null),l(le,()=>n("rotation")),l(be,M(Te,{get each(){return b()},children:x=>(()=>{var H=xt(),G=H.firstChild,ge=G.firstChild,ne=G.nextSibling,_=ne.firstChild,F=_.firstChild,Y=F.nextSibling,O=Y.firstChild,de=O.nextSibling,J=ne.nextSibling,xe=J.firstChild,pe=xe.firstChild,Se=J.nextSibling,$e=Se.firstChild,Fe=$e.firstChild,Re=Se.nextSibling,Ne=Re.firstChild,De=Ne.firstChild;return ce(H,"contextmenu",E,!0),H.$$click=R=>e.onItemClick?.(x.id,R),ge.addEventListener("change",()=>{}),ge.$$click=R=>{R.stopPropagation();const Ce=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:!0,metaKey:!0,shiftKey:R.shiftKey,altKey:R.altKey});e.onItemClick?.(x.id,Ce)},l(O,()=>x.name),l(de,()=>x.source),pe.addEventListener("change",R=>c(x.id,parseInt(R.currentTarget.value))),l(Fe,()=>T(x.bounds)),De.addEventListener("change",R=>w(x.id,parseInt(R.currentTarget.value))),A(R=>{var Ce=`grid grid-cols-12 gap-4 px-4 py-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200 cursor-pointer ${e.isSelected?.(x.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,He=x.id,Ke=x.source;return Ce!==R.e&&ie(H,R.e=Ce),He!==R.t&&N(H,"data-part-id",R.t=He),Ke!==R.a&&N(O,"title",R.a=Ke),R},{e:void 0,t:void 0,a:void 0}),A(()=>ge.checked=e.isSelected?.(x.id)||!1),A(()=>pe.value=x.quantity),A(()=>De.value=x.rotation),H})()})),l(v,M(qe,{get isOpen(){return h.isOpen()},get position(){return h.position()},get items(){return h.menuItems()},get onItemClick(){return h.handleItemClick},get onClose(){return h.closeMenu}}),null),A(x=>{var H=n("search_parts"),G=g()==="asc"?"Sort descending":"Sort ascending",ge=`col-span-4 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="name"?"text-blue-600 dark:text-blue-400":""}`,ne=`col-span-2 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="quantity"?"text-blue-600 dark:text-blue-400":""}`,_=`col-span-3 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="size"?"text-blue-600 dark:text-blue-400":""}`;return H!==x.e&&N(k,"placeholder",x.e=H),G!==x.t&&N(B,"title",x.t=G),ge!==x.a&&ie(ae,x.a=ge),ne!==x.o&&ie(se,x.o=ne),_!==x.i&&ie(W,x.i=_),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A(()=>k.value=m()),A(()=>d.value=s()),v})()};we(["input","click","contextmenu"]);function bt(e){const{items:n,itemHeight:u,containerHeight:m,overscan:C=3}=e,[s,a]=Q(0),[g,f]=Q(!1);let h;const b=te(()=>n().length*u),c=te(()=>{const K=Math.floor(s()/u)-C;return Math.max(0,K)}),w=te(()=>{const K=Math.ceil((s()+m)/u)+C;return Math.min(n().length-1,K)}),L=te(()=>{const K=c(),q=w(),E=n(),v=[];for(let i=K;i<=q&&i<E.length;i++)v.push({item:E[i],index:i,offset:i*u});return v}),T=K=>{const q=K.target;a(q.scrollTop),f(!0),h&&clearTimeout(h),h=window.setTimeout(()=>{f(!1)},150)},D=(K,q="start")=>{const E=n().length-1,v=Math.max(0,Math.min(K,E));let i;switch(q){case"center":i=v*u-m/2+u/2;break;case"end":i=v*u-m+u;break;case"start":default:i=v*u;break}const $=b()-m;i=Math.max(0,Math.min(i,$)),a(i);const p=document.querySelector("[data-virtual-scroll-container]");p&&(p.scrollTop=i)};return ze(()=>{h&&clearTimeout(h)}),{visibleItems:L,totalHeight:b,scrollTop:s,setScrollTop:a,startIndex:c,endIndex:w,handleScroll:T,scrollToIndex:D}}var vt=S("<div data-virtual-scroll-container><div>");const ft=e=>(()=>{var n=vt(),u=n.firstChild;return ce(n,"scroll",e.onScroll),u.style.setProperty("position","relative"),l(u,()=>e.children),A(m=>{var C=`overflow-auto ${e.class||""}`,s=`${e.height}px`,a=`${e.totalHeight}px`;return C!==m.e&&ie(n,m.e=C),s!==m.t&&((m.t=s)!=null?n.style.setProperty("height",s):n.style.removeProperty("height")),a!==m.a&&((m.a=a)!=null?u.style.setProperty("height",a):u.style.removeProperty("height")),m},{e:void 0,t:void 0,a:void 0}),n})();var Be=S("<div>");function mt(e){const n=bt({items:()=>e.items,itemHeight:e.itemHeight,containerHeight:e.height,overscan:e.overscan||3,getItemKey:e.getItemKey});_e(()=>{e.scrollToIndex!==void 0&&e.scrollToIndex>=0&&n.scrollToIndex(e.scrollToIndex,e.scrollAlign)}),_e(()=>{e.onScroll?.(n.scrollTop(),!1)});const u=te(()=>e.items.length===0);return M(X,{get when(){return!u()},get fallback(){return(()=>{var m=Be();return l(m,()=>e.emptyMessage||"No items to display"),A(()=>ie(m,`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 ${e.class||""}`)),m})()},get children(){return M(ft,{get height(){return e.height},get onScroll(){return n.handleScroll},get totalHeight(){return n.totalHeight()},get class(){return e.class},get children(){return M(Te,{get each(){return n.visibleItems()},children:({item:m,index:C,offset:s})=>(()=>{var a=Be();return a.style.setProperty("position","absolute"),`${s}px`!=null?a.style.setProperty("top",`${s}px`):a.style.removeProperty("top"),a.style.setProperty("left","0"),a.style.setProperty("right","0"),l(a,()=>e.renderItem(m,C)),A(g=>(g=`${e.itemHeight}px`)!=null?a.style.setProperty("height",g):a.style.removeProperty("height")),a})()})}})}})}function yt(e){return M(mt,e)}var pt=S('<div><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><div class="col-span-4 flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"></p><p class="text-xs text-gray-500 dark:text-gray-400 truncate"></p></div></div></div><div class="col-span-2 flex items-center"><div class=relative><input type=number min=1 class="w-20 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div></div><div class="col-span-3 flex items-center"><div class="flex items-center gap-2"><div class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-gray-600 dark:text-gray-300"></div><span class="text-xs text-gray-500 dark:text-gray-400">mm</span></div></div><div class="col-span-2 flex items-center justify-center"><div class="flex items-center gap-1"><input type=number min=0 max=360 step=90 class="w-16 px-2 py-1.5 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-xs text-gray-500 dark:text-gray-400">°'),kt=S('<div class="mt-2 text-xs text-gray-500 dark:text-gray-400">Showing <!> parts with virtual scrolling for performance'),$t=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"><div class="relative flex-1 max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-4 h-4 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200"></div><div class="flex items-center gap-3"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><option value=name></option><option value=quantity></option><option value=size></option></select><button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button></div></div></div><div class="sticky top-0 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10"><div class="grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"><div class="col-span-1 flex items-center"><span class="text-xs text-gray-500 dark:text-gray-400"></span></div><button><span></span></button><button><span></span></button><button><span></span></button><div class="col-span-2 text-center"></div></div></div><div class="flex-1 bg-white dark:bg-gray-900">'),Ae=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 15l7-7 7 7"></svg>',!1,!0,!1),Ee=S('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></svg>',!1,!0,!1),Le=S('<svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24">');const _t=e=>{const[n]=ke("parts"),[u]=ke("common"),[m,C]=Q(""),[s,a]=Q("name"),[g,f]=Q("asc"),[h,b]=Q(e.height||600),c=Oe(),[w,L]=Q(),T=te(()=>{let r=U.app.parts;if(m()){const t=m().toLowerCase();r=r.filter(o=>o.name.toLowerCase().includes(t)||o.source.toLowerCase().includes(t))}return r=[...r].sort((t,o)=>{let d,y;switch(s()){case"name":d=t.name,y=o.name;break;case"quantity":d=t.quantity,y=o.quantity;break;case"size":d=t.bounds.width*t.bounds.height,y=o.bounds.width*o.bounds.height;break;default:d=t.name,y=o.name}return typeof d=="string"&&typeof y=="string"?g()==="asc"?d.localeCompare(y):y.localeCompare(d):g()==="asc"?d-y:y-d}),r});let D;Qe(()=>{if(D){const r=new ResizeObserver(t=>{for(const o of t)b(o.contentRect.height)});r.observe(D),ze(()=>{r.disconnect()})}}),_e(()=>{const r=T(),t=r.find(o=>e.isSelected?.(o.id));if(t){const o=r.indexOf(t);o>=0&&L(o)}});const K=(r,t)=>{t<1&&(t=1),ee.updatePart(r,{quantity:t})},q=(r,t)=>{ee.updatePart(r,{rotation:t})},E=r=>{s()===r?f(g()==="asc"?"desc":"asc"):(a(r),f("asc"))},v=r=>`${r.width.toFixed(1)} × ${r.height.toFixed(1)}`,i=r=>{const t={...r,id:`${r.id}-copy-${Date.now()}`,name:`${r.name} (Copy)`};ee.setParts([...U.app.parts,t])},$=r=>{const t=U.app.parts.filter(o=>o.id!==r);ee.setParts(t)},p=r=>{console.log("Exporting part:",r)},I=c.createContextMenuHandler(r=>{const o=r.currentTarget.dataset.partId,d=U.app.parts.find(V=>V.id===o);if(!d)return[];const y=e.isSelected?.(d.id),P=U.app.parts.filter(V=>e.isSelected?.(V.id)).length;return[c.createMenuItem("duplicate",n("duplicate"),()=>i(d),{icon:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",color:"primary"}),c.createMenuItem("export",u("actions.export"),()=>p(d),{icon:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",color:"secondary"}),c.createSeparator(),c.createMenuItem("select",u(y?"actions.deselect":"actions.select"),()=>e.onItemClick?.(d.id,r),{icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"primary"}),...P>1?[c.createMenuItem("bulk-actions",`${P} ${n("items_selected")}`,()=>{},{disabled:!0})]:[],c.createSeparator(),c.createMenuItem("delete",u("actions.delete"),()=>$(d.id),{icon:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",color:"danger"})]}),k=(r,t)=>(()=>{var o=pt(),d=o.firstChild,y=d.firstChild,P=d.nextSibling,V=P.firstChild,B=V.firstChild,re=B.nextSibling,z=re.firstChild,he=z.nextSibling,ue=P.nextSibling,fe=ue.firstChild,oe=fe.firstChild,ve=ue.nextSibling,ae=ve.firstChild,me=ae.firstChild,se=ve.nextSibling,ye=se.firstChild,W=ye.firstChild;return ce(o,"contextmenu",I,!0),o.$$click=j=>e.onItemClick?.(r.id,j),y.addEventListener("change",()=>{}),y.$$click=j=>{j.stopPropagation();const le=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:!0,metaKey:!0,shiftKey:j.shiftKey,altKey:j.altKey});e.onItemClick?.(r.id,le)},l(z,()=>r.name),l(he,()=>r.source),oe.addEventListener("change",j=>K(r.id,parseInt(j.currentTarget.value))),l(me,()=>v(r.bounds)),W.addEventListener("change",j=>q(r.id,parseInt(j.currentTarget.value))),A(j=>{var le=`grid grid-cols-12 gap-4 px-4 py-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200 cursor-pointer ${e.isSelected?.(r.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,be=r.id,x=r.source;return le!==j.e&&ie(o,j.e=le),be!==j.t&&N(o,"data-part-id",j.t=be),x!==j.a&&N(z,"title",j.a=x),j},{e:void 0,t:void 0,a:void 0}),A(()=>y.checked=e.isSelected?.(r.id)||!1),A(()=>oe.value=r.quantity),A(()=>W.value=r.rotation),o})();return(()=>{var r=$t(),t=r.firstChild,o=t.firstChild,d=o.firstChild,y=d.firstChild,P=y.nextSibling,V=d.nextSibling,B=V.firstChild,re=B.firstChild,z=B.nextSibling,he=z.firstChild,ue=he.nextSibling,fe=ue.nextSibling,oe=z.nextSibling,ve=oe.firstChild,ae=t.nextSibling,me=ae.firstChild,se=me.firstChild,ye=se.firstChild,W=se.nextSibling,j=W.firstChild,le=W.nextSibling,be=le.firstChild,x=le.nextSibling,H=x.firstChild,G=x.nextSibling,ge=ae.nextSibling,ne=D;return typeof ne=="function"?Ve(ne,r):D=r,P.$$input=_=>C(_.currentTarget.value),l(B,()=>n("sort_by"),re),z.addEventListener("change",_=>a(_.currentTarget.value)),l(he,()=>n("name")),l(ue,()=>n("quantity")),l(fe,()=>n("size")),oe.$$click=()=>f(g()==="asc"?"desc":"asc"),l(ve,(()=>{var _=Z(()=>g()==="asc");return()=>_()?Ae():Ee()})()),l(t,M(X,{get when(){return T().length>100},get children(){var _=kt(),F=_.firstChild,Y=F.nextSibling;return Y.nextSibling,l(_,()=>T().length,Y),_}}),null),l(ye,()=>n("select")),W.$$click=()=>E("name"),l(j,()=>n("name")),l(W,(()=>{var _=Z(()=>s()==="name");return()=>_()&&(()=>{var F=Le();return l(F,(()=>{var Y=Z(()=>g()==="asc");return()=>Y()?Ae():Ee()})()),F})()})(),null),le.$$click=()=>E("quantity"),l(be,()=>n("quantity")),l(le,(()=>{var _=Z(()=>s()==="quantity");return()=>_()&&(()=>{var F=Le();return l(F,(()=>{var Y=Z(()=>g()==="asc");return()=>Y()?Ae():Ee()})()),F})()})(),null),x.$$click=()=>E("size"),l(H,()=>n("size")),l(x,(()=>{var _=Z(()=>s()==="size");return()=>_()&&(()=>{var F=Le();return l(F,(()=>{var Y=Z(()=>g()==="asc");return()=>Y()?Ae():Ee()})()),F})()})(),null),l(G,()=>n("rotation")),l(ge,M(yt,{get items(){return T()},itemHeight:80,get height(){return h()-120},overscan:5,renderItem:k,getItemKey:_=>_.id,get emptyMessage(){return n("no_parts_loaded")},get scrollToIndex(){return w()},scrollAlign:"center"})),l(r,M(qe,{get isOpen(){return c.isOpen()},get position(){return c.position()},get items(){return c.menuItems()},get onItemClick(){return c.handleItemClick},get onClose(){return c.closeMenu}}),null),A(_=>{var F=n("search_parts"),Y=g()==="asc"?"Sort descending":"Sort ascending",O=`col-span-4 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="name"?"text-blue-600 dark:text-blue-400":""}`,de=`col-span-2 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="quantity"?"text-blue-600 dark:text-blue-400":""}`,J=`col-span-3 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="size"?"text-blue-600 dark:text-blue-400":""}`;return F!==_.e&&N(P,"placeholder",_.e=F),Y!==_.t&&N(oe,"title",_.t=Y),O!==_.a&&ie(W,_.a=O),de!==_.o&&ie(le,_.o=de),J!==_.i&&ie(x,_.i=J),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A(()=>P.value=m()),A(()=>z.value=s()),r})()};we(["click","contextmenu","input"]);var wt=S('<div class="flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm text-blue-700 dark:text-blue-300 font-medium"> part<!> selected'),St=S('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="px-6 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm"><svg class="w-5 h-5 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div><h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h1><p class="text-sm text-gray-500 dark:text-gray-400">Manage your parts and import new ones</p></div></div><div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400"></span></div></div></div></div><div class="bg-gray-50 dark:bg-gray-800/50 px-6 py-4 border-b border-gray-200 dark:border-gray-700"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-600 dark:text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Selected</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Area</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div></div></div><div class="bg-white dark:bg-gray-800 px-6 py-3 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><span class="text-sm text-gray-600 dark:text-gray-400">Bulk Actions:</span><div class="flex items-center gap-2"><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button><span class="text-gray-300 dark:text-gray-600">•</span><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button></div><div class="text-xs text-gray-500 dark:text-gray-400 italic">Tip: Hold Ctrl/Cmd for multi-select, Shift for range select</div></div></div></div><div class="flex-1 overflow-hidden bg-gray-50 dark:bg-gray-900">'),Ct=S('<div class="h-full flex flex-col items-center justify-center text-center gap-6 p-8"><div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"><svg class="w-12 h-12 text-gray-400 dark:text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="max-w-sm space-y-3"><h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400 leading-relaxed"></p></div><div class="flex flex-col sm:flex-row gap-3"><button class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><button class="inline-flex items-center gap-2 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 font-medium rounded-lg border border-gray-300 dark:border-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Learn More</button></div><div class="text-xs text-gray-500 dark:text-gray-600 max-w-md"><p>Supported formats: SVG, DXF • Drag and drop files here');const Mt=()=>{const[e]=ke("parts"),[n]=ke("common"),u=te(()=>U.app.parts.length),m=te(()=>U.app.parts.reduce((b,c)=>b+c.quantity,0)),C=te(()=>U.app.parts.reduce((b,c)=>b+(c.area||0),0)),s=Xe(()=>U.app.parts,{enableMultiSelect:!0,enableKeyboardShortcuts:!0,enableRangeSelect:!0}),a=async()=>{if(!Ie.isAvailable){console.warn("IPC not available");return}try{const b=await Ie.openFileDialog({title:e("import_parts"),filters:[{name:"Vector Files",extensions:["svg","dxf"]},{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(b.canceled||!b.filePaths?.length)return;const c=await Ie.importParts(b.filePaths);ee.setParts([...U.app.parts,...c])}catch(b){console.error("Failed to import parts:",b),ee.setError(e("import_failed"))}},g=async()=>{const b=s.selectedItems();if(b.length===0){ee.setError(e("no_parts_selected"));return}try{const c=await Ie.saveFileDialog();if(c.canceled||!c.filePath)return;console.log("Exporting parts:",b)}catch(c){console.error("Failed to export parts:",c),ee.setError(e("export_failed"))}},f=()=>{const b=s.selectedIds();if(b.size===0){ee.setError(e("no_parts_selected"));return}const c=U.app.parts.filter(w=>!b.has(w.id));ee.setParts(c),s.deselectAll()},h=()=>{const b=s.selectedItems();if(b.length===0)return;const c=b.map(w=>({...w,id:`${w.id}-copy-${Date.now()}`,name:`${w.name} (Copy)`}));ee.setParts([...U.app.parts,...c]),s.deselectAll(),c.forEach(w=>s.selectItem(w.id))};return(()=>{var b=St(),c=b.firstChild,w=c.firstChild,L=w.firstChild,T=L.firstChild,D=T.nextSibling,K=D.firstChild,q=L.nextSibling,E=q.firstChild;E.firstChild;var v=E.nextSibling,i=v.firstChild,$=c.nextSibling,p=$.firstChild,I=p.firstChild,k=I.firstChild,r=k.firstChild,t=r.nextSibling,o=t.firstChild,d=o.nextSibling,y=I.nextSibling,P=y.firstChild,V=P.firstChild,B=V.nextSibling,re=B.firstChild,z=re.nextSibling,he=y.nextSibling,ue=he.firstChild,fe=ue.firstChild,oe=fe.nextSibling,ve=oe.firstChild,ae=ve.nextSibling,me=he.nextSibling,se=me.firstChild,ye=se.firstChild,W=ye.nextSibling,j=W.firstChild,le=j.nextSibling,be=$.nextSibling,x=be.firstChild,H=x.firstChild,G=H.firstChild,ge=G.nextSibling,ne=ge.firstChild,_=ne.nextSibling,F=_.nextSibling,Y=be.nextSibling;return l(K,()=>e("parts_title")),E.$$click=a,l(E,()=>e("import"),null),l(i,()=>e("parts_count",{count:u()})),l(b,M(at,{get selectedCount(){return s.selectedCount()},get totalCount(){return u()},get isAllSelected(){return s.isAllSelected()},get isNoneSelected(){return s.isNoneSelected()},get isPartiallySelected(){return s.isPartiallySelected()},get onSelectAll(){return s.selectAll},get onDeselectAll(){return s.deselectAll},get onInvertSelection(){return s.invertSelection},onDeleteSelected:f,onDuplicateSelected:h,onExportSelected:g}),$),l(o,()=>e("total_parts")),l(d,u),l(re,()=>e("total_quantity")),l(z,m),l(ae,()=>s.selectedCount()),l(le,()=>Math.round(C())),ce(ne,"click",s.selectAll,!0),l(ne,()=>e("select_all")),ce(F,"click",s.deselectAll,!0),l(F,()=>e("deselect_all")),l(x,M(X,{get when(){return s.selectedCount()>0},get children(){var O=wt(),de=O.firstChild,J=de.nextSibling,xe=J.firstChild,pe=xe.nextSibling;return pe.nextSibling,l(J,()=>s.selectedCount(),xe),l(J,()=>s.selectedCount()===1?"":"s",pe),O}}),null),l(Y,M(X,{get when(){return u()>0},get fallback(){return(()=>{var O=Ct(),de=O.firstChild,J=de.nextSibling,xe=J.firstChild,pe=xe.nextSibling,Se=J.nextSibling,$e=Se.firstChild;return $e.firstChild,l(xe,()=>e("no_parts_loaded")),l(pe,()=>e("import_parts_to_get_started")),$e.$$click=a,l($e,()=>e("import_parts"),null),O})()},get children(){return M(X,{get when(){return u()>50},get fallback(){return M(ht,{get onItemClick(){return s.handleItemClick},get isSelected(){return s.isSelected}})},get children(){return M(_t,{get onItemClick(){return s.handleItemClick},get isSelected(){return s.isSelected}})}})}})),A(O=>{var de=e("import_parts"),J=u()===0,xe=u()===0;return de!==O.e&&N(E,"title",O.e=de),J!==O.t&&(ne.disabled=O.t=J),xe!==O.a&&(F.disabled=O.a=xe),O},{e:void 0,t:void 0,a:void 0}),b})()};we(["click"]);export{Mt as default};
