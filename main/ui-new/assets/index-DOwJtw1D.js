(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const Zs=!1,Ys=(t,e)=>t===e,nt=Symbol("solid-proxy"),Qt=Symbol("solid-track"),Rt={equals:Ys};let As=Ds;const et=1,Nt=2,Es={owned:null,cleanups:null,context:null,owner:null};var he=null;let Wt=null,ei=null,_e=null,Ae=null,Xe=null,Kt=0;function Ft(t,e){const s=_e,i=he,n=t.length===0,r=e===void 0?i:e,l=n?Es:{owned:null,cleanups:null,context:r?r.context:null,owner:r},a=n?t:()=>t(()=>Ue(()=>yt(l)));he=l,_e=null;try{return ft(a,!0)}finally{_e=s,he=i}}function Q(t,e){e=e?Object.assign({},Rt,e):Rt;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},i=n=>(typeof n=="function"&&(n=n(s.value)),Ts(s,n));return[Ns.bind(s),i]}function A(t,e,s){const i=as(t,e,!1,et);Ct(i)}function ns(t,e,s){As=ai;const i=as(t,e,!1,et);i.user=!0,Xe?Xe.push(i):Ct(i)}function de(t,e,s){s=s?Object.assign({},Rt,s):Rt;const i=as(t,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=s.equals||void 0,Ct(i),Ns.bind(i)}function ti(t){return ft(t,!1)}function Ue(t){if(_e===null)return t();const e=_e;_e=null;try{return t()}finally{_e=e}}function rs(t){ns(()=>Ue(t))}function Fs(t){return he===null||(he.cleanups===null?he.cleanups=[t]:he.cleanups.push(t)),t}function Xt(){return _e}function si(t,e){const s=Symbol("context");return{id:s,Provider:oi(s),defaultValue:t}}function ii(t){let e;return he&&he.context&&(e=he.context[t.id])!==void 0?e:t.defaultValue}function Rs(t){const e=de(t),s=de(()=>Zt(e()));return s.toArray=()=>{const i=s();return Array.isArray(i)?i:i!=null?[i]:[]},s}function Ns(){if(this.sources&&this.state)if(this.state===et)Ct(this);else{const t=Ae;Ae=null,ft(()=>Dt(this),!1),Ae=t}if(_e){const t=this.observers?this.observers.length:0;_e.sources?(_e.sources.push(this),_e.sourceSlots.push(t)):(_e.sources=[this],_e.sourceSlots=[t]),this.observers?(this.observers.push(_e),this.observerSlots.push(_e.sources.length-1)):(this.observers=[_e],this.observerSlots=[_e.sources.length-1])}return this.value}function Ts(t,e,s){let i=t.value;return(!t.comparator||!t.comparator(i,e))&&(t.value=e,t.observers&&t.observers.length&&ft(()=>{for(let n=0;n<t.observers.length;n+=1){const r=t.observers[n],l=Wt&&Wt.running;l&&Wt.disposed.has(r),(l?!r.tState:!r.state)&&(r.pure?Ae.push(r):Xe.push(r),r.observers&&Is(r)),l||(r.state=et)}if(Ae.length>1e6)throw Ae=[],new Error},!1)),e}function Ct(t){if(!t.fn)return;yt(t);const e=Kt;ni(t,t.value,e)}function ni(t,e,s){let i;const n=he,r=_e;_e=he=t;try{i=t.fn(e)}catch(l){return t.pure&&(t.state=et,t.owned&&t.owned.forEach(yt),t.owned=null),t.updatedAt=s+1,Ms(l)}finally{_e=r,he=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Ts(t,i):t.value=i,t.updatedAt=s)}function as(t,e,s,i=et,n){const r={fn:t,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:he,context:he?he.context:null,pure:s};return he===null||he!==Es&&(he.owned?he.owned.push(r):he.owned=[r]),r}function Tt(t){if(t.state===0)return;if(t.state===Nt)return Dt(t);if(t.suspense&&Ue(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Kt);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===et)Ct(t);else if(t.state===Nt){const i=Ae;Ae=null,ft(()=>Dt(t,e[0]),!1),Ae=i}}function ft(t,e){if(Ae)return t();let s=!1;e||(Ae=[]),Xe?s=!0:Xe=[],Kt++;try{const i=t();return ri(s),i}catch(i){s||(Xe=null),Ae=null,Ms(i)}}function ri(t){if(Ae&&(Ds(Ae),Ae=null),t)return;const e=Xe;Xe=null,e.length&&ft(()=>As(e),!1)}function Ds(t){for(let e=0;e<t.length;e++)Tt(t[e])}function ai(t){let e,s=0;for(e=0;e<t.length;e++){const i=t[e];i.user?t[s++]=i:Tt(i)}for(e=0;e<s;e++)Tt(t[e])}function Dt(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const i=t.sources[s];if(i.sources){const n=i.state;n===et?i!==e&&(!i.updatedAt||i.updatedAt<Kt)&&Tt(i):n===Nt&&Dt(i,e)}}}function Is(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=Nt,s.pure?Ae.push(s):Xe.push(s),s.observers&&Is(s))}}function yt(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),i=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const r=n.pop(),l=s.observerSlots.pop();i<n.length&&(r.sourceSlots[l]=i,n[i]=r,s.observerSlots[i]=l)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)yt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)yt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function li(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Ms(t,e=he){throw li(t)}function Zt(t){if(typeof t=="function"&&!t.length)return Zt(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const i=Zt(t[s]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return t}function oi(t,e){return function(i){let n;return A(()=>n=Ue(()=>(he.context={...he.context,[t]:i.value},Rs(()=>i.children))),void 0),n}}const ci=Symbol("fallback");function ls(t){for(let e=0;e<t.length;e++)t[e]()}function di(t,e,s={}){let i=[],n=[],r=[],l=0,a=e.length>1?[]:null;return Fs(()=>ls(r)),()=>{let c=t()||[],d=c.length,g,u;return c[Qt],Ue(()=>{let f,h,p,_,x,$,L,S,R;if(d===0)l!==0&&(ls(r),r=[],i=[],n=[],l=0,a&&(a=[])),s.fallback&&(i=[ci],n[0]=Ft(X=>(r[0]=X,s.fallback())),l=1);else if(l===0){for(n=new Array(d),u=0;u<d;u++)i[u]=c[u],n[u]=Ft(m);l=d}else{for(p=new Array(d),_=new Array(d),a&&(x=new Array(d)),$=0,L=Math.min(l,d);$<L&&i[$]===c[$];$++);for(L=l-1,S=d-1;L>=$&&S>=$&&i[L]===c[S];L--,S--)p[S]=n[L],_[S]=r[L],a&&(x[S]=a[L]);for(f=new Map,h=new Array(S+1),u=S;u>=$;u--)R=c[u],g=f.get(R),h[u]=g===void 0?-1:g,f.set(R,u);for(g=$;g<=L;g++)R=i[g],u=f.get(R),u!==void 0&&u!==-1?(p[u]=n[g],_[u]=r[g],a&&(x[u]=a[g]),u=h[u],f.set(R,u)):r[g]();for(u=$;u<d;u++)u in p?(n[u]=p[u],r[u]=_[u],a&&(a[u]=x[u],a[u](u))):n[u]=Ft(m);n=n.slice(0,l=d),i=c.slice(0)}return n});function m(f){if(r[u]=f,a){const[h,p]=Q(u);return a[u]=p,e(c[u],h)}return e(c[u])}}}function k(t,e){return Ue(()=>t(e||{}))}const js=t=>`Stale read from <${t}>.`;function Te(t){const e="fallback"in t&&{fallback:()=>t.fallback};return de(di(()=>t.each,t.children,e||void 0))}function te(t){const e=t.keyed,s=de(()=>t.when,void 0,void 0),i=e?s:de(s,void 0,{equals:(n,r)=>!n==!r});return de(()=>{const n=i();if(n){const r=t.children;return typeof r=="function"&&r.length>0?Ue(()=>r(e?n:()=>{if(!Ue(i))throw js("Show");return s()})):r}return t.fallback},void 0,void 0)}function ui(t){const e=Rs(()=>t.children),s=de(()=>{const i=e(),n=Array.isArray(i)?i:[i];let r=()=>{};for(let l=0;l<n.length;l++){const a=l,c=n[l],d=r,g=de(()=>d()?void 0:c.when,void 0,void 0),u=c.keyed?g:de(g,void 0,{equals:(m,f)=>!m==!f});r=()=>d()||(u()?[a,g,c]:void 0)}return r});return de(()=>{const i=s()();if(!i)return t.fallback;const[n,r,l]=i,a=l.children;return typeof a=="function"&&a.length>0?Ue(()=>a(l.keyed?r():()=>{if(Ue(s)()?.[0]!==n)throw js("Match");return r()})):a},void 0,void 0)}function At(t){return t}const qe=t=>de(()=>t());function gi(t,e,s){let i=s.length,n=e.length,r=i,l=0,a=0,c=e[n-1].nextSibling,d=null;for(;l<n||a<r;){if(e[l]===s[a]){l++,a++;continue}for(;e[n-1]===s[r-1];)n--,r--;if(n===l){const g=r<i?a?s[a-1].nextSibling:s[r-a]:c;for(;a<r;)t.insertBefore(s[a++],g)}else if(r===a)for(;l<n;)(!d||!d.has(e[l]))&&e[l].remove(),l++;else if(e[l]===s[r-1]&&s[a]===e[n-1]){const g=e[--n].nextSibling;t.insertBefore(s[a++],e[l++].nextSibling),t.insertBefore(s[--r],g),e[n]=s[r]}else{if(!d){d=new Map;let u=a;for(;u<r;)d.set(s[u],u++)}const g=d.get(e[l]);if(g!=null)if(a<g&&g<r){let u=l,m=1,f;for(;++u<n&&u<r&&!((f=d.get(e[u]))==null||f!==g+m);)m++;if(m>g-a){const h=e[l];for(;a<g;)t.insertBefore(s[a++],h)}else t.replaceChild(s[a++],e[l++])}else l++;else e[l++].remove()}}}const os="_$DX_DELEGATE";function fi(t,e,s,i={}){let n;return Ft(r=>{n=r,e===document?t():o(e,t(),e.firstChild?null:void 0,s)},i.owner),()=>{n(),e.textContent=""}}function F(t,e,s,i){let n;const r=()=>{const a=i?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=t,s?a.content.firstChild.firstChild:i?a.firstChild:a.content.firstChild},l=e?()=>Ue(()=>document.importNode(n||(n=r()),!0)):()=>(n||(n=r())).cloneNode(!0);return l.cloneNode=l,l}function Ee(t,e=window.document){const s=e[os]||(e[os]=new Set);for(let i=0,n=t.length;i<n;i++){const r=t[i];s.has(r)||(s.add(r),e.addEventListener(r,pi))}}function Y(t,e,s){s==null?t.removeAttribute(e):t.setAttribute(e,s)}function He(t,e){e==null?t.removeAttribute("class"):t.className=e}function hi(t,e,s,i){Array.isArray(s)?(t[`$$${e}`]=s[0],t[`$$${e}Data`]=s[1]):t[`$$${e}`]=s}function cs(t,e,s){return Ue(()=>t(e,s))}function o(t,e,s,i){if(s!==void 0&&!i&&(i=[]),typeof e!="function")return It(t,e,i,s);A(n=>It(t,e(),n,s),i)}function pi(t){let e=t.target;const s=`$$${t.type}`,i=t.target,n=t.currentTarget,r=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),l=()=>{const c=e[s];if(c&&!e.disabled){const d=e[`${s}Data`];if(d!==void 0?c.call(e,d,t):c.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&r(e.host),!0},a=()=>{for(;l()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const c=t.composedPath();r(c[0]);for(let d=0;d<c.length-2&&(e=c[d],!!l());d++){if(e._$host){e=e._$host,a();break}if(e.parentNode===n)break}}else a();r(i)}function It(t,e,s,i,n){for(;typeof s=="function";)s=s();if(e===s)return s;const r=typeof e,l=i!==void 0;if(t=l&&s[0]&&s[0].parentNode||t,r==="string"||r==="number"){if(r==="number"&&(e=e.toString(),e===s))return s;if(l){let a=s[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),s=lt(t,s,i,a)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||r==="boolean")s=lt(t,s,i);else{if(r==="function")return A(()=>{let a=e();for(;typeof a=="function";)a=a();s=It(t,a,s,i)}),()=>s;if(Array.isArray(e)){const a=[],c=s&&Array.isArray(s);if(Yt(a,e,s,n))return A(()=>s=It(t,a,s,i,!0)),()=>s;if(a.length===0){if(s=lt(t,s,i),l)return s}else c?s.length===0?ds(t,a,i):gi(t,s,a):(s&&lt(t),ds(t,a));s=a}else if(e.nodeType){if(Array.isArray(s)){if(l)return s=lt(t,s,i,e);lt(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function Yt(t,e,s,i){let n=!1;for(let r=0,l=e.length;r<l;r++){let a=e[r],c=s&&s[t.length],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))n=Yt(t,a,c)||n;else if(d==="function")if(i){for(;typeof a=="function";)a=a();n=Yt(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||n}else t.push(a),n=!0;else{const g=String(a);c&&c.nodeType===3&&c.data===g?t.push(c):t.push(document.createTextNode(g))}}return n}function ds(t,e,s=null){for(let i=0,n=e.length;i<n;i++)t.insertBefore(e[i],s)}function lt(t,e,s,i){if(s===void 0)return t.textContent="";const n=i||document.createTextNode("");if(e.length){let r=!1;for(let l=e.length-1;l>=0;l--){const a=e[l];if(n!==a){const c=a.parentNode===t;!r&&!l?c?t.replaceChild(n,a):t.insertBefore(n,s):c&&a.remove()}else r=!0}}else t.insertBefore(n,s);return[n]}const K=t=>typeof t=="string",_t=()=>{let t,e;const s=new Promise((i,n)=>{t=i,e=n});return s.resolve=t,s.reject=e,s},us=t=>t==null?"":""+t,mi=(t,e,s)=>{t.forEach(i=>{e[i]&&(s[i]=e[i])})},_i=/###/g,gs=t=>t&&t.indexOf("###")>-1?t.replace(_i,"."):t,fs=t=>!t||K(t),xt=(t,e,s)=>{const i=K(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(fs(t))return{};const r=gs(i[n]);!t[r]&&s&&(t[r]=new s),Object.prototype.hasOwnProperty.call(t,r)?t=t[r]:t={},++n}return fs(t)?{}:{obj:t,k:gs(i[n])}},hs=(t,e,s)=>{const{obj:i,k:n}=xt(t,e,Object);if(i!==void 0||e.length===1){i[n]=s;return}let r=e[e.length-1],l=e.slice(0,e.length-1),a=xt(t,l,Object);for(;a.obj===void 0&&l.length;)r=`${l[l.length-1]}.${r}`,l=l.slice(0,l.length-1),a=xt(t,l,Object),a?.obj&&typeof a.obj[`${a.k}.${r}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${r}`]=s},bi=(t,e,s,i)=>{const{obj:n,k:r}=xt(t,e,Object);n[r]=n[r]||[],n[r].push(s)},Mt=(t,e)=>{const{obj:s,k:i}=xt(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,i))return s[i]},vi=(t,e,s)=>{const i=Mt(t,s);return i!==void 0?i:Mt(e,s)},Us=(t,e,s)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?K(t[i])||t[i]instanceof String||K(e[i])||e[i]instanceof String?s&&(t[i]=e[i]):Us(t[i],e[i],s):t[i]=e[i]);return t},ot=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var xi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const yi=t=>K(t)?t.replace(/[&<>"'\/]/g,e=>xi[e]):t;class $i{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Si=[" ",",","?","!",";"],wi=new $i(20),ki=(t,e,s)=>{e=e||"",s=s||"";const i=Si.filter(l=>e.indexOf(l)<0&&s.indexOf(l)<0);if(i.length===0)return!0;const n=wi.getRegExp(`(${i.map(l=>l==="?"?"\\?":l).join("|")})`);let r=!n.test(t);if(!r){const l=t.indexOf(s);l>0&&!n.test(t.substring(0,l))&&(r=!0)}return r},es=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const i=e.split(s);let n=t;for(let r=0;r<i.length;){if(!n||typeof n!="object")return;let l,a="";for(let c=r;c<i.length;++c)if(c!==r&&(a+=s),a+=i[c],l=n[a],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&c<i.length-1)continue;r+=c-r+1;break}n=l}return n},$t=t=>t?.replace("_","-"),Ci={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class jt{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||Ci,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,i,n){return n&&!this.debug?null:(K(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new jt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new jt(this.logger,e)}}var We=new jt;class Ht{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(s)||0;this.observers[i].set(s,n+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([n,r])=>{for(let l=0;l<r;l++)n(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let l=0;l<r;l++)n.apply(n,[e,...s])})}}class ps extends Ht{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,i,n={}){const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,s],i&&(Array.isArray(i)?a.push(...i):K(i)&&r?a.push(...i.split(r)):a.push(i)));const c=Mt(this.data,a);return!c&&!s&&!i&&e.indexOf(".")>-1&&(e=a[0],s=a[1],i=a.slice(2).join(".")),c||!l||!K(i)?c:es(this.data?.[e]?.[s],i,r)}addResource(e,s,i,n,r={silent:!1}){const l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let a=[e,s];i&&(a=a.concat(l?i.split(l):i)),e.indexOf(".")>-1&&(a=e.split("."),n=s,s=a[1]),this.addNamespaces(s),hs(this.data,a,n),r.silent||this.emit("added",e,s,i,n)}addResources(e,s,i,n={silent:!1}){for(const r in i)(K(i[r])||Array.isArray(i[r]))&&this.addResource(e,s,r,i[r],{silent:!0});n.silent||this.emit("added",e,s,i)}addResourceBundle(e,s,i,n,r,l={silent:!1,skipCopy:!1}){let a=[e,s];e.indexOf(".")>-1&&(a=e.split("."),n=i,i=s,s=a[1]),this.addNamespaces(s);let c=Mt(this.data,a)||{};l.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?Us(c,i,r):c={...c,...i},hs(this.data,a,c),l.silent||this.emit("added",e,s,i)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(n=>s[n]&&Object.keys(s[n]).length>0)}toJSON(){return this.data}}var zs={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,i,n){return t.forEach(r=>{e=this.processors[r]?.process(e,s,i,n)??e}),e}};const ms={},_s=t=>!K(t)&&typeof t!="boolean"&&typeof t!="number";class Ut extends Ht{constructor(e,s={}){super(),mi(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=We.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const i={...s};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,s){let i=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let r=s.ns||this.options.defaultNS||[];const l=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!ki(e,i,n);if(l&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:K(r)?[r]:r};const d=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(d[0])>-1)&&(r=d.shift()),e=d.join(n)}return{key:e,namespaces:K(r)?[r]:r}}translate(e,s,i){let n=typeof s=="object"?{...s}:s;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],n),d=c[c.length-1];let g=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const u=n.lng||this.language,m=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u?.toLowerCase()==="cimode")return m?r?{res:`${d}${g}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:`${d}${g}${a}`:r?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:a;const f=this.resolve(e,n);let h=f?.res;const p=f?.usedKey||a,_=f?.exactUsedKey||a,x=["[object Number]","[object Function]","[object RegExp]"],$=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,L=!this.i18nFormat||this.i18nFormat.handleAsObject,S=n.count!==void 0&&!K(n.count),R=Ut.hasDefaultValue(n),X=S?this.pluralResolver.getSuffix(u,n.count,n):"",M=n.ordinal&&S?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",D=S&&!n.ordinal&&n.count===0,v=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${X}`]||n[`defaultValue${M}`]||n.defaultValue;let y=h;L&&!h&&R&&(y=v);const H=_s(y),j=Object.prototype.toString.apply(y);if(L&&y&&H&&x.indexOf(j)<0&&!(K($)&&Array.isArray(y))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,y,{...n,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(f.res=z,f.usedParams=this.getUsedParamsDetails(n),f):z}if(l){const z=Array.isArray(y),C=z?[]:{},B=z?_:p;for(const T in y)if(Object.prototype.hasOwnProperty.call(y,T)){const U=`${B}${l}${T}`;R&&!h?C[T]=this.translate(U,{...n,defaultValue:_s(v)?v[T]:void 0,joinArrays:!1,ns:c}):C[T]=this.translate(U,{...n,joinArrays:!1,ns:c}),C[T]===U&&(C[T]=y[T])}h=C}}else if(L&&K($)&&Array.isArray(h))h=h.join($),h&&(h=this.extendTranslation(h,e,n,i));else{let z=!1,C=!1;!this.isValidLookup(h)&&R&&(z=!0,h=v),this.isValidLookup(h)||(C=!0,h=a);const T=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:h,U=R&&v!==h&&this.options.updateMissing;if(C||z||U){if(this.logger.log(U?"updateKey":"missingKey",u,d,a,U?v:h),l){const N=this.resolve(a,{...n,keySeparator:!1});N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let G=[];const J=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&J&&J[0])for(let N=0;N<J.length;N++)G.push(J[N]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(n.lng||this.language):G.push(n.lng||this.language);const O=(N,V,I)=>{const W=R&&I!==h?I:T;this.options.missingKeyHandler?this.options.missingKeyHandler(N,d,V,W,U,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(N,d,V,W,U,n),this.emit("missingKey",N,d,V,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?G.forEach(N=>{const V=this.pluralResolver.getSuffixes(N,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&V.indexOf(`${this.options.pluralSeparator}zero`)<0&&V.push(`${this.options.pluralSeparator}zero`),V.forEach(I=>{O([N],a+I,n[`defaultValue${I}`]||v)})}):O(G,a,v))}h=this.extendTranslation(h,e,n,f,i),C&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${d}${g}${a}`),(C||z)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${g}${a}`:a,z?h:void 0,n))}return r?(f.res=h,f.usedParams=this.getUsedParamsDetails(n),f):h}extendTranslation(e,s,i,n,r){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=K(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const u=e.match(this.interpolator.nestingRegexp);d=u&&u.length}let g=i.replace&&!K(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,i.lng||this.language||n.usedLng,i),c){const u=e.match(this.interpolator.nestingRegexp),m=u&&u.length;d<m&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...u)=>r?.[0]===u[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${u[0]} in key: ${s[0]}`),null):this.translate(...u,s),i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,a=K(l)?[l]:l;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=zs.handle(a,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,s={}){let i,n,r,l,a;return K(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(c,s),g=d.key;n=g;let u=d.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const m=s.count!==void 0&&!K(s.count),f=m&&!s.ordinal&&s.count===0,h=s.context!==void 0&&(K(s.context)||typeof s.context=="number")&&s.context!=="",p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);u.forEach(_=>{this.isValidLookup(i)||(a=_,!ms[`${p[0]}-${_}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(ms[`${p[0]}-${_}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(x=>{if(this.isValidLookup(i))return;l=x;const $=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys($,g,x,_,s);else{let S;m&&(S=this.pluralResolver.getSuffix(x,s.count,s));const R=`${this.options.pluralSeparator}zero`,X=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&($.push(g+S),s.ordinal&&S.indexOf(X)===0&&$.push(g+S.replace(X,this.options.pluralSeparator)),f&&$.push(g+R)),h){const M=`${g}${this.options.contextSeparator}${s.context}`;$.push(M),m&&($.push(M+S),s.ordinal&&S.indexOf(X)===0&&$.push(M+S.replace(X,this.options.pluralSeparator)),f&&$.push(M+R))}}let L;for(;L=$.pop();)this.isValidLookup(i)||(r=L,i=this.getResource(x,_,L,s))}))})}),{res:i,usedKey:n,exactUsedKey:r,usedLng:l,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,i,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,s,i,n):this.resourceStore.getResource(e,s,i,n)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!K(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const r of s)delete n[r]}return n}static hasDefaultValue(e){const s="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&s===i.substring(0,s.length)&&e[i]!==void 0)return!0;return!1}}class bs{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=We.create("languageUtils")}getScriptPartFromCode(e){if(e=$t(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=$t(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(K(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(i=>{if(s)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(s=n)}),!s&&this.options.supportedLngs&&e.forEach(i=>{if(s)return;const n=this.getScriptPartFromCode(i);if(this.isSupportedCode(n))return s=n;const r=this.getLanguagePartFromCode(i);if(this.isSupportedCode(r))return s=r;s=this.options.supportedLngs.find(l=>{if(l===r)return l;if(!(l.indexOf("-")<0&&r.indexOf("-")<0)&&(l.indexOf("-")>0&&r.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===r||l.indexOf(r)===0&&r.length>1))return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),K(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let i=e[s];return i||(i=e[this.getScriptPartFromCode(s)]),i||(i=e[this.formatLanguageCode(s)]),i||(i=e[this.getLanguagePartFromCode(s)]),i||(i=e.default),i||[]}toResolveHierarchy(e,s){const i=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),n=[],r=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return K(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):K(e)&&r(this.formatLanguageCode(e)),i.forEach(l=>{n.indexOf(l)<0&&r(this.formatLanguageCode(l))}),n}}const vs={zero:0,one:1,two:2,few:3,many:4,other:5},xs={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Pi{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=We.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const i=$t(e==="dev"?"en":e),n=s.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:i,type:n});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let l;try{l=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),xs;if(!e.match(/-|_/))return xs;const c=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(c,s)}return this.pluralRulesCache[r]=l,l}needsPlural(e,s={}){let i=this.getRule(e,s);return i||(i=this.getRule("dev",s)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,s,i={}){return this.getSuffixes(e,i).map(n=>`${s}${n}`)}getSuffixes(e,s={}){let i=this.getRule(e,s);return i||(i=this.getRule("dev",s)),i?i.resolvedOptions().pluralCategories.sort((n,r)=>vs[n]-vs[r]).map(n=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,s,i={}){const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,i))}}const ys=(t,e,s,i=".",n=!0)=>{let r=vi(t,e,s);return!r&&n&&K(s)&&(r=es(t,s,i),r===void 0&&(r=es(e,s,i))),r},Gt=t=>t.replace(/\$/g,"$$$$");class Li{constructor(e={}){this.logger=We.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(s=>s),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:i,useRawValueToEscape:n,prefix:r,prefixEscaped:l,suffix:a,suffixEscaped:c,formatSeparator:d,unescapeSuffix:g,unescapePrefix:u,nestingPrefix:m,nestingPrefixEscaped:f,nestingSuffix:h,nestingSuffixEscaped:p,nestingOptionsSeparator:_,maxReplaces:x,alwaysFormat:$}=e.interpolation;this.escape=s!==void 0?s:yi,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=r?ot(r):l||"{{",this.suffix=a?ot(a):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=g?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=m?ot(m):f||ot("$t("),this.nestingSuffix=h?ot(h):p||ot(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=x||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,i)=>s?.source===i?(s.lastIndex=0,s):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,i,n){let r,l,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=f=>{if(f.indexOf(this.formatSeparator)<0){const x=ys(s,c,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,i,{...n,...s,interpolationkey:f}):x}const h=f.split(this.formatSeparator),p=h.shift().trim(),_=h.join(this.formatSeparator).trim();return this.format(ys(s,c,p,this.options.keySeparator,this.options.ignoreJSONStructure),_,i,{...n,...s,interpolationkey:p})};this.resetRegExp();const g=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>Gt(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?Gt(this.escape(f)):Gt(f)}].forEach(f=>{for(a=0;r=f.regex.exec(e);){const h=r[1].trim();if(l=d(h),l===void 0)if(typeof g=="function"){const _=g(e,r,n);l=K(_)?_:""}else if(n&&Object.prototype.hasOwnProperty.call(n,h))l="";else if(u){l=r[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${e}`),l="";else!K(l)&&!this.useRawValueToEscape&&(l=us(l));const p=f.safeValue(l);if(e=e.replace(r[0],p),u?(f.regex.lastIndex+=l.length,f.regex.lastIndex-=r[0].length):f.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,s,i={}){let n,r,l;const a=(c,d)=>{const g=this.nestingOptionsSeparator;if(c.indexOf(g)<0)return c;const u=c.split(new RegExp(`${g}[ ]*{`));let m=`{${u[1]}`;c=u[0],m=this.interpolate(m,l);const f=m.match(/'/g),h=m.match(/"/g);((f?.length??0)%2===0&&!h||h.length%2!==0)&&(m=m.replace(/'/g,'"'));try{l=JSON.parse(m),d&&(l={...d,...l})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,p),`${c}${g}${m}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,c};for(;n=this.nestingRegexp.exec(e);){let c=[];l={...i},l=l.replace&&!K(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const d=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(d!==-1&&(c=n[1].slice(d).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),n[1]=n[1].slice(0,d)),r=s(a.call(this,n[1].trim(),l),l),r&&n[0]===e&&!K(r))return r;K(r)||(r=us(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),c.length&&(r=c.reduce((g,u)=>this.format(g,u,i.lng,{...i,interpolationkey:n[1].trim()}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const Oi=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?s.currency||(s.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?s.range||(s.range=n.trim()):n.split(";").forEach(l=>{if(l){const[a,...c]=l.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),g=a.trim();s[g]||(s[g]=d),d==="false"&&(s[g]=!1),d==="true"&&(s[g]=!0),isNaN(d)||(s[g]=parseInt(d,10))}})}return{formatName:e,formatOptions:s}},$s=t=>{const e={};return(s,i,n)=>{let r=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(r={...r,[n.interpolationkey]:void 0});const l=i+JSON.stringify(r);let a=e[l];return a||(a=t($t(i),n),e[l]=a),a(s)}},Ai=t=>(e,s,i)=>t($t(s),i)(e);class Ei{constructor(e={}){this.logger=We.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const i=s.cacheInBuiltFormats?$s:Ai;this.formats={number:i((n,r)=>{const l=new Intl.NumberFormat(n,{...r});return a=>l.format(a)}),currency:i((n,r)=>{const l=new Intl.NumberFormat(n,{...r,style:"currency"});return a=>l.format(a)}),datetime:i((n,r)=>{const l=new Intl.DateTimeFormat(n,{...r});return a=>l.format(a)}),relativetime:i((n,r)=>{const l=new Intl.RelativeTimeFormat(n,{...r});return a=>l.format(a,r.range||"day")}),list:i((n,r)=>{const l=new Intl.ListFormat(n,{...r});return a=>l.format(a)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=$s(s)}format(e,s,i,n={}){const r=s.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(a=>a.indexOf(")")>-1)){const a=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,a)].join(this.formatSeparator)}return r.reduce((a,c)=>{const{formatName:d,formatOptions:g}=Oi(c);if(this.formats[d]){let u=a;try{const m=n?.formatParams?.[n.interpolationkey]||{},f=m.locale||m.lng||n.locale||n.lng||i;u=this.formats[d](a,f,{...g,...n,...m})}catch(m){this.logger.warn(m)}return u}else this.logger.warn(`there was no format function for ${d}`);return a},e)}}const Fi=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Ri extends Ht{constructor(e,s,i,n={}){super(),this.backend=e,this.store=s,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=We.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,n.backend,n)}queueLoad(e,s,i,n){const r={},l={},a={},c={};return e.forEach(d=>{let g=!0;s.forEach(u=>{const m=`${d}|${u}`;!i.reload&&this.store.hasResourceBundle(d,u)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?l[m]===void 0&&(l[m]=!0):(this.state[m]=1,g=!1,l[m]===void 0&&(l[m]=!0),r[m]===void 0&&(r[m]=!0),c[u]===void 0&&(c[u]=!0)))}),g||(a[d]=!0)}),(Object.keys(r).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(r),pending:Object.keys(l),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,s,i){const n=e.split("|"),r=n[0],l=n[1];s&&this.emit("failedLoading",r,l,s),!s&&i&&this.store.addResourceBundle(r,l,i,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{bi(c.loaded,[r],l),Fi(c,e),s&&c.errors.push(s),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{a[d]||(a[d]={});const g=c.loaded[d];g.length&&g.forEach(u=>{a[d][u]===void 0&&(a[d][u]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,s,i,n=0,r=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:i,tried:n,wait:r,callback:l});return}this.readingCalls++;const a=(d,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(d&&g&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,i,n+1,r*2,l)},r);return}l(d,g)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const d=c(e,s);d&&typeof d.then=="function"?d.then(g=>a(null,g)).catch(a):a(null,d)}catch(d){a(d)}return}return c(e,s,a)}prepareLoading(e,s,i={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();K(e)&&(e=this.languageUtils.toResolveHierarchy(e)),K(s)&&(s=[s]);const r=this.queueLoad(e,s,i,n);if(!r.toLoad.length)return r.pending.length||n(),null;r.toLoad.forEach(l=>{this.loadOne(l)})}load(e,s,i){this.prepareLoading(e,s,{},i)}reload(e,s,i){this.prepareLoading(e,s,{reload:!0},i)}loadOne(e,s=""){const i=e.split("|"),n=i[0],r=i[1];this.read(n,r,"read",void 0,void 0,(l,a)=>{l&&this.logger.warn(`${s}loading namespace ${r} for language ${n} failed`,l),!l&&a&&this.logger.log(`${s}loaded namespace ${r} for language ${n}`,a),this.loaded(e,l,a)})}saveMissing(e,s,i,n,r,l={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${i}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...l,isUpdate:r},d=this.backend.create.bind(this.backend);if(d.length<6)try{let g;d.length===5?g=d(e,s,i,n,c):g=d(e,s,i,n),g&&typeof g.then=="function"?g.then(u=>a(null,u)).catch(a):a(null,g)}catch(g){a(g)}else d(e,s,i,n,a,c)}!e||!e[0]||this.store.addResource(e[0],s,i,n)}}}const Ss=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),K(t[1])&&(e.defaultValue=t[1]),K(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(i=>{e[i]=s[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ws=t=>(K(t.ns)&&(t.ns=[t.ns]),K(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),K(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Et=()=>{},Ni=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class St extends Ht{constructor(e={},s){if(super(),this.options=ws(e),this.services={},this.logger=We,this.modules={external:[]},Ni(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(K(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=Ss();this.options={...i,...this.options,...ws(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?We.init(n(this.modules.logger),this.options):We.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Ei;const g=new bs(this.options);this.store=new ps(this.options.resources,this.options);const u=this.services;u.logger=We,u.resourceStore=this.store,u.languageUtils=g,u.pluralResolver=new Pi(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(u.formatter=n(d),u.formatter.init&&u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Li(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new Ri(n(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(f,...h)=>{this.emit(f,...h)}),this.modules.languageDetector&&(u.languageDetector=n(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=n(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Ut(this.services,this.options),this.translator.on("*",(f,...h)=>{this.emit(f,...h)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Et),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...g)=>this.store[d](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...g)=>(this.store[d](...g),this)});const a=_t(),c=()=>{const d=(g,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(u),s(g,u)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,s=Et){let i=s;const n=K(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(n?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const r=[],l=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&r.indexOf(d)<0&&r.push(d)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),this.options.preload?.forEach?.(a=>l(a)),this.services.backendConnector.load(r,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,s,i){const n=_t();return typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),i||(i=Et),this.services.backendConnector.reload(e,s,r=>{n.resolve(),i(r)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&zs.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const i=this.languages[s];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const i=_t();this.emit("languageChanging",e);const n=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},r=(a,c)=>{c?this.isLanguageChangingTo===e&&(n(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...d)=>this.t(...d)),s&&s(a,(...d)=>this.t(...d))},l=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=K(a)?a:a&&a[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(K(a)?[a]:a);d&&(this.language||n(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,g=>{r(g,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),i}getFixedT(e,s,i){const n=(r,l,...a)=>{let c;typeof l!="object"?c=this.options.overloadTranslationOptionHandler([r,l].concat(a)):c={...l},c.lng=c.lng||n.lng,c.lngs=c.lngs||n.lngs,c.ns=c.ns||n.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||n.keyPrefix);const d=this.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(r)?g=r.map(u=>`${c.keyPrefix}${d}${u}`):g=c.keyPrefix?`${c.keyPrefix}${d}${r}`:r,this.t(g,c)};return K(e)?n.lng=e:n.lngs=e,n.ns=s,n.keyPrefix=i,n}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=s.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const l=(a,c)=>{const d=this.services.backendConnector.state[`${a}|${c}`];return d===-1||d===0||d===2};if(s.precheck){const a=s.precheck(this,l);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(i,e)&&(!n||l(r,e)))}loadNamespaces(e,s){const i=_t();return this.options.ns?(K(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),s&&s(n)}),i):(s&&s(),Promise.resolve())}loadLanguages(e,s){const i=_t();K(e)&&(e=[e]);const n=this.options.preload||[],r=e.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return r.length?(this.options.preload=n.concat(r),this.loadResources(l=>{i.resolve(),s&&s(l)}),i):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const n=new Intl.Locale(e);if(n&&n.getTextInfo){const r=n.getTextInfo();if(r&&r.direction)return r.direction}}catch{}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new bs(Ss());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new St(e,s)}cloneInstance(e={},s=Et){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},r=new St(n);if((e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(a=>{r[a]=this[a]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},i){const a=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((g,u)=>(g[u]={...c[d][u]},g),c[d]),c),{});r.store=new ps(a,n),r.services.resourceStore=r.store}return r.translator=new Ut(r.services,n),r.translator.on("*",(a,...c)=>{r.emit(a,...c)}),r.init(n,s),r.translator.options=n,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=St.createInstance();ye.createInstance=St.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;const{slice:Ti,forEach:Di}=[];function Ii(t){return Di.call(Ti.call(arguments,1),e=>{if(e)for(const s in e)t[s]===void 0&&(t[s]=e[s])}),t}function Mi(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(s=>s.test(t))}const ks=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ji=function(t,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(e);let r=`${t}=${n}`;if(i.maxAge>0){const l=i.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(l)}`}if(i.domain){if(!ks.test(i.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${i.domain}`}if(i.path){if(!ks.test(i.path))throw new TypeError("option path is invalid");r+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(r+="; Partitioned"),r},Cs={create(t,e,s,i){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};s&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+s*60*1e3)),i&&(n.domain=i),document.cookie=ji(t,e,n)},read(t){const e=`${t}=`,s=document.cookie.split(";");for(let i=0;i<s.length;i++){let n=s[i];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(e)===0)return n.substring(e.length,n.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Ui={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Cs.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:s,cookieMinutes:i,cookieDomain:n,cookieOptions:r}=e;s&&typeof document<"u"&&Cs.create(s,t,i,n,r)}},zi={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,s;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const r=i.substring(1).split("&");for(let l=0;l<r.length;l++){const a=r[l].indexOf("=");a>0&&r[l].substring(0,a)===e&&(s=r[l].substring(a+1))}}return s}},Vi={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:s}=t,i;if(typeof window<"u"){const{hash:n}=window.location;if(n&&n.length>2){const r=n.substring(1);if(e){const l=r.split("&");for(let a=0;a<l.length;a++){const c=l[a].indexOf("=");c>0&&l[a].substring(0,c)===e&&(i=l[a].substring(c+1))}}if(i)return i;if(!i&&s>-1){const l=n.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof s=="number"?s:0]?.replace("/",""):void 0}}}return i}};let ct=null;const Ps=()=>{if(ct!==null)return ct;try{if(ct=typeof window<"u"&&window.localStorage!==null,!ct)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{ct=!1}return ct};var Bi={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Ps())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:s}=e;s&&Ps()&&window.localStorage.setItem(s,t)}};let dt=null;const Ls=()=>{if(dt!==null)return dt;try{if(dt=typeof window<"u"&&window.sessionStorage!==null,!dt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{dt=!1}return dt};var Ki={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Ls())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:s}=e;s&&Ls()&&window.sessionStorage.setItem(s,t)}},Hi={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:s,userLanguage:i,language:n}=navigator;if(s)for(let r=0;r<s.length;r++)e.push(s[r]);i&&e.push(i),n&&e.push(n)}return e.length>0?e:void 0}},qi={name:"htmlTag",lookup(t){let{htmlTag:e}=t,s;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(s=i.getAttribute("lang")),s}},Wi={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const s=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof e=="number"?e:0]?.replace("/",""):void 0}},Gi={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const s=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[s]}};let Vs=!1;try{document.cookie,Vs=!0}catch{}const Bs=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Vs||Bs.splice(1,1);const Ji=()=>({order:Bs,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Ks{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,s)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Ii(s,this.options||{},Ji()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Ui),this.addDetector(zi),this.addDetector(Bi),this.addDetector(Ki),this.addDetector(Hi),this.addDetector(qi),this.addDetector(Wi),this.addDetector(Gi),this.addDetector(Vi)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,s=[];return e.forEach(i=>{if(this.detectors[i]){let n=this.detectors[i].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(s=s.concat(n))}}),s=s.filter(i=>i!=null&&!Mi(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}cacheUserLanguage(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;s&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||s.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}Ks.type="languageDetector";const Qi={page_title:"deepnest - Industrial nesting",parts:"Parts",nests:"Nests",sheets:"Sheets",settings:"Settings"},Xi={stop_nest:"Stop nest",export:"Export",export_svg:"SVG file",export_dxf:"DXF file",export_json:"JSON file",back:"Back",import:"Import",start_nest:"Start nest",deselect:"Deselect",select:"Select",all:"all",add:"Add",cancel:"Cancel",save_preset:"Save Preset",load:"Load",delete:"Delete",save:"Save",reset_defaults:"set all to default"},Zi={size:"Size",sheet:"Sheet",quantity:"Quantity",add_sheet:"Add Sheet",width:"width",height:"height",nesting_config:"Nesting configuration",display_units:"Display units",inches:"inches",mm:"mm",space_between_parts:"Space between parts",curve_tolerance:"Curve tolerance",part_rotations:"Part rotations",optimization_type:"Optimization type",gravity:"Gravity",bounding_box:"Bounding Box",squeeze:"Squeeze",use_rough_approximation:"Use rough approximation",cpu_cores:"CPU cores",import_export:"Import/Export",use_svg_normalizer:"Use SVG Normalizer?",svg_scale:"SVG scale",units_per:"units/",endpoint_tolerance:"Endpoint tolerance",dxf_import_units:"DXF import units",points:"Points",picas:"Picas",inches_cap:"Inches",cm:"cm",dxf_export_units:"DXF export units",export_with_sheet_boundaries:"Export with Sheet Boundborders?",export_with_sheets_space:"Export with Space between Sheets?",distance_between_sheets:"Distance between Sheets?",laser_options:"Laser options",merge_common_lines:"Merge common lines",optimization_ratio:"Optimization ratio",meta_heuristic_tuning:"Meta-heuristic fine tuning",ga_population:"GA population",ga_mutation_rate:"GA mutation rate",other_settings:"Other Settings",use_quantity_from_filename:"Use Quantity from filename",presets:"Presets",save_config_presets:"Save Configuration Presets",load_delete_presets:"Load/Delete Configuration Presets",select_preset_default:"-- Select a preset --",save_preset_title:"Save Preset",enter_preset_name:"Enter preset name"},Yi={nesting_in_progress:"Nesting in progress...",error_occurred:"Error occurred",processing:"Processing...",ready:"Ready",threads_active:"{{count}} threads active",parts_loaded:"{{count}} parts loaded",nests_available:"{{count}} nests available"},en={navigation:Qi,actions:Xi,labels:Zi,status:Yi},tn="Please enter a preset name",sn="Preset saved successfully!",nn="Error saving preset",rn="Please select a preset to load",an="Preset loaded successfully!",ln="Selected preset not found",on="Error loading preset",cn="Please select a preset to delete",dn='Are you sure you want to delete the preset "{{presetName}}"?',un="Preset deleted successfully!",gn="Error deleting preset",fn="Please import some parts first",hn="Please mark at least one part as the sheet",pn="No file selected",mn="An error occurred reading the file",_n="Error processing SVG",bn="could not contact file conversion server",vn="There was an Error while converting",xn={enter_preset_name:tn,preset_saved:sn,error_saving_preset:nn,select_preset_to_load:rn,preset_loaded:an,preset_not_found:ln,error_loading_preset:on,select_preset_to_delete:cn,confirm_delete_preset:dn,preset_deleted:un,error_deleting_preset:gn,import_parts_first:fn,mark_part_as_sheet:hn,no_file_selected:pn,file_read_error:mn,svg_processing_error:_n,conversion_server_error:bn,conversion_error:vn},yn="Parts",$n="Import Parts",Sn="Export Parts",wn="Export Selected",kn="Delete Selected",Cn="No parts selected",Pn="Failed to import parts",Ln="Failed to export parts",On="Total Parts",An="Total Quantity",En="Select All",Fn="Deselect All",Rn="No Parts Loaded",Nn="Import SVG or DXF files to get started",Tn="Search parts...",Dn="Sort by",In="Name",Mn="Quantity",jn="Size",Un="Rotation",zn="Dimensions",Vn="Area",Bn="Preview Error",Kn={parts_title:yn,import:"Import",export:"Export",delete:"Delete",import_parts:$n,export_parts:Sn,export_selected:wn,delete_selected:kn,no_parts_selected:Cn,import_failed:Pn,export_failed:Ln,total_parts:On,total_quantity:An,select_all:En,deselect_all:Fn,no_parts_loaded:Rn,import_parts_to_get_started:Nn,search_parts:Tn,sort_by:Dn,name:In,quantity:Mn,size:jn,rotation:Un,dimensions:zn,area:Vn,preview_error:Bn},Hn="Nesting",qn="Start Nesting",Wn="Stop Nesting",Gn="Clear Results",Jn="Cannot start nesting: need parts and sheets",Qn="Failed to start nesting",Xn="Failed to stop nesting",Zn="Parts to Nest",Yn="Available Sheets",er="Results Count",tr="No Nesting Results",sr="Start nesting to see results here",ir="Add parts and sheets first to enable nesting",nr="Nesting in Progress",rr="Est. time remaining",ar="Current Operation",lr="Threads Active",or="Worker Status",cr="Running",dr="Stopped",ur="Generation",gr="Best Fitness",fr="Refresh Status",hr="Nesting Results",pr="Sorted by efficiency",mr="Result",_r="Best",br="Efficiency",vr="Fitness",xr="Sheets Used",yr="Parts Placed",$r="View Details",Sr="Back to Results",wr="Result Details",kr="Export Result",Cr="Export failed",Pr="Click to view",Lr="Zoom Out",Or="Zoom In",Ar="Reset View",Er="Sheet",Fr="Statistics",Rr="Material Efficiency",Nr="Fitness Score",Tr="Material Waste",Dr="Total Parts Placed",Ir="Total Material Used",Mr="Generation Time",jr="Generation Number",Ur={nesting_title:Hn,start_nesting:qn,stop_nesting:Wn,clear_results:Gn,cannot_start_nesting:Jn,start_nesting_failed:Qn,stop_nesting_failed:Xn,parts_to_nest:Zn,available_sheets:Yn,results_count:er,no_nesting_results:tr,start_nesting_to_see_results:sr,add_parts_and_sheets_first:ir,nesting_in_progress:nr,estimated_time_remaining:rr,current_operation:ar,threads_active:lr,worker_status:or,running:cr,stopped:dr,current_generation:ur,best_fitness:gr,refresh_status:fr,nesting_results:hr,sorted_by_efficiency:pr,result:mr,best:_r,efficiency:br,fitness:vr,sheets_used:xr,parts_placed:yr,view_details:$r,export:"Export",delete:"Delete",back_to_results:Sr,result_details:wr,export_result:kr,export_failed:Cr,click_to_view:Pr,zoom_out:Lr,zoom_in:Or,reset_view:Ar,sheet:Er,statistics:Fr,material_efficiency:Rr,fitness_score:Nr,material_waste:Tr,total_parts_placed:Dr,total_material_used:Ir,generation_time:Mr,generation_number:jr},zr="Sheets",Vr="Add Sheet",Br="Edit Sheet",Kr="Add New Sheet",Hr="Total Sheets",qr="Total Area",Wr="No Sheets Loaded",Gr="Add sheets to define your material constraints",Jr="Quick Templates",Qr="Configured Sheets",Xr="Sheet",Zr="Dimensions",Yr="Quantity",ea="Material",ta="Margin",sa="Edit",ia="Basic Information",na="Sheet Name",ra="Enter sheet name (optional)",aa="Width",la="Height",oa="Thickness",ca="Properties",da="Area",ua="Preview",ga="Cancel",fa="Update Sheet",ha="Swap Width/Height",pa="Width must be greater than 0",ma="Height must be greater than 0",_a="Thickness must be greater than 0",ba="Quantity must be greater than 0",va="Margin cannot be negative",xa={sheets_title:zr,add_sheet:Vr,edit_sheet:Br,add_new_sheet:Kr,total_sheets:Hr,total_area:qr,no_sheets_loaded:Wr,add_sheets_to_get_started:Gr,quick_templates:Jr,configured_sheets:Qr,sheet:Xr,dimensions:Zr,quantity:Yr,material:ea,margin:ta,edit:sa,delete:"Delete",basic_information:ia,sheet_name:na,enter_sheet_name:ra,width:aa,height:la,thickness:oa,properties:ca,area:da,preview:ua,cancel:ga,update_sheet:fa,swap_dimensions:ha,width_must_be_positive:pa,height_must_be_positive:ma,thickness_must_be_positive:_a,quantity_must_be_positive:ba,margin_cannot_be_negative:va},ya="Settings",$a="Preset Management",Sa="Algorithm Settings",wa="UI Preferences",ka="Advanced Settings",Ca="Reset Defaults",Pa="Import Configuration",La="Export Configuration",Oa="Reset to Defaults",Aa="Are you sure you want to reset all settings to defaults?",Ea="Failed to reset settings",Fa="Failed to export configuration",Ra="Failed to import configuration",Na="Presets allow you to save and restore complete nesting configurations.",Ta="Create Preset",Da="Create New Preset",Ia="Preset Name",Ma="Preset name is required",ja="Enter preset name",Ua="Description (optional)",za="Enter a description for this preset",Va="Cancel",Ba="No Presets Available",Ka="Create a preset to save your current configuration",Ha="Export Preset",qa="Delete Preset",Wa="Load Preset",Ga="Active",Ja="Created",Qa="Updated",Xa="Are you sure you want to delete preset '{{name}}'?",Za="Failed to create preset",Ya="Failed to load preset",el="Failed to delete preset",tl="Failed to export preset",sl="Failed to import preset",il="Import Preset",nl="Nesting Parameters",rl="Space Between Parts",al="Minimum distance between parts in millimeters",ll="Curve Tolerance",ol="Tolerance for curve approximation. Lower values = more accurate but slower",cl="Part Rotations",dl="Number of rotation angles to try for each part",ul="No Rotation",gl="Free Rotation (any angle)",fl="Genetic Algorithm",hl="Population Size",pl="Number of solutions in each generation. Higher = better results but slower",ml="Mutation Rate",_l="Probability of random changes. Higher = more exploration but less stability",bl="Advanced Options",vl="Use Holes",xl="Consider holes in parts for nesting (experimental)",yl="Explore Concave",$l="Try placing parts in concave areas of other parts",Sl="Merge Common Lines",wl="Combine overlapping cut lines to reduce cutting time",kl="Use Rough Approximation",Cl="Use faster but less accurate calculations for initial placement",Pl="Appearance",Ll="Language",Ol="Select the interface language",Al="Theme",El="Choose between light, dark, or automatic theme",Fl="Auto (follows system)",Rl="Light",Nl="Dark",Tl="Dark Mode",Dl="Use dark colors for the interface",Il="Units and Formatting",Ml="Display Units",jl="Units for displaying measurements",Ul="Millimeters (mm)",zl="Inches (in)",Vl="Centimeters (cm)",Bl="Show Grid",Kl="Display grid lines in the viewport",Hl="Show Rulers",ql="Display measurement rulers",Wl="Layout Preferences",Gl="Parts Panel Width",Jl="Width of the parts panel in pixels",Ql="Reset",Xl="Show Tooltips",Zl="Display helpful tooltips on hover",Yl="Show Status Bar",eo="Display the status bar at the bottom",to="Performance",so="Worker Threads",io="Number of CPU threads to use (max: {{max}})",no="Enable GPU Acceleration",ro="Use graphics card for calculations (experimental)",ao="Enable Caching",lo="Cache calculations to improve performance",oo="Debugging",co="Debug Mode",uo="Enable additional debugging information",go="Verbose Logging",fo="Log detailed information to console",ho="Show Debug Info",po="Hide Debug Info",mo="System Information",_o="Platform",bo="CPU Cores",vo="Viewport",xo="Memory Used",yo="Memory Total",$o="Export Debug Info",So="Maintenance",wo="Clear Cache",ko="Clear all cached data and preferences",Co="Are you sure you want to clear all cached data?",Po="Cache cleared successfully",Lo="Failed to clear cache",Oo="Reset Layout",Ao="Reset panel sizes and positions to defaults",Eo="Auto-save Interval",Fo="minutes",Ro="How often to automatically save your work (0 = disabled)",No={settings_title:ya,preset_management:$a,algorithm_settings:Sa,ui_preferences:wa,advanced_settings:ka,import:"Import",export:"Export",reset_defaults:Ca,import_configuration:Pa,export_configuration:La,reset_to_defaults:Oa,confirm_reset_defaults:Aa,reset_failed:Ea,export_failed:Fa,import_failed:Ra,preset_description:Na,create_preset:Ta,create_new_preset:Da,preset_name:Ia,preset_name_required:Ma,enter_preset_name:ja,preset_description_optional:Ua,enter_preset_description:za,cancel:Va,no_presets_available:Ba,create_preset_to_get_started:Ka,export_preset:Ha,delete_preset:qa,load_preset:Wa,active:Ga,created:Ja,updated:Qa,confirm_delete_preset:Xa,preset_create_failed:Za,preset_load_failed:Ya,preset_delete_failed:el,preset_export_failed:tl,preset_import_failed:sl,import_preset:il,nesting_parameters:nl,space_between_parts:rl,spacing_description:al,curve_tolerance:ll,curve_tolerance_description:ol,part_rotations:cl,rotations_description:dl,no_rotation:ul,"2_rotations":"2 Rotations (0°, 180°)","4_rotations":"4 Rotations (0°, 90°, 180°, 270°)","8_rotations":"8 Rotations (45° steps)","12_rotations":"12 Rotations (30° steps)",free_rotation:gl,genetic_algorithm:fl,population_size:hl,population_size_description:pl,mutation_rate:ml,mutation_rate_description:_l,advanced_options:bl,use_holes:vl,use_holes_description:xl,explore_concave:yl,explore_concave_description:$l,merge_common_lines:Sl,merge_lines_description:wl,use_rough_approximation:kl,rough_approximation_description:Cl,appearance:Pl,language:Ll,language_description:Ol,theme:Al,theme_description:El,auto_theme:Fl,light_theme:Rl,dark_theme:Nl,dark_mode:Tl,dark_mode_description:Dl,units_and_formatting:Il,display_units:Ml,units_description:jl,millimeters:Ul,inches:zl,centimeters:Vl,show_grid:Bl,show_grid_description:Kl,show_rulers:Hl,show_rulers_description:ql,layout_preferences:Wl,parts_panel_width:Gl,panel_width_description:Jl,reset:Ql,show_tooltips:Xl,tooltips_description:Zl,show_status_bar:Yl,status_bar_description:eo,performance:to,worker_threads:so,worker_threads_description:io,enable_gpu_acceleration:no,gpu_acceleration_description:ro,enable_caching:ao,caching_description:lo,debugging:oo,debug_mode:co,debug_mode_description:uo,verbose_logging:go,verbose_logging_description:fo,show_debug_info:ho,hide_debug_info:po,system_information:mo,platform:_o,cpu_cores:bo,viewport:vo,memory_used:xo,memory_total:yo,export_debug_info:$o,maintenance:So,clear_cache:wo,clear_cache_description:ko,confirm_clear_cache:Co,cache_cleared_success:Po,cache_clear_failed:Lo,reset_layout:Oo,reset_layout_description:Ao,auto_save_interval:Eo,minutes:Fo,auto_save_description:Ro},To="File Operations",Do="Drag & Drop Files",Io="Import Files",Mo="Export Options",jo="Recent Files",Uo="Drop files here to import",zo="or click to browse",Vo="Supported formats: SVG, DXF, JSON",Bo="Select Files",Ko="Browse Files",Ho="Importing Files...",qo="{{count}} files imported successfully",Wo="Importing {{current}} of {{total}} files",Go="Failed to import files",Jo="File validation error",Qo="Invalid file format: {{format}}",Xo="File too large: {{size}}. Maximum size is {{max}}",Zo="Failed to read file: {{filename}}",Yo="Export Format",ec="Export Settings",tc="Export All",sc="Export Selected",ic="Export Current",nc="Files exported successfully",rc="Failed to export files",ac="SVG Vector",lc="DXF CAD",oc="PDF Document",cc="JSON Data",dc="Include Sheet Outline",uc="Include Part Labels",gc="Optimize Cut Paths",fc="Merge Common Lines",hc="Export Scale",pc="Export Units",mc="No Recent Files",_c="Clear Recent",bc="Open Recent File",vc="Pin File",xc="Unpin File",yc="Remove from Recent",$c="File not found: {{filename}}",Sc="Quickly access your recently used files",wc="Maximum {{count}} recent files",kc="Pinned",Cc="Size",Pc="Modified",Lc="Path",Oc="Copy Path",Ac="Open File Location",Ec="File Information",Fc="Processing...",Rc="Cancel Import",Nc="Retry Import",Tc="Skip File",Dc="Continue Import",Ic="Validation Warning",Mc="File contains errors but can be imported",jc="Import Anyway",Uc="Fix Errors",zc="Auto Fix",Vc="Manual Fix",Bc="Error Details",Kc="Line {{number}}",Hc="Invalid geometry detected",qc="Duplicate points found",Wc="Self-intersecting polygon",Gc="Unclosed path detected",Jc="File is empty",Qc="File appears to be corrupted",Xc="Unsupported file version",Zc="Missing required data",Yc={file_operations:To,drag_drop_files:Do,import_files:Io,export_options:Mo,recent_files:jo,drop_files_here:Uo,or_click_to_browse:zo,supported_formats:Vo,select_files:Bo,browse_files:Ko,importing_files:Ho,files_imported:qo,import_progress:Wo,import_failed:Go,file_validation_error:Jo,invalid_file_format:Qo,file_too_large:Xo,file_read_error:Zo,export_format:Yo,export_settings:ec,export_all:tc,export_selected:sc,export_current:ic,export_success:nc,export_failed:rc,svg_format:ac,dxf_format:lc,pdf_format:oc,json_format:cc,include_sheet:dc,include_labels:uc,optimize_paths:gc,merge_lines:fc,export_scale:hc,export_units:pc,no_recent_files:mc,clear_recent:_c,open_recent:bc,pin_file:vc,unpin_file:xc,remove_from_recent:yc,file_not_found:$c,recent_files_description:Sc,max_recent_files:wc,pinned:kc,file_size:Cc,last_modified:Pc,file_path:Lc,copy_path:Oc,open_location:Ac,file_info:Ec,processing:Fc,cancel_import:Rc,retry_import:Nc,skip_file:Tc,continue_import:Dc,validation_warning:Ic,file_contains_errors:Mc,import_anyway:jc,fix_errors:Uc,auto_fix:zc,manual_fix:Vc,error_details:Bc,line_number:Kc,invalid_geometry:Hc,duplicate_points:qc,self_intersecting:Wc,unclosed_path:Gc,empty_file:Jc,corrupted_file:Qc,unsupported_version:Xc,missing_required_data:Zc},ed={fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"deepnest-language"},interpolation:{escapeValue:!1},resources:{en:{common:en,messages:xn,parts:Kn,nesting:Ur,sheets:xa,settings:No,files:Yc}}},td={t:t=>t,changeLanguage:async t=>{},language:()=>"en",ready:()=>!1},Hs=si(td),Fe=(t="common")=>{const e=ii(Hs);return e?[(i,n)=>{if(!e.ready())return i;const r=`${t}.${i}`;return e.t(r,n)},{changeLanguage:e.changeLanguage,language:e.language}]:[i=>i,{changeLanguage:async i=>{},language:()=>"en"}]},sd=t=>{const[e,s]=Q("en"),[i,n]=Q(!1);rs(async()=>{try{await ye.use(Ks).init(ed),s(ye.language||"en"),n(!0)}catch(c){console.error("Failed to initialize i18n:",c),n(!0)}});const a={t:(c,d)=>i()&&ye.t(c,d)||c,changeLanguage:async c=>{try{await ye.changeLanguage(c),s(c)}catch(d){console.error("Failed to change language:",d)}},language:e,ready:i};return Hs.Provider({value:a,children:t.children})},ts=Symbol("store-raw"),gt=Symbol("store-node"),Qe=Symbol("store-has"),qs=Symbol("store-self");function Ws(t){let e=t[nt];if(!e&&(Object.defineProperty(t,nt,{value:e=new Proxy(t,rd)}),!Array.isArray(t))){const s=Object.keys(t),i=Object.getOwnPropertyDescriptors(t);for(let n=0,r=s.length;n<r;n++){const l=s[n];i[l].get&&Object.defineProperty(t,l,{enumerable:i[l].enumerable,get:i[l].get.bind(e)})}}return e}function zt(t){let e;return t!=null&&typeof t=="object"&&(t[nt]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function wt(t,e=new Set){let s,i,n,r;if(s=t!=null&&t[ts])return s;if(!zt(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let l=0,a=t.length;l<a;l++)n=t[l],(i=wt(n,e))!==n&&(t[l]=i)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const l=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let c=0,d=l.length;c<d;c++)r=l[c],!a[r].get&&(n=t[r],(i=wt(n,e))!==n&&(t[r]=i))}return t}function Vt(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function kt(t,e,s){if(t[e])return t[e];const[i,n]=Q(s,{equals:!1,internal:!0});return i.$=n,t[e]=i}function id(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===nt||e===gt||(delete s.value,delete s.writable,s.get=()=>t[nt][e]),s}function Gs(t){Xt()&&kt(Vt(t,gt),qs)()}function nd(t){return Gs(t),Reflect.ownKeys(t)}const rd={get(t,e,s){if(e===ts)return t;if(e===nt)return s;if(e===Qt)return Gs(t),s;const i=Vt(t,gt),n=i[e];let r=n?n():t[e];if(e===gt||e===Qe||e==="__proto__")return r;if(!n){const l=Object.getOwnPropertyDescriptor(t,e);Xt()&&(typeof r!="function"||t.hasOwnProperty(e))&&!(l&&l.get)&&(r=kt(i,e,r)())}return zt(r)?Ws(r):r},has(t,e){return e===ts||e===nt||e===Qt||e===gt||e===Qe||e==="__proto__"?!0:(Xt()&&kt(Vt(t,Qe),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:nd,getOwnPropertyDescriptor:id};function Bt(t,e,s,i=!1){if(!i&&t[e]===s)return;const n=t[e],r=t.length;s===void 0?(delete t[e],t[Qe]&&t[Qe][e]&&n!==void 0&&t[Qe][e].$()):(t[e]=s,t[Qe]&&t[Qe][e]&&n===void 0&&t[Qe][e].$());let l=Vt(t,gt),a;if((a=kt(l,e,n))&&a.$(()=>s),Array.isArray(t)&&t.length!==r){for(let c=t.length;c<r;c++)(a=l[c])&&a.$();(a=kt(l,"length",r))&&a.$(t.length)}(a=l[qs])&&a.$()}function Js(t,e){const s=Object.keys(e);for(let i=0;i<s.length;i+=1){const n=s[i];Bt(t,n,e[n])}}function ad(t,e){if(typeof e=="function"&&(e=e(t)),e=wt(e),Array.isArray(e)){if(t===e)return;let s=0,i=e.length;for(;s<i;s++){const n=e[s];t[s]!==n&&Bt(t,s,n)}Bt(t,"length",i)}else Js(t,e)}function vt(t,e,s=[]){let i,n=t;if(e.length>1){i=e.shift();const l=typeof i,a=Array.isArray(t);if(Array.isArray(i)){for(let c=0;c<i.length;c++)vt(t,[i[c]].concat(e),s);return}else if(a&&l==="function"){for(let c=0;c<t.length;c++)i(t[c],c)&&vt(t,[c].concat(e),s);return}else if(a&&l==="object"){const{from:c=0,to:d=t.length-1,by:g=1}=i;for(let u=c;u<=d;u+=g)vt(t,[u].concat(e),s);return}else if(e.length>1){vt(t[i],e,[i].concat(s));return}n=t[i],s=[i].concat(s)}let r=e[0];typeof r=="function"&&(r=r(n,s),r===n)||i===void 0&&r==null||(r=wt(r),i===void 0||zt(n)&&zt(r)&&!Array.isArray(r)?Js(n,r):Bt(t,i,r))}function ld(...[t,e]){const s=wt(t||{}),i=Array.isArray(s),n=Ws(s);function r(...l){ti(()=>{i&&l.length===1?ad(s,l[0]):vt(s,l)})}return[n,r]}const od=[{id:"part-1",name:"Rectangle Part",filename:"rectangle.svg",path:[[0,0],[100,0],[100,50],[0,50]],area:5e3,bounds:{x:0,y:0,width:100,height:50},quantity:5,placed:3,rotation:0,material:"wood",thickness:3,isSelected:!1},{id:"part-2",name:"Circle Part",filename:"circle.svg",path:gd(25,50,50),area:1963.5,bounds:{x:25,y:25,width:50,height:50},quantity:3,placed:2,rotation:0,material:"acrylic",thickness:5,isSelected:!1},{id:"part-3",name:"Triangle Part",filename:"triangle.svg",path:[[0,60],[30,0],[60,60]],area:1800,bounds:{x:0,y:0,width:60,height:60},quantity:8,placed:5,rotation:0,material:"plywood",thickness:6,isSelected:!0}],cd=[{id:"sheet-1",name:"Standard Sheet",width:600,height:400,thickness:3,material:"wood",margin:5,isSelected:!0,bounds:{x:0,y:0,width:600,height:400},utilization:0},{id:"sheet-2",name:"Large Acrylic Sheet",width:800,height:600,thickness:5,material:"acrylic",margin:3,isSelected:!1,bounds:{x:0,y:0,width:800,height:600},utilization:0}],dd=[{id:"nest-1",sheetId:"sheet-1",placements:[{id:"placement-1",partId:"part-1",x:10,y:10,rotation:0,bounds:{x:10,y:10,width:100,height:50}},{id:"placement-2",partId:"part-2",x:120,y:10,rotation:0,bounds:{x:120,y:10,width:50,height:50}},{id:"placement-3",partId:"part-3",x:10,y:70,rotation:0,bounds:{x:10,y:70,width:60,height:60}}],fitness:.75,utilization:.68,area:12e3,createdAt:new Date().toISOString(),isOptimal:!1},{id:"nest-2",sheetId:"sheet-1",placements:[{id:"placement-4",partId:"part-1",x:5,y:5,rotation:90,bounds:{x:5,y:5,width:50,height:100}},{id:"placement-5",partId:"part-2",x:65,y:5,rotation:0,bounds:{x:65,y:5,width:50,height:50}}],fitness:.82,utilization:.72,area:8500,createdAt:new Date(Date.now()-6e4).toISOString(),isOptimal:!0}],ud={"preset-1":{id:"preset-1",name:"Default Laser Settings",description:"Standard settings for laser cutting wood",config:{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:15,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!0,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!0,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString()},"preset-2":{id:"preset-2",name:"High Precision CNC",description:"Tight tolerances for CNC machining",config:{units:"inches",scale:72,spacing:.1,rotations:8,populationSize:50,mutationRate:5,threads:8,placementType:"bottom-left",mergeLines:!1,timeRatio:.8,simplify:!0,tolerance:.001,endpointTolerance:5e-4,svgScale:72,dxfImportUnits:"inches",dxfExportUnits:"inches",exportSheetBounds:!0,exportSheetSpacing:!0,sheetSpacing:.25,useQuantityFromFilename:!1,useSvgPreProcessor:!0,conversionServer:"https://converter.deepnest.app/convert"},createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-72e5).toISOString()}};function gd(t,e,s){const i=[];for(let r=0;r<=32;r++){const l=r/32*2*Math.PI,a=e+t*Math.cos(l),c=s+t*Math.sin(l);i.push([a,c])}return i}const fd=()=>({ui:{activeTab:"parts",darkMode:!1,language:"en",theme:"auto",showTooltips:!0,showStatusBar:!0,modals:{presetModal:!1,helpModal:!1},panels:{partsWidth:300,resultsHeight:200}},config:{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},app:{parts:od,sheets:cd,nests:dd,presets:ud,importedFiles:[]},process:{isNesting:!1,progress:0,currentNest:null,workerStatus:{isRunning:!1,currentOperation:"",threadsActive:0},lastError:null}}),ut=()=>typeof window<"u"&&!window.electronAPI,ss={units:"inches",scale:72,spacing:0,rotations:4,populationSize:10,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.72,endpointTolerance:.36,svgScale:72,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},is={activeTab:"parts",darkMode:!1,language:"en",modals:{presetModal:!1,helpModal:!1},panels:{partsWidth:300,resultsHeight:200}},Qs={parts:[],sheets:[],nests:[],presets:{},importedFiles:[]},Xs={isNesting:!1,progress:0,currentNest:null,workerStatus:{isRunning:!1,currentOperation:"",threadsActive:0},lastError:null},hd=()=>{try{if(typeof localStorage<"u"){const t=localStorage.getItem("deepnest-ui-state");if(t){const e=JSON.parse(t);return{...is,...e}}}}catch(t){console.warn("Failed to load UI state from localStorage:",t)}return is},pd=ut()?fd():{ui:hd(),config:ss,app:Qs,process:Xs},[b,ce]=ld(pd);ut()&&console.info("🔧 Development mode: Global store initialized with mock data");const P={setActiveTab:t=>{ce("ui","activeTab",t)},setDarkMode:t=>{if(ce("ui","darkMode",t),typeof document<"u"&&document.body.classList.toggle("dark-mode",t),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(e){console.warn("Failed to save UI state to localStorage:",e)}},setLanguage:t=>{if(ce("ui","language",t),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(e){console.warn("Failed to save UI state to localStorage:",e)}},setPanelWidth:(t,e)=>{if(ce("ui","panels",t,e),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(s){console.warn("Failed to save UI state to localStorage:",s)}},openModal:t=>{ce("ui","modals",t,!0)},closeModal:t=>{ce("ui","modals",t,!1)},updateConfig:t=>{ce("config",t)},resetConfig:()=>{ce("config",ss)},setParts:t=>{ce("app","parts",t)},addPart:t=>{ce("app","parts",e=>[...e,t])},removePart:t=>{ce("app","parts",e=>e.filter(s=>s.id!==t))},updatePart:(t,e)=>{ce("app","parts",s=>s.id===t,e)},setNests:t=>{ce("app","nests",t)},addNest:t=>{ce("app","nests",e=>[...e,t])},setPresets:t=>{ce("app","presets",t)},addPreset:t=>{ce("app","presets",t.id,t)},removePreset:t=>{ce("app","presets",e=>{const s={...e};return delete s[t],s})},updatePreset:(t,e)=>{ce("app","presets",t,s=>({...s,...e}))},setNestingStatus:t=>{ce("process","isNesting",t)},setNestingProgress:t=>{ce("process","progress",t)},setWorkerStatus:t=>{ce("process","workerStatus",t)},setError:t=>{ce("process","lastError",t)},setMessage:t=>{t&&console.info("App Message:",t)},setShowTooltips:t=>{ce("ui","showTooltips",t)},setShowStatusBar:t=>{ce("ui","showStatusBar",t)},setTheme:t=>{ce("ui","theme",t)},resetToDefaults:()=>{ce("config",ss),ce("ui",is)},reset:()=>{ce("app",Qs),ce("process",Xs)}};class md{eventListeners=new Map;get isAvailable(){return ut()||typeof window<"u"&&!!window.electronAPI}async invoke(e,...s){if(!this.isAvailable)throw new Error("IPC not available");if(ut())return this.handleMockInvoke(e,...s);try{return await window.electronAPI.ipcRenderer.invoke(e,...s)}catch(i){throw console.error(`IPC invoke error on channel ${String(e)}:`,i),i}}async handleMockInvoke(e,...s){switch(await new Promise(i=>setTimeout(i,100)),console.info(`🔧 Mock IPC call: ${e}`,s),e){case"read-config":return{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"};case"write-config":case"save-preset":case"delete-preset":case"start-nesting":case"stop-nesting":return;case"load-presets":return{default:JSON.stringify({units:"mm",spacing:2,rotations:4}),precision:JSON.stringify({units:"inches",spacing:.1,rotations:8})};case"open-file-dialog":return{canceled:!1,filePaths:["/mock/path/example.svg"]};case"save-file-dialog":return{canceled:!1,filePath:"/mock/path/output.svg"};case"import-parts":return[{id:"mock-part-1",name:"Mock Part",bounds:{x:0,y:0,width:100,height:50},quantity:1,rotation:0}];default:console.warn(`🔧 Unhandled mock IPC channel: ${e}`);return}}on(e,s){if(!this.isAvailable)return console.warn("IPC not available, listener not registered"),()=>{};const i=String(e);return this.eventListeners.has(i)||this.eventListeners.set(i,new Set),this.eventListeners.get(i).add(s),ut()?(console.info(`🔧 Mock IPC listener registered for: ${i}`),()=>{const n=this.eventListeners.get(i);n&&(n.delete(s),n.size===0&&this.eventListeners.delete(i))}):(window.electronAPI.ipcRenderer.on(e,s),()=>{const n=this.eventListeners.get(i);n&&(n.delete(s),n.size===0&&(this.eventListeners.delete(i),window.electronAPI?.ipcRenderer&&window.electronAPI.ipcRenderer.removeAllListeners(e)))})}send(e,...s){if(!this.isAvailable){console.warn("IPC not available, message not sent");return}if(ut()){console.info(`🔧 Mock IPC send: ${e}`,s);return}window.electronAPI.ipcRenderer.send(e,...s)}async readConfig(){return this.invoke("read-config")}async writeConfig(e){return this.invoke("write-config",JSON.stringify(e))}async savePreset(e,s){return this.invoke("save-preset",e,JSON.stringify(s))}async loadPresets(){return this.invoke("load-presets")}async deletePreset(e){return this.invoke("delete-preset",e)}async startNesting(e){return this.invoke("start-nesting",e)}async stopNesting(){return this.invoke("stop-nesting")}stopBackgroundWorker(){this.send("background-stop")}onNestProgress(e){return this.on("nest-progress",e)}onNestComplete(e){return this.on("nest-complete",e)}onBackgroundProgress(e){return this.on("background-progress",e)}onWorkerStatus(e){return this.on("worker-status",e)}onNestError(e){return this.on("nest-error",e)}cleanup(){if(this.isAvailable){for(const e of this.eventListeners.keys())window.electronAPI.ipcRenderer.removeAllListeners(e);this.eventListeners.clear()}}}const ee=new md;var _d=F('<header class="h-15 bg-deepnest-bg-secondary dark:bg-deepnest-dark-bg-secondary border-b border-deepnest-border dark:border-deepnest-dark-border flex items-center justify-between px-5"><div class="flex items-center"><h1 class="text-xl font-normal text-deepnest-text-secondary dark:text-deepnest-dark-text-secondary"></h1></div><div class="flex items-center gap-4"><div class=language-selector><select class=input-select><option value=en>English</option><option value=de>Deutsch</option><option value=fr>Français</option><option value=es>Español</option></select></div><button class="btn-secondary btn-small"title="Toggle dark mode">');const bd=()=>{const[t,{changeLanguage:e}]=Fe("navigation"),s=()=>{P.setDarkMode(!b.ui.darkMode)},i=async n=>{P.setLanguage(n),await e(n)};return(()=>{var n=_d(),r=n.firstChild,l=r.firstChild,a=r.nextSibling,c=a.firstChild,d=c.firstChild,g=c.nextSibling;return o(l,()=>t("page_title")),d.addEventListener("change",u=>i(u.currentTarget.value)),g.$$click=s,o(g,()=>b.ui.darkMode?"☀️":"🌙"),A(()=>d.value=b.ui.language),n})()};Ee(["click"]);var vd=F('<nav class="nav-base w-nav flex flex-col"><div class="flex flex-col">'),xd=F('<button><span class="text-lg mr-3"></span><span class="text-sm font-medium">');const yd=()=>{const[t]=Fe("navigation"),e=[{id:"parts",labelKey:"parts",icon:"📦"},{id:"nests",labelKey:"nests",icon:"🔧"},{id:"sheets",labelKey:"sheets",icon:"📄"},{id:"settings",labelKey:"settings",icon:"⚙️"}],s=i=>{P.setActiveTab(i)};return(()=>{var i=vd(),n=i.firstChild;return o(n,k(Te,{each:e,children:r=>(()=>{var l=xd(),a=l.firstChild,c=a.nextSibling;return l.$$click=()=>s(r.id),o(a,()=>r.icon),o(c,()=>t(r.labelKey)),A(d=>{var g=`nav-item flex items-center p-4 text-left transition-colors duration-200 ${b.ui.activeTab===r.id?"nav-item-active":""}`,u=t(r.labelKey);return g!==d.e&&He(l,d.e=g),u!==d.t&&Y(l,"title",d.t=u),d},{e:void 0,t:void 0}),l})()})),i})()};Ee(["click"]);var $d=F('<div class=parts-list><div class=parts-controls><div class=search-box><input type=text class=search-input></div><div class=sort-controls><label>:</label><select class=sort-select><option value=name></option><option value=quantity></option><option value=size></option></select></div></div><div class=parts-table><div class=table-header><div class="table-cell checkbox-cell"><input type=checkbox></div><div class="table-cell name-cell sortable"> </div><div class="table-cell quantity-cell sortable"> </div><div class="table-cell size-cell sortable"> </div><div class="table-cell rotation-cell"></div></div><div class=table-body>'),Sd=F('<div><div class="table-cell checkbox-cell"><input type=checkbox></div><div class="table-cell name-cell"><div class=part-name></div></div><div class="table-cell quantity-cell"><input type=number min=1 class=quantity-input></div><div class="table-cell size-cell"><span class=size-text></span></div><div class="table-cell rotation-cell"><input type=number min=0 max=360 step=90 class=rotation-input><span class=rotation-unit>°');const wd=()=>{const[t]=Fe("parts"),[e,s]=Q(""),[i,n]=Q("name"),[r,l]=Q("asc"),a=de(()=>{let f=b.app.parts;if(e()){const h=e().toLowerCase();f=f.filter(p=>p.name.toLowerCase().includes(h)||p.source.toLowerCase().includes(h))}return f=f.sort((h,p)=>{let _,x;switch(i()){case"name":_=h.name,x=p.name;break;case"quantity":_=h.quantity,x=p.quantity;break;case"size":_=h.bounds.width*h.bounds.height,x=p.bounds.width*p.bounds.height;break;default:_=h.name,x=p.name}return typeof _=="string"&&typeof x=="string"?r()==="asc"?_.localeCompare(x):x.localeCompare(_):r()==="asc"?_-x:x-_}),f}),c=f=>{P.updatePart(f.id,{selected:!f.selected})},d=(f,h)=>{h<1&&(h=1),P.updatePart(f,{quantity:h})},g=(f,h)=>{P.updatePart(f,{rotation:h})},u=f=>{i()===f?l(r()==="asc"?"desc":"asc"):(n(f),l("asc"))},m=f=>`${f.width.toFixed(1)} × ${f.height.toFixed(1)}`;return(()=>{var f=$d(),h=f.firstChild,p=h.firstChild,_=p.firstChild,x=p.nextSibling,$=x.firstChild,L=$.firstChild,S=$.nextSibling,R=S.firstChild,X=R.nextSibling,M=X.nextSibling,D=h.nextSibling,v=D.firstChild,y=v.firstChild,H=y.firstChild,j=y.nextSibling,z=j.firstChild,C=j.nextSibling,B=C.firstChild,T=C.nextSibling,U=T.firstChild,G=T.nextSibling,J=v.nextSibling;return _.$$input=O=>s(O.currentTarget.value),o($,()=>t("sort_by"),L),S.addEventListener("change",O=>n(O.currentTarget.value)),o(R,()=>t("name")),o(X,()=>t("quantity")),o(M,()=>t("size")),H.addEventListener("change",O=>{const N=O.currentTarget.checked;b.app.parts.forEach(V=>{P.updatePart(V.id,{selected:N})})}),j.$$click=()=>u("name"),o(j,()=>t("name"),z),o(j,(()=>{var O=qe(()=>i()==="name");return()=>O()&&(r()==="asc"?"▲":"▼")})(),null),C.$$click=()=>u("quantity"),o(C,()=>t("quantity"),B),o(C,(()=>{var O=qe(()=>i()==="quantity");return()=>O()&&(r()==="asc"?"▲":"▼")})(),null),T.$$click=()=>u("size"),o(T,()=>t("size"),U),o(T,(()=>{var O=qe(()=>i()==="size");return()=>O()&&(r()==="asc"?"▲":"▼")})(),null),o(G,()=>t("rotation")),o(J,k(Te,{get each(){return a()},children:O=>(()=>{var N=Sd(),V=N.firstChild,I=V.firstChild,W=V.nextSibling,se=W.firstChild,oe=W.nextSibling,ne=oe.firstChild,ue=oe.nextSibling,$e=ue.firstChild,xe=ue.nextSibling,be=xe.firstChild;return I.addEventListener("change",()=>c(O)),o(se,()=>O.name),ne.addEventListener("change",ge=>d(O.id,parseInt(ge.currentTarget.value))),o($e,()=>m(O.bounds)),be.addEventListener("change",ge=>g(O.id,parseInt(ge.currentTarget.value))),A(ge=>{var Se=`table-row ${O.selected?"selected":""}`,pe=O.source;return Se!==ge.e&&He(N,ge.e=Se),pe!==ge.t&&Y(se,"title",ge.t=pe),ge},{e:void 0,t:void 0}),A(()=>I.checked=O.selected),A(()=>ne.value=O.quantity),A(()=>be.value=O.rotation),N})()})),A(O=>{var N=t("search_parts"),V=b.app.parts.some(I=>I.selected)&&!b.app.parts.every(I=>I.selected);return N!==O.e&&Y(_,"placeholder",O.e=N),V!==O.t&&(H.indeterminate=O.t=V),O},{e:void 0,t:void 0}),A(()=>_.value=e()),A(()=>S.value=i()),A(()=>H.checked=b.app.parts.every(O=>O.selected)),f})()};Ee(["input","click"]);var kd=F('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class=btn-secondary>📁 </button><button class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed">📤 </button><button class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed">🗑️ </button></div></div><div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-6"><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div></div><div class="flex items-center gap-2 text-sm"><button class="text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed"></button><span class="text-gray-600 dark:text-gray-400">|</span><button class="text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed"></button></div></div><div class="flex-1 overflow-hidden">'),Cd=F('<div class="h-full flex flex-col items-center justify-center text-center gap-4 p-8"><div class="text-6xl opacity-30">📦</div><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400"></p><button class=btn-primary>');const Pd=()=>{const[t]=Fe("parts"),e=de(()=>b.app.parts.length),s=de(()=>b.app.parts.reduce((c,d)=>c+d.quantity,0)),i=async()=>{if(!ee.isAvailable){console.warn("IPC not available");return}try{const c=await ee.openFileDialog({title:t("import_parts"),filters:[{name:"Vector Files",extensions:["svg","dxf"]},{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(c.canceled||!c.filePaths?.length)return;const d=await ee.importParts(c.filePaths);P.setParts([...b.app.parts,...d])}catch(c){console.error("Failed to import parts:",c),P.setError(t("import_failed"))}},n=async()=>{const c=b.app.parts.filter(d=>d.selected);if(c.length===0){P.setError(t("no_parts_selected"));return}try{const d=await ee.saveFileDialog({title:t("export_parts"),defaultPath:"parts.svg",filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(d.canceled||!d.filePath)return;await ee.exportParts(c,d.filePath)}catch(d){console.error("Failed to export parts:",d),P.setError(t("export_failed"))}},r=()=>{if(b.app.parts.filter(g=>g.selected).length===0){P.setError(t("no_parts_selected"));return}const d=b.app.parts.filter(g=>!g.selected);P.setParts(d)},l=()=>{b.app.parts.forEach(c=>{P.updatePart(c.id,{selected:!0})})},a=()=>{b.app.parts.forEach(c=>{P.updatePart(c.id,{selected:!1})})};return(()=>{var c=kd(),d=c.firstChild,g=d.firstChild,u=g.nextSibling,m=u.firstChild;m.firstChild;var f=m.nextSibling;f.firstChild;var h=f.nextSibling;h.firstChild;var p=d.nextSibling,_=p.firstChild,x=_.firstChild,$=x.firstChild,L=$.firstChild,S=$.nextSibling,R=x.nextSibling,X=R.firstChild,M=X.firstChild,D=X.nextSibling,v=_.nextSibling,y=v.firstChild,H=y.nextSibling,j=H.nextSibling,z=p.nextSibling;return o(g,()=>t("parts_title")),m.$$click=i,o(m,()=>t("import"),null),f.$$click=n,o(f,()=>t("export"),null),h.$$click=r,o(h,()=>t("delete"),null),o($,()=>t("total_parts"),L),o(S,e),o(X,()=>t("total_quantity"),M),o(D,s),y.$$click=l,o(y,()=>t("select_all")),j.$$click=a,o(j,()=>t("deselect_all")),o(z,k(te,{get when(){return e()>0},get fallback(){return(()=>{var C=Cd(),B=C.firstChild,T=B.nextSibling,U=T.nextSibling,G=U.nextSibling;return o(T,()=>t("no_parts_loaded")),o(U,()=>t("import_parts_to_get_started")),G.$$click=i,o(G,()=>t("import_parts")),C})()},get children(){return k(wd,{})}})),A(C=>{var B=t("import_parts"),T=t("export_selected"),U=b.app.parts.filter(V=>V.selected).length===0,G=t("delete_selected"),J=b.app.parts.filter(V=>V.selected).length===0,O=e()===0,N=e()===0;return B!==C.e&&Y(m,"title",C.e=B),T!==C.t&&Y(f,"title",C.t=T),U!==C.a&&(f.disabled=C.a=U),G!==C.o&&Y(h,"title",C.o=G),J!==C.i&&(h.disabled=C.i=J),O!==C.n&&(y.disabled=C.n=O),N!==C.s&&(j.disabled=C.s=N),C},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),c})()};Ee(["click"]);var Ld=F('<div class="text-sm text-gray-600 dark:text-gray-400 text-center">: '),Od=F('<div class="bg-gray-50 dark:bg-gray-700 p-3 rounded"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><span class="ml-2 text-sm text-gray-900 dark:text-gray-100">'),Ad=F('<div class="grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-600"><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100">'),Ed=F('<div class="p-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 m-4"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><div class="text-2xl font-bold text-blue-600 dark:text-blue-400">%</div></div><div class=mb-6><div class="progress-bar mb-2"><div class="progress-fill progress-fill-primary"></div></div></div><div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span></span></div></div></div><div class="flex justify-center pt-4 border-t border-gray-200 dark:border-gray-600"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm">');const Fd=()=>{const[t]=Fe("nesting"),e=de(()=>Math.max(0,Math.min(100,b.process.progress))),s=de(()=>{const i=e();if(i===0)return null;const r=6e4*(100-i)/i;return r<6e4?`${Math.round(r/1e3)}s`:`${Math.round(r/6e4)}m`});return(()=>{var i=Ed(),n=i.firstChild,r=n.firstChild,l=r.nextSibling,a=l.firstChild,c=n.nextSibling,d=c.firstChild,g=d.firstChild,u=c.nextSibling,m=u.firstChild,f=m.firstChild,h=f.firstChild,p=h.firstChild,_=h.nextSibling,x=f.nextSibling,$=x.firstChild,L=$.firstChild,S=$.nextSibling,R=u.nextSibling,X=R.firstChild;return o(r,()=>t("nesting_in_progress")),o(l,()=>e().toFixed(1),a),o(c,k(te,{get when(){return s()},get children(){var M=Ld(),D=M.firstChild;return o(M,()=>t("estimated_time_remaining"),D),o(M,s,null),M}}),null),o(u,k(te,{get when(){return b.process.workerStatus.currentOperation},get children(){var M=Od(),D=M.firstChild,v=D.firstChild,y=D.nextSibling;return o(D,()=>t("current_operation"),v),o(y,()=>b.process.workerStatus.currentOperation),M}}),m),o(h,()=>t("threads_active"),p),o(_,()=>b.process.workerStatus.threadsActive),o($,()=>t("worker_status"),L),o(S,(()=>{var M=qe(()=>!!b.process.workerStatus.isRunning);return()=>M()?t("running"):t("stopped")})()),o(u,k(te,{get when(){return b.process.currentNest},get children(){var M=Ad(),D=M.firstChild,v=D.firstChild,y=v.firstChild,H=v.nextSibling,j=D.nextSibling,z=j.firstChild,C=z.firstChild,B=z.nextSibling;return o(v,()=>t("current_generation"),y),o(H,()=>b.process.currentNest?.generation||0),o(z,()=>t("best_fitness"),C),o(B,()=>b.process.currentNest?.fitness?.toFixed(2)||"N/A"),M}}),null),X.$$click=()=>window.location.reload(),o(X,()=>t("refresh_status")),A(M=>{var D=`${e()}%`,v=`text-sm font-medium ${b.process.workerStatus.isRunning?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`;return D!==M.e&&((M.e=D)!=null?g.style.setProperty("width",D):g.style.removeProperty("width")),v!==M.t&&He(S,M.t=v),M},{e:void 0,t:void 0}),i})()};Ee(["click"]);var Rd=F('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">ms'),Nd=F('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),Td=F('<div class="h-full flex flex-col"><div class="flex items-center justify-center p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><div class="flex items-center gap-4"><button class="btn-secondary btn-small">🔍−</button><span class="text-sm font-medium text-gray-900 dark:text-gray-100 min-w-16 text-center">%</span><button class="btn-secondary btn-small">🔍+</button><button class="btn-secondary btn-small">🎯</button></div></div><div class="flex-1 flex"><div class="flex-1 bg-white dark:bg-gray-900"><svg class=result-svg width=100% height=400 viewBox="0 0 800 400"><g><defs><pattern id=grid width=20 height=20 patternUnits=userSpaceOnUse><path d="M 20 0 L 0 0 0 20"fill=none stroke=#e0e0e0 stroke-width=1></path></pattern></defs><rect width=800 height=400 fill=url(#grid)></rect></g></svg></div><div class="w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 overflow-y-auto"><div class=p-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-2 gap-3 mb-6"><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-green-600 dark:text-green-400"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-gray-900 dark:text-gray-100"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-gray-900 dark:text-gray-100"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-red-600 dark:text-red-400">%</div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div></div><div class=space-y-3><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),Dd=F('<svg><g class=sheet-group><rect fill="rgba(200, 200, 200, 0.3)"stroke=#e5e7eb stroke-width=2></rect><text font-size=12 fill=#6b7280> </svg>',!1,!0,!1),Id=F('<svg><g class=part-group><rect fill="rgba(59, 130, 246, 0.7)"stroke=#3b82f6 stroke-width=1></svg>',!1,!0,!1);const Md=t=>{const[e]=Fe("nesting"),[s,i]=Q(1),[n,r]=Q({x:0,y:0}),[l,a]=Q(!1),[c,d]=Q({x:0,y:0}),g=de(()=>t.result.sheets?.reduce((S,R)=>S+R.width*R.height,0)||0),u=de(()=>t.result.placedParts||0),m=de(()=>{const S=g(),R=u();return S===0?0:(S-R)/S*100}),f=()=>{i(S=>Math.min(S*1.2,5))},h=()=>{i(S=>Math.max(S/1.2,.1))},p=()=>{i(1),r({x:0,y:0})},_=S=>{a(!0),d({x:S.clientX-n().x,y:S.clientY-n().y})},x=S=>{if(!l())return;const R={x:S.clientX-c().x,y:S.clientY-c().y};r(R)},$=()=>{a(!1)},L=de(()=>{const S=s(),R=n();return`translate(${R.x}, ${R.y}) scale(${S})`});return(()=>{var S=Td(),R=S.firstChild,X=R.firstChild,M=X.firstChild,D=M.nextSibling,v=D.firstChild,y=D.nextSibling,H=y.nextSibling,j=R.nextSibling,z=j.firstChild,C=z.firstChild,B=C.firstChild,T=B.firstChild;T.nextSibling;var U=z.nextSibling,G=U.firstChild,J=G.firstChild,O=J.nextSibling,N=O.firstChild,V=N.firstChild,I=V.nextSibling,W=N.nextSibling,se=W.firstChild,oe=se.nextSibling,ne=W.nextSibling,ue=ne.firstChild,$e=ue.nextSibling,xe=ne.nextSibling,be=xe.firstChild,ge=be.firstChild,Se=be.nextSibling,pe=O.nextSibling,Pe=pe.firstChild,Le=Pe.firstChild,De=Le.firstChild,we=Le.nextSibling,Re=Pe.nextSibling,ke=Re.firstChild,Oe=ke.firstChild,Ie=ke.nextSibling;return M.$$click=h,o(D,()=>Math.round(s()*100),v),y.$$click=f,H.$$click=p,C.addEventListener("mouseleave",$),C.$$mouseup=$,C.$$mousemove=x,C.$$mousedown=_,o(B,k(Te,{get each(){return t.result.sheets||[]},children:(E,re)=>(()=>{var ae=Dd(),Z=ae.firstChild,le=Z.nextSibling,Ce=le.firstChild;return o(le,()=>e("sheet"),Ce),o(le,()=>re()+1,null),A(fe=>{var Ne=E.x||0,q=E.y||0,me=E.width,ze=E.height,Ge=(E.x||0)+10,Ve=(E.y||0)+25;return Ne!==fe.e&&Y(Z,"x",fe.e=Ne),q!==fe.t&&Y(Z,"y",fe.t=q),me!==fe.a&&Y(Z,"width",fe.a=me),ze!==fe.o&&Y(Z,"height",fe.o=ze),Ge!==fe.i&&Y(le,"x",fe.i=Ge),Ve!==fe.n&&Y(le,"y",fe.n=Ve),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),ae})()}),null),o(B,k(Te,{get each(){return t.result.placements||[]},children:E=>(()=>{var re=Id(),ae=re.firstChild;return A(Z=>{var le=E.x,Ce=E.y,fe=E.width||50,Ne=E.height||50,q=`rotate(${E.rotation||0} ${E.x+(E.width||50)/2} ${E.y+(E.height||50)/2})`;return le!==Z.e&&Y(ae,"x",Z.e=le),Ce!==Z.t&&Y(ae,"y",Z.t=Ce),fe!==Z.a&&Y(ae,"width",Z.a=fe),Ne!==Z.o&&Y(ae,"height",Z.o=Ne),q!==Z.i&&Y(ae,"transform",Z.i=q),Z},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),re})()}),null),o(J,()=>e("statistics")),o(V,(()=>{var E=qe(()=>!!t.result.efficiency);return()=>E()?`${(t.result.efficiency*100).toFixed(1)}%`:"N/A"})()),o(I,()=>e("material_efficiency")),o(se,()=>t.result.fitness?.toFixed(2)||"N/A"),o(oe,()=>e("fitness_score")),o(ue,()=>t.result.sheets?.length||0),o($e,()=>e("sheets_used")),o(be,()=>m().toFixed(1),ge),o(Se,()=>e("material_waste")),o(Le,()=>e("total_parts_placed"),De),o(we,()=>t.result.placedParts||0),o(ke,()=>e("total_material_used"),Oe),o(Ie,()=>g().toFixed(2)),o(pe,k(te,{get when(){return t.result.generationTime},get children(){var E=Rd(),re=E.firstChild,ae=re.firstChild,Z=re.nextSibling,le=Z.firstChild;return o(re,()=>e("generation_time"),ae),o(Z,()=>t.result.generationTime,le),E}}),null),o(pe,k(te,{get when(){return t.result.generation},get children(){var E=Nd(),re=E.firstChild,ae=re.firstChild,Z=re.nextSibling;return o(re,()=>e("generation_number"),ae),o(Z,()=>t.result.generation),E}}),null),A(E=>{var re=e("zoom_out"),ae=e("zoom_in"),Z=e("reset_view"),le=l()?"grabbing":"grab",Ce=L();return re!==E.e&&Y(M,"title",E.e=re),ae!==E.t&&Y(y,"title",E.t=ae),Z!==E.a&&Y(H,"title",E.a=Z),le!==E.o&&((E.o=le)!=null?C.style.setProperty("cursor",le):C.style.removeProperty("cursor")),Ce!==E.i&&Y(B,"transform",E.i=Ce),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S})()};Ee(["click","mousedown","mousemove","mouseup"]);var jd=F('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><button class=btn-secondary>← </button><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><div class="flex gap-2"><button class=btn-secondary>📤 '),Ud=F('<div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"> (<!>)</h3><div class="text-sm text-gray-600 dark:text-gray-400"><label>'),zd=F('<div class="flex-1 overflow-y-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),Vd=F('<div class="h-full flex flex-col">'),Bd=F('<span class="text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full">'),Kd=F('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),Hd=F('<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow duration-200"><div class="h-32 bg-gray-50 dark:bg-gray-700 flex items-center justify-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"><div class=text-center><div class="text-2xl mb-1">🎯</div><div class="text-sm text-gray-600 dark:text-gray-400"></div></div></div><div class=p-4><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900 dark:text-gray-100"> #</h4></div><div class="space-y-2 mb-4"><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-green-600 dark:text-green-400"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div></div><div class="flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><div class="flex gap-2"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><button class="text-red-600 dark:text-red-400 hover:underline text-sm">');const qd=()=>{const[t]=Fe("nesting"),[e,s]=Q(null),[i,n]=Q("grid"),r=de(()=>[...b.app.nests].sort((m,f)=>m.efficiency!==f.efficiency?(f.efficiency||0)-(m.efficiency||0):(f.fitness||0)-(m.fitness||0))),l=m=>{s(m),n("detail")},a=()=>{s(null),n("grid")},c=async m=>{if(ee.isAvailable)try{const f=await ee.saveFileDialog({title:t("export_result"),defaultPath:`nest_result_${m.id}.svg`,filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(f.canceled||!f.filePath)return;await ee.exportNestResult(m,f.filePath)}catch(f){console.error("Failed to export result:",f),P.setError(t("export_failed"))}},d=m=>{const f=b.app.nests.filter(h=>h.id!==m.id);P.setNests(f)},g=m=>m?`${(m*100).toFixed(1)}%`:"N/A",u=m=>m?m.toFixed(2):"N/A";return(()=>{var m=Vd();return o(m,k(te,{get when(){return qe(()=>i()==="detail")()&&e()},get children(){var f=jd(),h=f.firstChild,p=h.firstChild;p.firstChild;var _=p.nextSibling,x=_.nextSibling,$=x.firstChild;return $.firstChild,p.$$click=a,o(p,()=>t("back_to_results"),null),o(_,()=>t("result_details")),$.$$click=()=>c(e()),o($,()=>t("export"),null),o(f,k(Md,{get result(){return e()}}),null),f}}),null),o(m,k(te,{get when(){return i()==="grid"},get children(){return[(()=>{var f=Ud(),h=f.firstChild,p=h.firstChild,_=p.nextSibling;_.nextSibling;var x=h.nextSibling,$=x.firstChild;return o(h,()=>t("nesting_results"),p),o(h,()=>r().length,_),o($,()=>t("sorted_by_efficiency")),f})(),(()=>{var f=zd();return o(f,k(Te,{get each(){return r()},children:(h,p)=>(()=>{var _=Hd(),x=_.firstChild,$=x.firstChild,L=$.firstChild,S=L.nextSibling,R=x.nextSibling,X=R.firstChild,M=X.firstChild,D=M.firstChild,v=X.nextSibling,y=v.firstChild,H=y.firstChild,j=H.firstChild,z=H.nextSibling,C=y.nextSibling,B=C.firstChild,T=B.firstChild,U=B.nextSibling,G=C.nextSibling,J=G.firstChild,O=J.firstChild,N=J.nextSibling,V=v.nextSibling,I=V.firstChild,W=I.nextSibling,se=W.firstChild,oe=se.nextSibling;return x.$$click=()=>l(h),o(S,()=>t("click_to_view")),o(M,()=>t("result"),D),o(M,()=>p()+1,null),o(X,k(te,{get when(){return p()===0},get children(){var ne=Bd();return o(ne,()=>t("best")),ne}}),null),o(H,()=>t("efficiency"),j),o(z,()=>g(h.efficiency)),o(B,()=>t("fitness"),T),o(U,()=>u(h.fitness)),o(J,()=>t("sheets_used"),O),o(N,()=>h.sheets?.length||0),o(v,k(te,{get when(){return h.placedParts},get children(){var ne=Kd(),ue=ne.firstChild,$e=ue.firstChild,xe=ue.nextSibling;return o(ue,()=>t("parts_placed"),$e),o(xe,()=>h.placedParts),ne}}),null),I.$$click=()=>l(h),o(I,()=>t("view_details")),se.$$click=()=>c(h),o(se,()=>t("export")),oe.$$click=()=>d(h),o(oe,()=>t("delete")),_})()})),f})()]}}),null),m})()};Ee(["click"]);var Wd=F("<button class=btn-secondary>🗑️ "),Gd=F('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed">▶️ </button><button class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed">⏹️ </button></div></div><div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-6"><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div></div></div><div class="flex-1 overflow-hidden">'),Jd=F('<p class="text-amber-600 dark:text-amber-400">'),Qd=F('<div class="h-full flex flex-col items-center justify-center text-center gap-4 p-8"><div class="text-6xl opacity-30">🎯</div><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400">');const Xd=()=>{const[t]=Fe("nesting"),e=de(()=>b.app.parts.length>0&&b.app.sheets.length>0&&!b.process.isNesting),s=de(()=>b.app.nests.length>0),i=async()=>{if(e())try{P.setNestingStatus(!0),P.setNestingProgress(0),P.setError(null);const a={parts:b.app.parts.filter(c=>c.quantity>0),sheets:b.app.sheets,config:b.config};await ee.startNesting(a)}catch(a){console.error("Failed to start nesting:",a),P.setError(t("start_nesting_failed")),P.setNestingStatus(!1)}},n=async()=>{if(b.process.isNesting)try{await ee.stopNesting(),P.setNestingStatus(!1)}catch(a){console.error("Failed to stop nesting:",a),P.setError(t("stop_nesting_failed"))}},r=()=>{P.setNests([])},l=de(()=>b.app.parts.filter(a=>a.quantity>0).length);return(()=>{var a=Gd(),c=a.firstChild,d=c.firstChild,g=d.nextSibling,u=g.firstChild;u.firstChild;var m=u.nextSibling;m.firstChild;var f=c.nextSibling,h=f.firstChild,p=h.firstChild,_=p.firstChild,x=_.firstChild,$=_.nextSibling,L=p.nextSibling,S=L.firstChild,R=S.firstChild,X=S.nextSibling,M=L.nextSibling,D=M.firstChild,v=D.firstChild,y=D.nextSibling,H=f.nextSibling;return o(d,()=>t("nesting_title")),u.$$click=i,o(u,()=>t("start_nesting"),null),m.$$click=n,o(m,()=>t("stop_nesting"),null),o(g,k(te,{get when(){return s()&&!b.process.isNesting},get children(){var j=Wd();return j.firstChild,j.$$click=r,o(j,()=>t("clear_results"),null),A(()=>Y(j,"title",t("clear_results"))),j}}),null),o(_,()=>t("parts_to_nest"),x),o($,l),o(S,()=>t("available_sheets"),R),o(X,()=>b.app.sheets.length),o(D,()=>t("results_count"),v),o(y,()=>b.app.nests.length),o(H,k(te,{get when(){return b.process.isNesting},get children(){return k(Fd,{})}}),null),o(H,k(te,{get when(){return s()},get fallback(){return(()=>{var j=Qd(),z=j.firstChild,C=z.nextSibling,B=C.nextSibling;return o(C,()=>t("no_nesting_results")),o(B,()=>t("start_nesting_to_see_results")),o(j,k(te,{get when(){return!e()},get children(){var T=Jd();return o(T,()=>t("add_parts_and_sheets_first")),T}}),null),j})()},get children(){return k(qd,{})}}),null),A(j=>{var z=!e(),C=e()?t("start_nesting"):t("cannot_start_nesting"),B=!b.process.isNesting,T=t("stop_nesting");return z!==j.e&&(u.disabled=j.e=z),C!==j.t&&Y(u,"title",j.t=C),B!==j.a&&(m.disabled=j.a=B),T!==j.o&&Y(m,"title",j.o=T),j},{e:void 0,t:void 0,a:void 0,o:void 0}),a})()};Ee(["click"]);var bt=F('<span class="text-red-500 text-xs mt-1 block">'),Zd=F('<div class="text-sm text-gray-600 dark:text-gray-400">: <!> mm'),Yd=F('<div class=modal-body><div class=space-y-6><div class=form-group><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class=form-group><label class=form-label for=sheet-name>:</label><input id=sheet-name type=text class=input-base></div><div class=form-group><label class=form-label for=material>:</label><select id=material class=input-select></select></div></div><div class=form-group><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-3 gap-2 mb-4"></div><div class="flex items-end gap-2"><div class=flex-1><label class=form-label for=width> (mm):</label><input id=width type=number min=1 step=0.1></div><button type=button class="btn-secondary mb-1">⇄</button><div class=flex-1><label class=form-label for=height> (mm):</label><input id=height type=number min=1 step=0.1></div></div><div class="text-sm text-gray-600 dark:text-gray-400 mt-2">: <!> mm²</div></div><div class=form-group><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-3 gap-4"><div><label class=form-label for=thickness> (mm):</label><input id=thickness type=number min=0.1 step=0.1></div><div><label class=form-label for=quantity>:</label><input id=quantity type=number min=1></div><div><label class=form-label for=margin> (mm):</label><input id=margin type=number min=0 step=0.1></div></div></div><div class=form-group><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="flex items-center gap-6"><div class=flex-shrink-0><div class="bg-white dark:bg-gray-600 border-2 border-gray-300 dark:border-gray-500 rounded shadow-sm relative"><div class="absolute border border-dashed border-gray-400 dark:border-gray-400 rounded-sm"></div></div></div><div class=space-y-2><div class="text-sm text-gray-900 dark:text-gray-100"> × <!> mm</div><div class="text-sm text-gray-600 dark:text-gray-400">: <!> mm²'),eu=F("<div class=modal-footer><button type=button class=btn-secondary></button><button type=button class=btn-primary>"),tu=F("<option>"),su=F('<button type=button class="btn-secondary btn-small text-xs">');const iu=t=>{const[e]=Fe("sheets"),[s,i]=Q(""),[n,r]=Q(200),[l,a]=Q(200),[c,d]=Q(3),[g,u]=Q(1),[m,f]=Q(5),[h,p]=Q("Generic"),[_,x]=Q({}),$=["Generic","Wood - Plywood","Wood - MDF","Wood - Hardwood","Metal - Aluminum","Metal - Steel","Metal - Brass","Plastic - Acrylic","Plastic - ABS","Cardboard","Fabric","Leather","Paper"],L=[{name:"A4",width:210,height:297},{name:"A3",width:297,height:420},{name:"A2",width:420,height:594},{name:"A1",width:594,height:841},{name:"Letter",width:216,height:279},{name:"Legal",width:216,height:356},{name:'12×12"',width:305,height:305},{name:'24×24"',width:610,height:610},{name:'48×24"',width:1219,height:610}];ns(()=>{const v=t.sheet;v?(i(v.name||""),r(v.width),a(v.height),d(v.thickness||3),u(v.quantity||1),f(v.margin||5),p(v.material||"Generic")):(i(""),r(200),a(200),d(3),u(1),f(5),p("Generic")),x({})});const S=()=>{const v={};return n()<=0&&(v.width=e("width_must_be_positive")),l()<=0&&(v.height=e("height_must_be_positive")),c()<=0&&(v.thickness=e("thickness_must_be_positive")),g()<=0&&(v.quantity=e("quantity_must_be_positive")),m()<0&&(v.margin=e("margin_cannot_be_negative")),x(v),Object.keys(v).length===0},R=()=>{if(!S())return;const v={id:t.sheet?.id||`sheet_${Date.now()}`,name:s().trim()||`Sheet ${Date.now()}`,width:n(),height:l(),thickness:c(),quantity:g(),margin:m(),material:h()};t.onSave(v)},X=v=>{r(v.width),a(v.height),s().trim()||i(v.name)},M=()=>{const v=n();r(l()),a(v)},D=()=>(n()*l()).toFixed(0);return[(()=>{var v=Yd(),y=v.firstChild,H=y.firstChild,j=H.firstChild,z=j.nextSibling,C=z.firstChild,B=C.firstChild,T=C.nextSibling,U=z.nextSibling,G=U.firstChild,J=G.firstChild,O=G.nextSibling,N=H.nextSibling,V=N.firstChild,I=V.nextSibling,W=I.nextSibling,se=W.firstChild,oe=se.firstChild,ne=oe.firstChild,ue=oe.nextSibling,$e=se.nextSibling,xe=$e.nextSibling,be=xe.firstChild,ge=be.firstChild,Se=be.nextSibling,pe=W.nextSibling,Pe=pe.firstChild,Le=Pe.nextSibling;Le.nextSibling;var De=N.nextSibling,we=De.firstChild,Re=we.nextSibling,ke=Re.firstChild,Oe=ke.firstChild,Ie=Oe.firstChild,E=Oe.nextSibling,re=ke.nextSibling,ae=re.firstChild,Z=ae.firstChild,le=ae.nextSibling,Ce=re.nextSibling,fe=Ce.firstChild,Ne=fe.firstChild,q=fe.nextSibling,me=De.nextSibling,ze=me.firstChild,Ge=ze.nextSibling,Ve=Ge.firstChild,Je=Ve.firstChild,Me=Je.firstChild,tt=Ve.nextSibling,je=tt.firstChild,rt=je.firstChild,Ze=rt.nextSibling;Ze.nextSibling;var st=je.nextSibling,Ye=st.firstChild,Be=Ye.nextSibling;return Be.nextSibling,o(j,()=>e("basic_information")),o(C,()=>e("sheet_name"),B),T.$$input=w=>i(w.currentTarget.value),o(G,()=>e("material"),J),O.addEventListener("change",w=>p(w.currentTarget.value)),o(O,k(Te,{each:$,children:w=>(()=>{var ve=tu();return ve.value=w,o(ve,w),ve})()})),o(V,()=>e("dimensions")),o(I,k(Te,{each:L,children:w=>(()=>{var ve=su();return ve.$$click=()=>X(w),o(ve,()=>w.name),A(()=>Y(ve,"title",`${w.width} × ${w.height} mm`)),ve})()})),o(oe,()=>e("width"),ne),ue.$$input=w=>r(parseFloat(w.currentTarget.value)||0),o(se,k(te,{get when(){return _().width},get children(){var w=bt();return o(w,()=>_().width),w}}),null),$e.$$click=M,o(be,()=>e("height"),ge),Se.$$input=w=>a(parseFloat(w.currentTarget.value)||0),o(xe,k(te,{get when(){return _().height},get children(){var w=bt();return o(w,()=>_().height),w}}),null),o(pe,()=>e("area"),Pe),o(pe,D,Le),o(we,()=>e("properties")),o(Oe,()=>e("thickness"),Ie),E.$$input=w=>d(parseFloat(w.currentTarget.value)||0),o(ke,k(te,{get when(){return _().thickness},get children(){var w=bt();return o(w,()=>_().thickness),w}}),null),o(ae,()=>e("quantity"),Z),le.$$input=w=>u(parseInt(w.currentTarget.value)||0),o(re,k(te,{get when(){return _().quantity},get children(){var w=bt();return o(w,()=>_().quantity),w}}),null),o(fe,()=>e("margin"),Ne),q.$$input=w=>f(parseFloat(w.currentTarget.value)||0),o(Ce,k(te,{get when(){return _().margin},get children(){var w=bt();return o(w,()=>_().margin),w}}),null),o(ze,()=>e("preview")),Je.style.setProperty("width","120px"),Je.style.setProperty("max-height","120px"),o(je,n,rt),o(je,l,Ze),o(st,()=>e("area"),Ye),o(st,D,Be),o(tt,k(te,{get when(){return m()>0},get children(){var w=Zd(),ve=w.firstChild,Ke=ve.nextSibling;return Ke.nextSibling,o(w,()=>e("margin"),ve),o(w,m,Ke),w}}),null),A(w=>{var ve=e("enter_sheet_name"),Ke=`input-number ${_().width?"border-red-500":""}`,Pt=e("swap_dimensions"),Lt=`input-number ${_().height?"border-red-500":""}`,ht=`input-number ${_().thickness?"border-red-500":""}`,at=`input-number ${_().quantity?"border-red-500":""}`,Ot=`input-number ${_().margin?"border-red-500":""}`,pt=`${n()} / ${l()}`,mt=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,ie=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,it=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,qt=`${Math.max(m()/Math.max(n(),l())*100,2)}%`;return ve!==w.e&&Y(T,"placeholder",w.e=ve),Ke!==w.t&&He(ue,w.t=Ke),Pt!==w.a&&Y($e,"title",w.a=Pt),Lt!==w.o&&He(Se,w.o=Lt),ht!==w.i&&He(E,w.i=ht),at!==w.n&&He(le,w.n=at),Ot!==w.s&&He(q,w.s=Ot),pt!==w.h&&((w.h=pt)!=null?Je.style.setProperty("aspect-ratio",pt):Je.style.removeProperty("aspect-ratio")),mt!==w.r&&((w.r=mt)!=null?Me.style.setProperty("top",mt):Me.style.removeProperty("top")),ie!==w.d&&((w.d=ie)!=null?Me.style.setProperty("left",ie):Me.style.removeProperty("left")),it!==w.l&&((w.l=it)!=null?Me.style.setProperty("right",it):Me.style.removeProperty("right")),qt!==w.u&&((w.u=qt)!=null?Me.style.setProperty("bottom",qt):Me.style.removeProperty("bottom")),w},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),A(()=>T.value=s()),A(()=>O.value=h()),A(()=>ue.value=n()),A(()=>Se.value=l()),A(()=>E.value=c()),A(()=>le.value=g()),A(()=>q.value=m()),v})(),(()=>{var v=eu(),y=v.firstChild,H=y.nextSibling;return hi(y,"click",t.onCancel),o(y,()=>e("cancel")),H.$$click=R,o(H,(()=>{var j=qe(()=>!!t.sheet);return()=>j()?e("update_sheet"):e("add_sheet")})()),v})()]};Ee(["input","click"]);var nu=F('<div class=modal-overlay><div class=modal-content><div class=modal-header><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><button class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl leading-none">×'),ru=F('<div class="h-full flex flex-col"><div class="p-4 border-b border-gray-200 dark:border-gray-700"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3></div><div class="flex-1 overflow-y-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),au=F('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class=btn-primary>➕ </button></div></div><div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-6"><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"> mm²</span></div></div></div><div class="flex-1 overflow-hidden">'),lu=F('<div class="h-full flex flex-col items-center justify-center text-center gap-6 p-8"><div class="text-6xl opacity-30">📄</div><div><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"></h3><p class="text-gray-600 dark:text-gray-400"></p></div><div class="w-full max-w-2xl"><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-3 gap-3">'),ou=F('<button class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-center"><div class="font-medium text-gray-900 dark:text-gray-100 mb-1"></div><div class="text-sm text-gray-600 dark:text-gray-400"> × '),cu=F('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"> mm'),du=F('<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow duration-200"><div class="h-32 bg-gray-50 dark:bg-gray-700 flex items-center justify-center p-4"><div class=relative><div class="bg-white dark:bg-gray-600 border-2 border-gray-300 dark:border-gray-500 rounded shadow-sm"><div class="absolute inset-1 border border-dashed border-gray-400 dark:border-gray-400 rounded-sm"></div></div></div></div><div class=p-4><div class="font-medium text-gray-900 dark:text-gray-100 mb-3"></div><div class="space-y-2 mb-4"><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div></div><div class="flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><button class="text-red-600 dark:text-red-400 hover:underline text-sm">');const uu=()=>{const[t]=Fe("sheets"),[e,s]=Q(!1),[i,n]=Q(null),r=de(()=>b.app.sheets.length),l=de(()=>b.app.sheets.reduce((p,_)=>p+_.width*_.height,0)),a=[{name:"A4",width:210,height:297,units:"mm"},{name:"A3",width:297,height:420,units:"mm"},{name:"A2",width:420,height:594,units:"mm"},{name:"A1",width:594,height:841,units:"mm"},{name:"Letter",width:216,height:279,units:"mm"},{name:"Legal",width:216,height:356,units:"mm"},{name:'12x12"',width:305,height:305,units:"mm"},{name:'24x24"',width:610,height:610,units:"mm"},{name:'48x24"',width:1219,height:610,units:"mm"}],c=()=>{n(null),s(!0)},d=p=>{n(p),s(!0)},g=p=>{const _=b.app.sheets.filter(x=>x.id!==p);P.setSheets(_)},u=p=>{i()?P.updateSheet(p.id,p):P.addSheet(p),s(!1),n(null)},m=()=>{s(!1),n(null)},f=p=>{const _={name:p.name,width:p.width,height:p.height,thickness:3,quantity:1,margin:5,material:"Generic"};P.addSheet(_)},h=p=>`${p.width} × ${p.height} mm`;return(()=>{var p=au(),_=p.firstChild,x=_.firstChild,$=x.nextSibling,L=$.firstChild;L.firstChild;var S=_.nextSibling,R=S.firstChild,X=R.firstChild,M=X.firstChild,D=M.firstChild,v=M.nextSibling,y=X.nextSibling,H=y.firstChild,j=H.firstChild,z=H.nextSibling,C=z.firstChild,B=S.nextSibling;return o(x,()=>t("sheets_title")),L.$$click=c,o(L,()=>t("add_sheet"),null),o(M,()=>t("total_sheets"),D),o(v,r),o(H,()=>t("total_area"),j),o(z,()=>l().toFixed(0),C),o(p,k(te,{get when(){return e()},get children(){var T=nu(),U=T.firstChild,G=U.firstChild,J=G.firstChild,O=J.nextSibling;return o(J,(()=>{var N=qe(()=>!!i());return()=>N()?t("edit_sheet"):t("add_new_sheet")})()),O.$$click=m,o(U,k(iu,{get sheet(){return i()},onSave:u,onCancel:m}),null),T}}),B),o(B,k(te,{get when(){return r()>0},get fallback(){return(()=>{var T=lu(),U=T.firstChild,G=U.nextSibling,J=G.firstChild,O=J.nextSibling,N=G.nextSibling,V=N.firstChild,I=V.nextSibling;return o(J,()=>t("no_sheets_loaded")),o(O,()=>t("add_sheets_to_get_started")),o(V,()=>t("quick_templates")),o(I,k(Te,{each:a,children:W=>(()=>{var se=ou(),oe=se.firstChild,ne=oe.nextSibling,ue=ne.firstChild;return se.$$click=()=>f(W),o(oe,()=>W.name),o(ne,()=>W.width,ue),o(ne,()=>W.height,null),A(()=>Y(se,"title",`${W.width} × ${W.height} ${W.units}`)),se})()})),T})()},get children(){var T=ru(),U=T.firstChild,G=U.firstChild,J=U.nextSibling;return o(G,()=>t("configured_sheets")),o(J,k(Te,{get each(){return b.app.sheets},children:(O,N)=>(()=>{var V=du(),I=V.firstChild,W=I.firstChild,se=W.firstChild,oe=I.nextSibling,ne=oe.firstChild,ue=ne.nextSibling,$e=ue.firstChild,xe=$e.firstChild,be=xe.firstChild,ge=xe.nextSibling,Se=$e.nextSibling,pe=Se.firstChild,Pe=pe.firstChild,Le=pe.nextSibling,De=Se.nextSibling,we=De.firstChild,Re=we.firstChild,ke=we.nextSibling,Oe=ue.nextSibling,Ie=Oe.firstChild,E=Ie.nextSibling;return se.style.setProperty("max-width","80px"),se.style.setProperty("max-height","80px"),se.style.setProperty("min-width","40px"),se.style.setProperty("min-height","40px"),o(ne,()=>O.name||`${t("sheet")} ${N()+1}`),o(xe,()=>t("dimensions"),be),o(ge,()=>h(O)),o(pe,()=>t("quantity"),Pe),o(Le,()=>O.quantity),o(we,()=>t("material"),Re),o(ke,()=>O.material||"Generic"),o(ue,k(te,{get when(){return O.margin},get children(){var re=cu(),ae=re.firstChild,Z=ae.firstChild,le=ae.nextSibling,Ce=le.firstChild;return o(ae,()=>t("margin"),Z),o(le,()=>O.margin,Ce),re}}),null),Ie.$$click=()=>d(O),o(Ie,()=>t("edit")),E.$$click=()=>g(O.id),o(E,()=>t("delete")),A(re=>(re=`${O.width} / ${O.height}`)!=null?se.style.setProperty("aspect-ratio",re):se.style.removeProperty("aspect-ratio")),V})()})),T}})),A(()=>Y(L,"title",t("add_sheet"))),p})()};Ee(["click"]);var gu=F('<div class=create-preset-form><h4></h4><div class=form-group><label for=preset-name>:</label><input id=preset-name type=text class=form-input></div><div class=form-group><label for=preset-description>:</label><textarea id=preset-description class=form-textarea rows=3></textarea></div><div class=form-actions><button class="button secondary"></button><button class="button primary">'),fu=F("<div class=presets-grid>"),hu=F('<div class=preset-manager><div class=section-header><h3></h3><div class=header-actions><button class="button secondary">📁 </button><button class="button primary">➕ </button></div></div><div class=preset-description><p></p></div><div class=presets-list>'),pu=F("<div class=empty-state><div class=empty-icon>💾</div><h4></h4><p>"),mu=F("<p class=preset-description>"),_u=F("<div class=meta-item><span class=meta-label>:</span><span class=meta-value>"),bu=F('<div><div class=preset-header><h4 class=preset-name></h4><div class=preset-actions><button class=action-button>📤</button><button class="action-button danger">🗑️</button></div></div><div class=preset-meta><div class=meta-item><span class=meta-label>:</span><span class=meta-value></span></div></div><div class=preset-footer><button class="button primary">');const vu=()=>{const[t]=Fe("settings"),[e,s]=Q(!1),[i,n]=Q(""),[r,l]=Q(""),[a,c]=Q(""),d=async()=>{const p=i().trim();if(!p){P.setError(t("preset_name_required"));return}try{const _={id:`preset_${Date.now()}`,name:p,description:r().trim(),config:{...b.config},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};P.addPreset(_),ee.isAvailable&&await ee.savePreset(_),n(""),l(""),s(!1)}catch(_){console.error("Failed to create preset:",_),P.setError(t("preset_create_failed"))}},g=async p=>{const _=Object.values(b.app.presets||{}).find(x=>x.id===p);if(_)try{P.updateConfig(_.config),ee.isAvailable&&await ee.saveConfig(_.config),c(p)}catch(x){console.error("Failed to load preset:",x),P.setError(t("preset_load_failed"))}},u=async p=>{const _=Object.values(b.app.presets||{}).find($=>$.id===p);if(!(!_||!confirm(t("confirm_delete_preset",{name:_.name}))))try{P.removePreset(p),ee.isAvailable&&await ee.deletePreset(p),a()===p&&c("")}catch($){console.error("Failed to delete preset:",$),P.setError(t("preset_delete_failed"))}},m=async p=>{const _=Object.values(b.app.presets||{}).find(x=>x.id===p);if(!(!_||!ee.isAvailable))try{const x=await ee.saveFileDialog({title:t("export_preset"),defaultPath:`${_.name}.json`,filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}]});if(x.canceled||!x.filePath)return;await ee.exportPreset(_,x.filePath)}catch(x){console.error("Failed to export preset:",x),P.setError(t("preset_export_failed"))}},f=async()=>{if(ee.isAvailable)try{const p=await ee.openFileDialog({title:t("import_preset"),filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(p.canceled||!p.filePaths?.length)return;for(const _ of p.filePaths){const x=await ee.importPreset(_);P.addPreset({...x,id:`preset_${Date.now()}_${Math.random()}`,updatedAt:new Date().toISOString()})}}catch(p){console.error("Failed to import preset:",p),P.setError(t("preset_import_failed"))}},h=p=>new Date(p).toLocaleDateString();return(()=>{var p=hu(),_=p.firstChild,x=_.firstChild,$=x.nextSibling,L=$.firstChild;L.firstChild;var S=L.nextSibling;S.firstChild;var R=_.nextSibling,X=R.firstChild,M=R.nextSibling;return o(x,()=>t("preset_management")),L.$$click=f,o(L,()=>t("import"),null),S.$$click=()=>s(!0),o(S,()=>t("create_preset"),null),o(X,()=>t("preset_description")),o(p,k(te,{get when(){return e()},get children(){var D=gu(),v=D.firstChild,y=v.nextSibling,H=y.firstChild,j=H.firstChild,z=H.nextSibling,C=y.nextSibling,B=C.firstChild,T=B.firstChild,U=B.nextSibling,G=C.nextSibling,J=G.firstChild,O=J.nextSibling;return o(v,()=>t("create_new_preset")),o(H,()=>t("preset_name"),j),z.$$input=N=>n(N.currentTarget.value),o(B,()=>t("preset_description_optional"),T),U.$$input=N=>l(N.currentTarget.value),J.$$click=()=>{s(!1),n(""),l("")},o(J,()=>t("cancel")),O.$$click=d,o(O,()=>t("create_preset")),A(N=>{var V=t("enter_preset_name"),I=t("enter_preset_description"),W=!i().trim();return V!==N.e&&Y(z,"placeholder",N.e=V),I!==N.t&&Y(U,"placeholder",N.t=I),W!==N.a&&(O.disabled=N.a=W),N},{e:void 0,t:void 0,a:void 0}),A(()=>z.value=i()),A(()=>U.value=r()),D}}),M),o(M,k(te,{get when(){return qe(()=>!!b.app.presets)()&&Object.keys(b.app.presets).length>0},get fallback(){return(()=>{var D=pu(),v=D.firstChild,y=v.nextSibling,H=y.nextSibling;return o(y,()=>t("no_presets_available")),o(H,()=>t("create_preset_to_get_started")),D})()},get children(){var D=fu();return o(D,k(Te,{get each(){return Object.values(b.app.presets||{})},children:v=>(()=>{var y=bu(),H=y.firstChild,j=H.firstChild,z=j.nextSibling,C=z.firstChild,B=C.nextSibling,T=H.nextSibling,U=T.firstChild,G=U.firstChild,J=G.firstChild,O=G.nextSibling,N=T.nextSibling,V=N.firstChild;return o(j,()=>v.name),C.$$click=()=>m(v.id),B.$$click=()=>u(v.id),o(y,k(te,{get when(){return v.description},get children(){var I=mu();return o(I,()=>v.description),I}}),T),o(G,()=>t("created"),J),o(O,()=>h(v.createdAt)),o(T,k(te,{get when(){return v.updatedAt!==v.createdAt},get children(){var I=_u(),W=I.firstChild,se=W.firstChild,oe=W.nextSibling;return o(W,()=>t("updated"),se),o(oe,()=>h(v.updatedAt)),I}}),null),V.$$click=()=>g(v.id),o(V,(()=>{var I=qe(()=>a()===v.id);return()=>I()?t("active"):t("load_preset")})()),A(I=>{var W=`preset-card ${a()===v.id?"active":""}`,se=t("export_preset"),oe=t("delete_preset"),ne=a()===v.id;return W!==I.e&&He(y,I.e=W),se!==I.t&&Y(C,"title",I.t=se),oe!==I.a&&Y(B,"title",I.a=oe),ne!==I.o&&(V.disabled=I.o=ne),I},{e:void 0,t:void 0,a:void 0,o:void 0}),y})()})),D}})),A(D=>{var v=t("import_preset"),y=t("create_new_preset");return v!==D.e&&Y(L,"title",D.e=v),y!==D.t&&Y(S,"title",D.t=y),D},{e:void 0,t:void 0}),p})()};Ee(["click","input"]);var xu=F("<div class=algorithm-settings><div class=section-header><h3></h3></div><div class=settings-sections><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label> (mm)</label><div class=input-with-slider><input type=range min=0 max=20 step=0.1 class=slider><input type=number min=0 max=20 step=0.1 class=number-input></div><div class=setting-description></div></div><div class=setting-group><label class=setting-label> (mm)</label><div class=input-with-slider><input type=range min=0.1 max=2 step=0.1 class=slider><input type=number min=0.1 max=2 step=0.1 class=number-input></div><div class=setting-description></div></div><div class=setting-group><label class=setting-label></label><select class=setting-select></select><div class=setting-description></div></div></div><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label></label><div class=input-with-slider><input type=range min=5 max=50 step=1 class=slider><input type=number min=5 max=50 step=1 class=number-input></div><div class=setting-description></div></div><div class=setting-group><label class=setting-label> (%)</label><div class=input-with-slider><input type=range min=1 max=50 step=1 class=slider><input type=number min=1 max=50 step=1 class=number-input></div><div class=setting-description></div></div></div><div class=settings-section><h4></h4><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description>"),yu=F("<option>");const $u=()=>{const[t]=Fe("settings"),[e,s]=Q(0),[i,n]=Q(.3),[r,l]=Q(4),[a,c]=Q(10),[d,g]=Q(10),[u,m]=Q(!1),[f,h]=Q(!1),[p,_]=Q(!1),[x,$]=Q(!0);ns(()=>{const y=b.config;s(y.spacing||0),n(y.curveTolerance||.3),l(y.rotations||4),c(y.populationSize||10),g(y.mutationRate||10),m(y.useHoles||!1),h(y.exploreConcave||!1),_(y.mergeLines||!1),$(y.useRoughApproximation!==!1)});const L=y=>{P.updateConfig({...b.config,...y})},S=y=>{s(y),L({spacing:y})},R=y=>{n(y),L({curveTolerance:y})},X=y=>{l(y),L({rotations:y})},M=y=>{c(y),L({populationSize:y})},D=y=>{g(y),L({mutationRate:y})},v=[{value:0,label:t("no_rotation")},{value:2,label:t("2_rotations")},{value:4,label:t("4_rotations")},{value:8,label:t("8_rotations")},{value:12,label:t("12_rotations")},{value:360,label:t("free_rotation")}];return(()=>{var y=xu(),H=y.firstChild,j=H.firstChild,z=H.nextSibling,C=z.firstChild,B=C.firstChild,T=B.nextSibling,U=T.firstChild,G=U.firstChild,J=U.nextSibling,O=J.firstChild,N=O.nextSibling,V=J.nextSibling,I=T.nextSibling,W=I.firstChild,se=W.firstChild,oe=W.nextSibling,ne=oe.firstChild,ue=ne.nextSibling,$e=oe.nextSibling,xe=I.nextSibling,be=xe.firstChild,ge=be.nextSibling,Se=ge.nextSibling,pe=C.nextSibling,Pe=pe.firstChild,Le=Pe.nextSibling,De=Le.firstChild,we=De.nextSibling,Re=we.firstChild,ke=Re.nextSibling,Oe=we.nextSibling,Ie=Le.nextSibling,E=Ie.firstChild,re=E.firstChild,ae=E.nextSibling,Z=ae.firstChild,le=Z.nextSibling,Ce=ae.nextSibling,fe=pe.nextSibling,Ne=fe.firstChild,q=Ne.nextSibling,me=q.firstChild,ze=me.firstChild,Ge=ze.nextSibling,Ve=Ge.nextSibling,Je=me.nextSibling,Me=q.nextSibling,tt=Me.firstChild,je=tt.firstChild,rt=je.nextSibling,Ze=rt.nextSibling,st=tt.nextSibling,Ye=Me.nextSibling,Be=Ye.firstChild,w=Be.firstChild,ve=w.nextSibling,Ke=ve.nextSibling,Pt=Be.nextSibling,Lt=Ye.nextSibling,ht=Lt.firstChild,at=ht.firstChild,Ot=at.nextSibling,pt=Ot.nextSibling,mt=ht.nextSibling;return o(j,()=>t("algorithm_settings")),o(B,()=>t("nesting_parameters")),o(U,()=>t("space_between_parts"),G),O.$$input=ie=>S(parseFloat(ie.currentTarget.value)),N.$$input=ie=>S(parseFloat(ie.currentTarget.value)||0),o(V,()=>t("spacing_description")),o(W,()=>t("curve_tolerance"),se),ne.$$input=ie=>R(parseFloat(ie.currentTarget.value)),ue.$$input=ie=>R(parseFloat(ie.currentTarget.value)||.3),o($e,()=>t("curve_tolerance_description")),o(be,()=>t("part_rotations")),ge.addEventListener("change",ie=>X(parseInt(ie.currentTarget.value))),o(ge,k(Te,{each:v,children:ie=>(()=>{var it=yu();return o(it,()=>ie.label),A(()=>it.value=ie.value),it})()})),o(Se,()=>t("rotations_description")),o(Pe,()=>t("genetic_algorithm")),o(De,()=>t("population_size")),Re.$$input=ie=>M(parseInt(ie.currentTarget.value)),ke.$$input=ie=>M(parseInt(ie.currentTarget.value)||10),o(Oe,()=>t("population_size_description")),o(E,()=>t("mutation_rate"),re),Z.$$input=ie=>D(parseInt(ie.currentTarget.value)),le.$$input=ie=>D(parseInt(ie.currentTarget.value)||10),o(Ce,()=>t("mutation_rate_description")),o(Ne,()=>t("advanced_options")),ze.addEventListener("change",ie=>{m(ie.currentTarget.checked),L({useHoles:ie.currentTarget.checked})}),o(Ve,()=>t("use_holes")),o(Je,()=>t("use_holes_description")),je.addEventListener("change",ie=>{h(ie.currentTarget.checked),L({exploreConcave:ie.currentTarget.checked})}),o(Ze,()=>t("explore_concave")),o(st,()=>t("explore_concave_description")),w.addEventListener("change",ie=>{_(ie.currentTarget.checked),L({mergeLines:ie.currentTarget.checked})}),o(Ke,()=>t("merge_common_lines")),o(Pt,()=>t("merge_lines_description")),at.addEventListener("change",ie=>{$(ie.currentTarget.checked),L({useRoughApproximation:ie.currentTarget.checked})}),o(pt,()=>t("use_rough_approximation")),o(mt,()=>t("rough_approximation_description")),A(()=>O.value=e()),A(()=>N.value=e()),A(()=>ne.value=i()),A(()=>ue.value=i()),A(()=>ge.value=r()),A(()=>Re.value=a()),A(()=>ke.value=a()),A(()=>Z.value=d()),A(()=>le.value=d()),A(()=>ze.checked=u()),A(()=>je.checked=f()),A(()=>w.checked=p()),A(()=>at.checked=x()),y})()};Ee(["input"]);var Su=F('<div class=ui-preferences><div class=section-header><h3></h3></div><div class=settings-sections><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label></label><select class=setting-select></select><div class=setting-description></div></div><div class=setting-group><label class=setting-label></label><select class=setting-select></select><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div></div><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label></label><select class=setting-select></select><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div></div><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label></label><div class=input-with-button><input type=number min=200 max=600 class=number-input><button class="button secondary"></button></div><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description>'),Jt=F("<option>");const wu=()=>{const[t,{changeLanguage:e}]=Fe("settings"),s=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français"},{code:"es",name:"Español"}],i=[{value:"mm",label:t("millimeters")},{value:"in",label:t("inches")},{value:"cm",label:t("centimeters")}],n=[{value:"auto",label:t("auto_theme")},{value:"light",label:t("light_theme")},{value:"dark",label:t("dark_theme")}],r=async d=>{P.setLanguage(d),await e(d)},l=d=>{if(d==="auto"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches;P.setDarkMode(g)}else P.setDarkMode(d==="dark");P.setTheme(d)},a=d=>{P.updateConfig({...b.config,units:d})},c=()=>{P.setPanelWidth("partsWidth",300)};return(()=>{var d=Su(),g=d.firstChild,u=g.firstChild,m=g.nextSibling,f=m.firstChild,h=f.firstChild,p=h.nextSibling,_=p.firstChild,x=_.nextSibling,$=x.nextSibling,L=p.nextSibling,S=L.firstChild,R=S.nextSibling,X=R.nextSibling,M=L.nextSibling,D=M.firstChild,v=D.firstChild,y=v.nextSibling,H=y.nextSibling,j=D.nextSibling,z=f.nextSibling,C=z.firstChild,B=C.nextSibling,T=B.firstChild,U=T.nextSibling,G=U.nextSibling,J=B.nextSibling,O=J.firstChild,N=O.firstChild,V=N.nextSibling,I=V.nextSibling,W=O.nextSibling,se=J.nextSibling,oe=se.firstChild,ne=oe.firstChild,ue=ne.nextSibling,$e=ue.nextSibling,xe=oe.nextSibling,be=z.nextSibling,ge=be.firstChild,Se=ge.nextSibling,pe=Se.firstChild,Pe=pe.nextSibling,Le=Pe.firstChild,De=Le.nextSibling,we=Pe.nextSibling,Re=Se.nextSibling,ke=Re.firstChild,Oe=ke.firstChild,Ie=Oe.nextSibling,E=Ie.nextSibling,re=ke.nextSibling,ae=Re.nextSibling,Z=ae.firstChild,le=Z.firstChild,Ce=le.nextSibling,fe=Ce.nextSibling,Ne=Z.nextSibling;return o(u,()=>t("ui_preferences")),o(h,()=>t("appearance")),o(_,()=>t("language")),x.addEventListener("change",q=>r(q.currentTarget.value)),o(x,k(Te,{each:s,children:q=>(()=>{var me=Jt();return o(me,()=>q.name),A(()=>me.value=q.code),me})()})),o($,()=>t("language_description")),o(S,()=>t("theme")),R.addEventListener("change",q=>l(q.currentTarget.value)),o(R,k(Te,{each:n,children:q=>(()=>{var me=Jt();return o(me,()=>q.label),A(()=>me.value=q.value),me})()})),o(X,()=>t("theme_description")),v.addEventListener("change",q=>P.setDarkMode(q.currentTarget.checked)),o(H,()=>t("dark_mode")),o(j,()=>t("dark_mode_description")),o(C,()=>t("units_and_formatting")),o(T,()=>t("display_units")),U.addEventListener("change",q=>a(q.currentTarget.value)),o(U,k(Te,{each:i,children:q=>(()=>{var me=Jt();return o(me,()=>q.label),A(()=>me.value=q.value),me})()})),o(G,()=>t("units_description")),N.addEventListener("change",q=>P.updateConfig({...b.config,showGrid:q.currentTarget.checked})),o(I,()=>t("show_grid")),o(W,()=>t("show_grid_description")),ne.addEventListener("change",q=>P.updateConfig({...b.config,showRulers:q.currentTarget.checked})),o($e,()=>t("show_rulers")),o(xe,()=>t("show_rulers_description")),o(ge,()=>t("layout_preferences")),o(pe,()=>t("parts_panel_width")),Le.$$input=q=>P.setPanelWidth("partsWidth",parseInt(q.currentTarget.value)||300),De.$$click=c,o(De,()=>t("reset")),o(we,()=>t("panel_width_description")),Oe.addEventListener("change",q=>P.setShowTooltips(q.currentTarget.checked)),o(E,()=>t("show_tooltips")),o(re,()=>t("tooltips_description")),le.addEventListener("change",q=>P.setShowStatusBar(q.currentTarget.checked)),o(fe,()=>t("show_status_bar")),o(Ne,()=>t("status_bar_description")),A(()=>x.value=b.ui.language),A(()=>R.value=b.ui.theme||"auto"),A(()=>v.checked=b.ui.darkMode),A(()=>U.value=b.config.units||"mm"),A(()=>N.checked=b.config.showGrid!==!1),A(()=>ne.checked=b.config.showRulers!==!1),A(()=>Le.value=b.ui.panels.partsWidth||300),A(()=>Oe.checked=b.ui.showTooltips!==!1),A(()=>le.checked=b.ui.showStatusBar!==!1),d})()};Ee(["input","click"]);var Os=F("<div class=debug-item><span class=debug-label>:</span><span class=debug-value>"),ku=F('<div class=debug-info><h5></h5><div class=debug-details><div class=debug-item><span class=debug-label>:</span><span class=debug-value></span></div><div class=debug-item><span class=debug-label>:</span><span class=debug-value></span></div><div class=debug-item><span class=debug-label>:</span><span class=debug-value></span></div><div class=debug-item><span class=debug-label>:</span><span class=debug-value> × </span></div></div><button class="button secondary">'),Cu=F('<div class=advanced-settings><div class=section-header><h3></h3></div><div class=settings-sections><div class=settings-section><h4></h4><div class=setting-group><label class=setting-label></label><input type=number min=1 class=number-input><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div></div><div class=settings-section><h4></h4><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><label class=checkbox-setting><input type=checkbox><span class=checkmark></span><span class=setting-label></span></label><div class=setting-description></div></div><div class=setting-group><button class="button secondary"></button></div></div><div class=settings-section><h4></h4><div class=setting-group><button class="button secondary"></button><div class=setting-description></div></div><div class=setting-group><button class="button secondary"></button><div class=setting-description></div></div><div class=setting-group><label class=setting-label> (<!>)</label><input type=number min=0 max=60 class=number-input><div class=setting-description>');const Pu=()=>{const[t]=Fe("settings"),[e,s]=Q(!1),i=()=>{if(confirm(t("confirm_clear_cache")))try{localStorage.clear(),P.setError(null),alert(t("cache_cleared_success"))}catch(c){console.error("Failed to clear cache:",c),P.setError(t("cache_clear_failed"))}},n=()=>{P.setPanelWidth("partsWidth",300),P.setActiveTab("parts")},r=()=>{const a={timestamp:new Date().toISOString(),platform:navigator.platform,userAgent:navigator.userAgent,language:navigator.language,viewport:{width:window.innerWidth,height:window.innerHeight},globalState:{ui:b.ui,config:b.config,partsCount:b.app.parts.length,sheetsCount:b.app.sheets.length,nestsCount:b.app.nests.length,presetsCount:b.presets.length},performance:{memory:performance.memory?{usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit}:null}},c=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),d=URL.createObjectURL(c),g=document.createElement("a");g.href=d,g.download=`deepnest-debug-${Date.now()}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(d)},l=a=>{if(a===0)return"0 Bytes";const c=1024,d=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(a)/Math.log(c));return parseFloat((a/Math.pow(c,g)).toFixed(2))+" "+d[g]};return(()=>{var a=Cu(),c=a.firstChild,d=c.firstChild,g=c.nextSibling,u=g.firstChild,m=u.firstChild,f=m.nextSibling,h=f.firstChild,p=h.nextSibling,_=p.nextSibling,x=f.nextSibling,$=x.firstChild,L=$.firstChild,S=L.nextSibling,R=S.nextSibling,X=$.nextSibling,M=x.nextSibling,D=M.firstChild,v=D.firstChild,y=v.nextSibling,H=y.nextSibling,j=D.nextSibling,z=u.nextSibling,C=z.firstChild,B=C.nextSibling,T=B.firstChild,U=T.firstChild,G=U.nextSibling,J=G.nextSibling,O=T.nextSibling,N=B.nextSibling,V=N.firstChild,I=V.firstChild,W=I.nextSibling,se=W.nextSibling,oe=V.nextSibling,ne=N.nextSibling,ue=ne.firstChild,$e=z.nextSibling,xe=$e.firstChild,be=xe.nextSibling,ge=be.firstChild,Se=ge.nextSibling,pe=be.nextSibling,Pe=pe.firstChild,Le=Pe.nextSibling,De=pe.nextSibling,we=De.firstChild,Re=we.firstChild,ke=Re.nextSibling;ke.nextSibling;var Oe=we.nextSibling,Ie=Oe.nextSibling;return o(d,()=>t("advanced_settings")),o(m,()=>t("performance")),o(h,()=>t("worker_threads")),p.$$input=E=>P.updateConfig({...b.config,workerThreads:parseInt(E.currentTarget.value)||4}),o(_,()=>t("worker_threads_description",{max:navigator.hardwareConcurrency||8})),L.addEventListener("change",E=>P.updateConfig({...b.config,enableGPU:E.currentTarget.checked})),o(R,()=>t("enable_gpu_acceleration")),o(X,()=>t("gpu_acceleration_description")),v.addEventListener("change",E=>P.updateConfig({...b.config,enableCaching:E.currentTarget.checked})),o(H,()=>t("enable_caching")),o(j,()=>t("caching_description")),o(C,()=>t("debugging")),U.addEventListener("change",E=>P.updateConfig({...b.config,debugMode:E.currentTarget.checked})),o(J,()=>t("debug_mode")),o(O,()=>t("debug_mode_description")),I.addEventListener("change",E=>P.updateConfig({...b.config,verboseLogging:E.currentTarget.checked})),o(se,()=>t("verbose_logging")),o(oe,()=>t("verbose_logging_description")),ue.$$click=()=>s(!e()),o(ue,(()=>{var E=qe(()=>!!e());return()=>E()?t("hide_debug_info"):t("show_debug_info")})()),o(ne,k(te,{get when(){return e()},get children(){var E=ku(),re=E.firstChild,ae=re.nextSibling,Z=ae.firstChild,le=Z.firstChild,Ce=le.firstChild,fe=le.nextSibling,Ne=Z.nextSibling,q=Ne.firstChild,me=q.firstChild,ze=q.nextSibling,Ge=Ne.nextSibling,Ve=Ge.firstChild,Je=Ve.firstChild,Me=Ve.nextSibling,tt=Ge.nextSibling,je=tt.firstChild,rt=je.firstChild,Ze=je.nextSibling,st=Ze.firstChild,Ye=ae.nextSibling;return o(re,()=>t("system_information")),o(le,()=>t("platform"),Ce),o(fe,()=>navigator.platform),o(q,()=>t("language"),me),o(ze,()=>navigator.language),o(Ve,()=>t("cpu_cores"),Je),o(Me,()=>navigator.hardwareConcurrency||"Unknown"),o(je,()=>t("viewport"),rt),o(Ze,()=>window.innerWidth,st),o(Ze,()=>window.innerHeight,null),o(ae,k(te,{get when(){return performance.memory},get children(){return[(()=>{var Be=Os(),w=Be.firstChild,ve=w.firstChild,Ke=w.nextSibling;return o(w,()=>t("memory_used"),ve),o(Ke,()=>l(performance.memory.usedJSHeapSize)),Be})(),(()=>{var Be=Os(),w=Be.firstChild,ve=w.firstChild,Ke=w.nextSibling;return o(w,()=>t("memory_total"),ve),o(Ke,()=>l(performance.memory.totalJSHeapSize)),Be})()]}}),null),Ye.$$click=r,o(Ye,()=>t("export_debug_info")),E}}),null),o(xe,()=>t("maintenance")),ge.$$click=i,o(ge,()=>t("clear_cache")),o(Se,()=>t("clear_cache_description")),Pe.$$click=n,o(Pe,()=>t("reset_layout")),o(Le,()=>t("reset_layout_description")),o(we,()=>t("auto_save_interval"),Re),o(we,()=>t("minutes"),ke),Oe.$$input=E=>P.updateConfig({...b.config,autoSaveInterval:parseInt(E.currentTarget.value)||5}),o(Ie,()=>t("auto_save_description")),A(()=>Y(p,"max",navigator.hardwareConcurrency||8)),A(()=>p.value=b.config.workerThreads||navigator.hardwareConcurrency||4),A(()=>L.checked=b.config.enableGPU||!1),A(()=>v.checked=b.config.enableCaching!==!1),A(()=>U.checked=b.config.debugMode||!1),A(()=>I.checked=b.config.verboseLogging||!1),A(()=>Oe.value=b.config.autoSaveInterval||5),a})()};Ee(["input","click"]);var Lu=F('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class=btn-secondary>📁 </button><button class=btn-secondary>📤 </button><button class=btn-secondary>🔄 </button></div></div><div class="flex-1 flex overflow-hidden"><div class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700"><div class=p-4></div></div><div class="flex-1 overflow-y-auto">'),Ou=F("<button><span class=text-lg></span><span class=font-medium>");const Au=()=>{const[t]=Fe("settings"),[e,s]=Q("presets"),i=async()=>{if(confirm(t("confirm_reset_defaults")))try{P.resetToDefaults(),ee.isAvailable&&await ee.saveConfig(b.config)}catch(c){console.error("Failed to reset to defaults:",c),P.setError(t("reset_failed"))}},n=async()=>{if(ee.isAvailable)try{const a=await ee.saveFileDialog({title:t("export_configuration"),defaultPath:"deepnest-config.json",filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}]});if(a.canceled||!a.filePath)return;await ee.exportConfig(b.config,a.filePath)}catch(a){console.error("Failed to export config:",a),P.setError(t("export_failed"))}},r=async()=>{if(ee.isAvailable)try{const a=await ee.openFileDialog({title:t("import_configuration"),filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}],properties:["openFile"]});if(a.canceled||!a.filePaths?.length)return;const c=await ee.importConfig(a.filePaths[0]);P.updateConfig(c)}catch(a){console.error("Failed to import config:",a),P.setError(t("import_failed"))}},l=[{id:"presets",label:t("preset_management"),icon:"💾"},{id:"algorithm",label:t("algorithm_settings"),icon:"⚙️"},{id:"ui",label:t("ui_preferences"),icon:"🎨"},{id:"advanced",label:t("advanced_settings"),icon:"🔧"}];return(()=>{var a=Lu(),c=a.firstChild,d=c.firstChild,g=d.nextSibling,u=g.firstChild;u.firstChild;var m=u.nextSibling;m.firstChild;var f=m.nextSibling;f.firstChild;var h=c.nextSibling,p=h.firstChild,_=p.firstChild,x=p.nextSibling;return o(d,()=>t("settings_title")),u.$$click=r,o(u,()=>t("import"),null),m.$$click=n,o(m,()=>t("export"),null),f.$$click=i,o(f,()=>t("reset_defaults"),null),o(_,k(Te,{each:l,children:$=>(()=>{var L=Ou(),S=L.firstChild,R=S.nextSibling;return L.$$click=()=>s($.id),o(S,()=>$.icon),o(R,()=>$.label),A(()=>He(L,`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors ${e()===$.id?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`)),L})()})),o(x,k(te,{get when(){return e()==="presets"},get children(){return k(vu,{})}}),null),o(x,k(te,{get when(){return e()==="algorithm"},get children(){return k($u,{})}}),null),o(x,k(te,{get when(){return e()==="ui"},get children(){return k(wu,{})}}),null),o(x,k(te,{get when(){return e()==="advanced"},get children(){return k(Pu,{})}}),null),A($=>{var L=t("import_configuration"),S=t("export_configuration"),R=t("reset_to_defaults");return L!==$.e&&Y(u,"title",$.e=L),S!==$.t&&Y(m,"title",$.t=S),R!==$.a&&Y(f,"title",$.a=R),$},{e:void 0,t:void 0,a:void 0}),a})()};Ee(["click"]);var Eu=F('<main class="flex-1 overflow-hidden bg-gray-50 dark:bg-gray-900">');const Fu=()=>(()=>{var t=Eu();return o(t,k(ui,{get children(){return[k(At,{get when(){return b.ui.activeTab==="parts"},get children(){return k(Pd,{})}}),k(At,{get when(){return b.ui.activeTab==="nests"},get children(){return k(Xd,{})}}),k(At,{get when(){return b.ui.activeTab==="sheets"},get children(){return k(uu,{})}}),k(At,{get when(){return b.ui.activeTab==="settings"},get children(){return k(Au,{})}})]}})),t})();var Ru=F('<div class="flex items-center gap-2"><div class="progress-bar w-24"><div class="progress-fill progress-fill-primary"></div></div><span class="text-deepnest-text-secondary dark:text-deepnest-dark-text-secondary min-w-12 text-right">%'),Nu=F("<span class=thread-count>"),Tu=F("<span class=parts-count>"),Du=F("<span class=nests-count>"),Iu=F('<div class="flex items-center gap-1 text-red-500"><span class=error-icon>⚠️</span><span class="error-text max-w-64 text-truncate">'),Mu=F('<footer class="h-8 bg-deepnest-bg-secondary dark:bg-deepnest-dark-bg-secondary border-t border-deepnest-border dark:border-deepnest-dark-border flex items-center justify-between px-4 text-xs"><div class="flex items-center gap-4"><span class="text-deepnest-text-primary dark:text-deepnest-dark-text-primary"></span></div><div class="flex items-center gap-4 text-deepnest-text-secondary dark:text-deepnest-dark-text-secondary">');const ju=()=>{const[t]=Fe("common"),e=de(()=>{const{process:i}=b;return i.isNesting?t("status.nesting_in_progress"):i.lastError?t("status.error_occurred"):i.workerStatus.isRunning?i.workerStatus.currentOperation||t("status.processing"):t("status.ready")}),s=de(()=>Math.max(0,Math.min(100,b.process.progress)));return(()=>{var i=Mu(),n=i.firstChild,r=n.firstChild,l=n.nextSibling;return o(r,e),o(n,k(te,{get when(){return b.process.isNesting},get children(){var a=Ru(),c=a.firstChild,d=c.firstChild,g=c.nextSibling,u=g.firstChild;return o(g,()=>s().toFixed(1),u),A(m=>(m=`${s()}%`)!=null?d.style.setProperty("width",m):d.style.removeProperty("width")),a}}),null),o(l,k(te,{get when(){return b.process.workerStatus.threadsActive>0},get children(){var a=Nu();return o(a,()=>t("status.threads_active",{count:b.process.workerStatus.threadsActive})),a}}),null),o(l,k(te,{get when(){return b.app.parts.length>0},get children(){var a=Tu();return o(a,()=>t("status.parts_loaded",{count:b.app.parts.length})),a}}),null),o(l,k(te,{get when(){return b.app.nests.length>0},get children(){var a=Du();return o(a,()=>t("status.nests_available",{count:b.app.nests.length})),a}}),null),o(l,k(te,{get when(){return b.process.lastError},get children(){var a=Iu(),c=a.firstChild,d=c.nextSibling;return o(d,()=>b.process.lastError),a}}),null),i})()};var Uu=F('<div><div class=resizable-left></div><div class=resizable-handle title="Drag to resize"><div class=resizable-handle-line></div></div><div class=resizable-right>');const zu=t=>{const{minLeftWidth:e=250,maxLeftWidth:s=500,defaultLeftWidth:i=300}=t,[n,r]=Q(!1),[l,a]=Q(b.ui.panels.partsWidth||i);let c,d;const g=f=>{f.preventDefault(),r(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},u=f=>{if(!n()||!c)return;const h=c.getBoundingClientRect(),p=f.clientX-h.left,_=Math.max(e,Math.min(s,p));a(_),P.setPanelWidth("partsWidth",_)},m=()=>{r(!1),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""};return rs(()=>{a(b.ui.panels.partsWidth||i)}),Fs(()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""}),(()=>{var f=Uu(),h=f.firstChild,p=h.nextSibling,_=p.nextSibling,x=c;typeof x=="function"?cs(x,f):c=f,o(h,()=>t.left),p.$$mousedown=g;var $=d;return typeof $=="function"?cs($,p):d=p,o(_,()=>t.right),A(L=>{var S=`resizable-layout ${n()?"resizing":""}`,R=`${l()}px`;return S!==L.e&&He(f,L.e=S),R!==L.t&&((L.t=R)!=null?h.style.setProperty("width",R):h.style.removeProperty("width")),L},{e:void 0,t:void 0}),f})()};Ee(["mousedown"]);var Vu=F('<div class="h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100"><div class="flex-1 flex overflow-hidden">');const Bu=()=>(()=>{var t=Vu(),e=t.firstChild;return o(t,k(bd,{}),e),o(e,k(zu,{get left(){return k(yd,{})},get right(){return k(Fu,{})},minLeftWidth:200,maxLeftWidth:600,defaultLeftWidth:300})),o(t,k(ju,{}),null),t})();var Ku=F("<div class=app>");const Hu=()=>{rs(async()=>{if(P.setDarkMode(b.ui.darkMode),t(),ee.isAvailable)try{const e=await ee.readConfig();P.updateConfig(e)}catch(e){console.warn("Failed to load initial config:",e)}});const t=()=>{ee.isAvailable&&(ee.onNestProgress(e=>{P.setNestingProgress(e)}),ee.onNestComplete(e=>{P.setNests(e),P.setNestingStatus(!1)}),ee.onBackgroundProgress(e=>{P.setNestingProgress(e.progress)}),ee.onWorkerStatus(e=>{P.setWorkerStatus(e)}),ee.onNestError(e=>{P.setError(e),P.setNestingStatus(!1)}))};return k(sd,{get children(){var e=Ku();return o(e,k(Bu,{})),e}})},qu=document.getElementById("root");fi(()=>k(Hu,{}),qu);
