(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const Gs=!1,Qs=(t,e)=>t===e,je=Symbol("solid-proxy"),Dt=Symbol("solid-track"),mt={equals:Qs};let xs=Ns;const Te=1,vt=2,ws={owned:null,cleanups:null,context:null,owner:null};var Z=null;let Ft=null,Xs=null,re=null,fe=null,Ne=null,Lt=0;function pt(t,e){const s=re,n=Z,i=t.length===0,r=e===void 0?n:e,a=i?ws:{owned:null,cleanups:null,context:r?r.context:null,owner:r},o=i?t:()=>t(()=>Se(()=>it(a)));Z=a,re=null;try{return Ge(o,!0)}finally{re=s,Z=n}}function Y(t,e){e=e?Object.assign({},mt,e):mt;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.value)),Os(s,i));return[Ls.bind(s),n]}function j(t,e,s){const n=Bt(t,e,!1,Te);ct(n)}function Cs(t,e,s){xs=nn;const n=Bt(t,e,!1,Te);n.user=!0,Ne?Ne.push(n):ct(n)}function J(t,e,s){s=s?Object.assign({},mt,s):mt;const n=Bt(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,ct(n),Ls.bind(n)}function Ys(t){return Ge(t,!1)}function Se(t){if(re===null)return t();const e=re;re=null;try{return t()}finally{re=e}}function Kt(t){Cs(()=>Se(t))}function ks(t){return Z===null||(Z.cleanups===null?Z.cleanups=[t]:Z.cleanups.push(t)),t}function Mt(){return re}function Zs(t,e){const s=Symbol("context");return{id:s,Provider:an(s),defaultValue:t}}function en(t){let e;return Z&&Z.context&&(e=Z.context[t.id])!==void 0?e:t.defaultValue}function Ps(t){const e=J(t),s=J(()=>Ut(e()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}function Ls(){if(this.sources&&this.state)if(this.state===Te)ct(this);else{const t=fe;fe=null,Ge(()=>bt(this),!1),fe=t}if(re){const t=this.observers?this.observers.length:0;re.sources?(re.sources.push(this),re.sourceSlots.push(t)):(re.sources=[this],re.sourceSlots=[t]),this.observers?(this.observers.push(re),this.observerSlots.push(re.sources.length-1)):(this.observers=[re],this.observerSlots=[re.sources.length-1])}return this.value}function Os(t,e,s){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&Ge(()=>{for(let i=0;i<t.observers.length;i+=1){const r=t.observers[i],a=Ft&&Ft.running;a&&Ft.disposed.has(r),(a?!r.tState:!r.state)&&(r.pure?fe.push(r):Ne.push(r),r.observers&&As(r)),a||(r.state=Te)}if(fe.length>1e6)throw fe=[],new Error},!1)),e}function ct(t){if(!t.fn)return;it(t);const e=Lt;tn(t,t.value,e)}function tn(t,e,s){let n;const i=Z,r=re;re=Z=t;try{n=t.fn(e)}catch(a){return t.pure&&(t.state=Te,t.owned&&t.owned.forEach(it),t.owned=null),t.updatedAt=s+1,Es(a)}finally{re=r,Z=i}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Os(t,n):t.value=n,t.updatedAt=s)}function Bt(t,e,s,n=Te,i){const r={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Z,context:Z?Z.context:null,pure:s};return Z===null||Z!==ws&&(Z.owned?Z.owned.push(r):Z.owned=[r]),r}function _t(t){if(t.state===0)return;if(t.state===vt)return bt(t);if(t.suspense&&Se(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Lt);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===Te)ct(t);else if(t.state===vt){const n=fe;fe=null,Ge(()=>bt(t,e[0]),!1),fe=n}}function Ge(t,e){if(fe)return t();let s=!1;e||(fe=[]),Ne?s=!0:Ne=[],Lt++;try{const n=t();return sn(s),n}catch(n){s||(Ne=null),fe=null,Es(n)}}function sn(t){if(fe&&(Ns(fe),fe=null),t)return;const e=Ne;Ne=null,e.length&&Ge(()=>xs(e),!1)}function Ns(t){for(let e=0;e<t.length;e++)_t(t[e])}function nn(t){let e,s=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[s++]=n:_t(n)}for(e=0;e<s;e++)_t(t[e])}function bt(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const n=t.sources[s];if(n.sources){const i=n.state;i===Te?n!==e&&(!n.updatedAt||n.updatedAt<Lt)&&_t(n):i===vt&&bt(n,e)}}}function As(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=vt,s.pure?fe.push(s):Ne.push(s),s.observers&&As(s))}}function it(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),n=t.sourceSlots.pop(),i=s.observers;if(i&&i.length){const r=i.pop(),a=s.observerSlots.pop();n<i.length&&(r.sourceSlots[a]=n,i[n]=r,s.observerSlots[n]=a)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)it(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)it(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function rn(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Es(t,e=Z){throw rn(t)}function Ut(t){if(typeof t=="function"&&!t.length)return Ut(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const n=Ut(t[s]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function an(t,e){return function(n){let i;return j(()=>i=Se(()=>(Z.context={...Z.context,[t]:n.value},Ps(()=>n.children))),void 0),i}}const on=Symbol("fallback");function ns(t){for(let e=0;e<t.length;e++)t[e]()}function ln(t,e,s={}){let n=[],i=[],r=[],a=0,o=e.length>1?[]:null;return ks(()=>ns(r)),()=>{let l=t()||[],u=l.length,f,h;return l[Dt],Se(()=>{let g,p,m,v,y,x,A,_,w;if(u===0)a!==0&&(ns(r),r=[],n=[],i=[],a=0,o&&(o=[])),s.fallback&&(n=[on],i[0]=pt(D=>(r[0]=D,s.fallback())),a=1);else if(a===0){for(i=new Array(u),h=0;h<u;h++)n[h]=l[h],i[h]=pt(d);a=u}else{for(m=new Array(u),v=new Array(u),o&&(y=new Array(u)),x=0,A=Math.min(a,u);x<A&&n[x]===l[x];x++);for(A=a-1,_=u-1;A>=x&&_>=x&&n[A]===l[_];A--,_--)m[_]=i[A],v[_]=r[A],o&&(y[_]=o[A]);for(g=new Map,p=new Array(_+1),h=_;h>=x;h--)w=l[h],f=g.get(w),p[h]=f===void 0?-1:f,g.set(w,h);for(f=x;f<=A;f++)w=n[f],h=g.get(w),h!==void 0&&h!==-1?(m[h]=i[f],v[h]=r[f],o&&(y[h]=o[f]),h=p[h],g.set(w,h)):r[f]();for(h=x;h<u;h++)h in m?(i[h]=m[h],r[h]=v[h],o&&(o[h]=y[h],o[h](h))):i[h]=pt(d);i=i.slice(0,a=u),n=l.slice(0)}return i});function d(g){if(r[h]=g,o){const[p,m]=Y(h);return o[h]=m,e(l[h],p)}return e(l[h])}}}function S(t,e){return Se(()=>t(e||{}))}const Rs=t=>`Stale read from <${t}>.`;function Ae(t){const e="fallback"in t&&{fallback:()=>t.fallback};return J(ln(()=>t.each,t.children,e||void 0))}function H(t){const e=t.keyed,s=J(()=>t.when,void 0,void 0),n=e?s:J(s,void 0,{equals:(i,r)=>!i==!r});return J(()=>{const i=n();if(i){const r=t.children;return typeof r=="function"&&r.length>0?Se(()=>r(e?i:()=>{if(!Se(n))throw Rs("Show");return s()})):r}return t.fallback},void 0,void 0)}function cn(t){const e=Ps(()=>t.children),s=J(()=>{const n=e(),i=Array.isArray(n)?n:[n];let r=()=>{};for(let a=0;a<i.length;a++){const o=a,l=i[a],u=r,f=J(()=>u()?void 0:l.when,void 0,void 0),h=l.keyed?f:J(f,void 0,{equals:(d,g)=>!d==!g});r=()=>u()||(h()?[o,f,l]:void 0)}return r});return J(()=>{const n=s()();if(!n)return t.fallback;const[i,r,a]=n,o=a.children;return typeof o=="function"&&o.length>0?Se(()=>o(a.keyed?r():()=>{if(Se(s)()?.[0]!==i)throw Rs("Match");return r()})):o},void 0,void 0)}function ht(t){return t}const Fe=t=>J(()=>t());function un(t,e,s){let n=s.length,i=e.length,r=n,a=0,o=0,l=e[i-1].nextSibling,u=null;for(;a<i||o<r;){if(e[a]===s[o]){a++,o++;continue}for(;e[i-1]===s[r-1];)i--,r--;if(i===a){const f=r<n?o?s[o-1].nextSibling:s[r-o]:l;for(;o<r;)t.insertBefore(s[o++],f)}else if(r===o)for(;a<i;)(!u||!u.has(e[a]))&&e[a].remove(),a++;else if(e[a]===s[r-1]&&s[o]===e[i-1]){const f=e[--i].nextSibling;t.insertBefore(s[o++],e[a++].nextSibling),t.insertBefore(s[--r],f),e[i]=s[r]}else{if(!u){u=new Map;let h=o;for(;h<r;)u.set(s[h],h++)}const f=u.get(e[a]);if(f!=null)if(o<f&&f<r){let h=a,d=1,g;for(;++h<i&&h<r&&!((g=u.get(e[h]))==null||g!==f+d);)d++;if(d>f-o){const p=e[a];for(;o<f;)t.insertBefore(s[o++],p)}else t.replaceChild(s[o++],e[a++])}else a++;else e[a++].remove()}}}const is="_$DX_DELEGATE";function dn(t,e,s,n={}){let i;return pt(r=>{i=r,e===document?t():c(e,t(),e.firstChild?null:void 0,s)},n.owner),()=>{i(),e.textContent=""}}function L(t,e,s,n){let i;const r=()=>{const o=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return o.innerHTML=t,s?o.content.firstChild.firstChild:n?o.firstChild:o.content.firstChild},a=e?()=>Se(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return a.cloneNode=a,a}function xe(t,e=window.document){const s=e[is]||(e[is]=new Set);for(let n=0,i=t.length;n<i;n++){const r=t[n];s.has(r)||(s.add(r),e.addEventListener(r,hn))}}function q(t,e,s){s==null?t.removeAttribute(e):t.setAttribute(e,s)}function Oe(t,e){e==null?t.removeAttribute("class"):t.className=e}function fn(t,e,s,n){Array.isArray(s)?(t[`$$${e}`]=s[0],t[`$$${e}Data`]=s[1]):t[`$$${e}`]=s}function rs(t,e,s){return Se(()=>t(e,s))}function c(t,e,s,n){if(s!==void 0&&!n&&(n=[]),typeof e!="function")return $t(t,e,n,s);j(i=>$t(t,e(),i,s),n)}function hn(t){let e=t.target;const s=`$$${t.type}`,n=t.target,i=t.currentTarget,r=l=>Object.defineProperty(t,"target",{configurable:!0,value:l}),a=()=>{const l=e[s];if(l&&!e.disabled){const u=e[`${s}Data`];if(u!==void 0?l.call(e,u,t):l.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&r(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const l=t.composedPath();r(l[0]);for(let u=0;u<l.length-2&&(e=l[u],!!a());u++){if(e._$host){e=e._$host,o();break}if(e.parentNode===i)break}}else o();r(n)}function $t(t,e,s,n,i){for(;typeof s=="function";)s=s();if(e===s)return s;const r=typeof e,a=n!==void 0;if(t=a&&s[0]&&s[0].parentNode||t,r==="string"||r==="number"){if(r==="number"&&(e=e.toString(),e===s))return s;if(a){let o=s[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),s=qe(t,s,n,o)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||r==="boolean")s=qe(t,s,n);else{if(r==="function")return j(()=>{let o=e();for(;typeof o=="function";)o=o();s=$t(t,o,s,n)}),()=>s;if(Array.isArray(e)){const o=[],l=s&&Array.isArray(s);if(jt(o,e,s,i))return j(()=>s=$t(t,o,s,n,!0)),()=>s;if(o.length===0){if(s=qe(t,s,n),a)return s}else l?s.length===0?as(t,o,n):un(t,s,o):(s&&qe(t),as(t,o));s=o}else if(e.nodeType){if(Array.isArray(s)){if(a)return s=qe(t,s,n,e);qe(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function jt(t,e,s,n){let i=!1;for(let r=0,a=e.length;r<a;r++){let o=e[r],l=s&&s[t.length],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))i=jt(t,o,l)||i;else if(u==="function")if(n){for(;typeof o=="function";)o=o();i=jt(t,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||i}else t.push(o),i=!0;else{const f=String(o);l&&l.nodeType===3&&l.data===f?t.push(l):t.push(document.createTextNode(f))}}return i}function as(t,e,s=null){for(let n=0,i=e.length;n<i;n++)t.insertBefore(e[n],s)}function qe(t,e,s,n){if(s===void 0)return t.textContent="";const i=n||document.createTextNode("");if(e.length){let r=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(i!==o){const l=o.parentNode===t;!r&&!a?l?t.replaceChild(i,o):t.insertBefore(i,s):l&&o.remove()}else r=!0}}else t.insertBefore(i,s);return[i]}const N=t=>typeof t=="string",Ye=()=>{let t,e;const s=new Promise((n,i)=>{t=n,e=i});return s.resolve=t,s.reject=e,s},os=t=>t==null?"":""+t,gn=(t,e,s)=>{t.forEach(n=>{e[n]&&(s[n]=e[n])})},pn=/###/g,ls=t=>t&&t.indexOf("###")>-1?t.replace(pn,"."):t,cs=t=>!t||N(t),nt=(t,e,s)=>{const n=N(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(cs(t))return{};const r=ls(n[i]);!t[r]&&s&&(t[r]=new s),Object.prototype.hasOwnProperty.call(t,r)?t=t[r]:t={},++i}return cs(t)?{}:{obj:t,k:ls(n[i])}},us=(t,e,s)=>{const{obj:n,k:i}=nt(t,e,Object);if(n!==void 0||e.length===1){n[i]=s;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=nt(t,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=nt(t,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=s},mn=(t,e,s,n)=>{const{obj:i,k:r}=nt(t,e,Object);i[r]=i[r]||[],i[r].push(s)},yt=(t,e)=>{const{obj:s,k:n}=nt(t,e);if(s)return s[n]},vn=(t,e,s)=>{const n=yt(t,s);return n!==void 0?n:yt(e,s)},Fs=(t,e,s)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?N(t[n])||t[n]instanceof String||N(e[n])||e[n]instanceof String?s&&(t[n]=e[n]):Fs(t[n],e[n],s):t[n]=e[n]);return t},We=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const bn=t=>N(t)?t.replace(/[&<>"'\/]/g,e=>_n[e]):t;class $n{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const yn=[" ",",","?","!",";"],Sn=new $n(20),xn=(t,e,s)=>{e=e||"",s=s||"";const n=yn.filter(a=>e.indexOf(a)<0&&s.indexOf(a)<0);if(n.length===0)return!0;const i=Sn.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(t);if(!r){const a=t.indexOf(s);a>0&&!i.test(t.substring(0,a))&&(r=!0)}return r},zt=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const n=e.split(s);let i=t;for(let r=0;r<n.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=r;l<n.length;++l)if(l!==r&&(o+=s),o+=n[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;r+=l-r+1;break}i=a}return i},St=t=>t&&t.replace("_","-"),wn={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class xt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,s)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=e||wn,this.options=s,this.debug=s.debug}log(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"log","",!0)}warn(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","",!0)}error(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"error","")}deprecate(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,n,i){return i&&!this.debug?null:(N(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new xt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new xt(this.logger,e)}}var ke=new xt;class Ot{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(s)||0;this.observers[n].set(s,i+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[e,...n])})}}class ds extends Ot{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,s],n&&(Array.isArray(n)?o.push(...n):N(n)&&r?o.push(...n.split(r)):o.push(n)));const l=yt(this.data,o);return!l&&!s&&!n&&e.indexOf(".")>-1&&(e=o[0],s=o[1],n=o.slice(2).join(".")),l||!a||!N(n)?l:zt(this.data&&this.data[e]&&this.data[e][s],n,r)}addResource(e,s,n,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,s];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),i=s,s=o[1]),this.addNamespaces(s),us(this.data,o,i),r.silent||this.emit("added",e,s,n,i)}addResources(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in n)(N(n[r])||Array.isArray(n[r]))&&this.addResource(e,s,r,n[r],{silent:!0});i.silent||this.emit("added",e,s,n)}addResourceBundle(e,s,n,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,s];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=s,s=o[1]),this.addNamespaces(s);let l=yt(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Fs(l,n,r):l={...l,...n},us(this.data,o,l),a.silent||this.emit("added",e,s,n)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,s)}:this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var Ts={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,n,i){return t.forEach(r=>{this.processors[r]&&(e=this.processors[r].process(e,s,n,i))}),e}};const fs={};class wt extends Ot{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),gn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ke.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,s);return n&&n.res!==void 0}extractFromKey(e,s){let n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let r=s.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!xn(e,n,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:N(r)?[r]:r};const u=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(r=u.shift()),e=u.join(i)}return{key:e,namespaces:N(r)?[r]:r}}translate(e,s,n){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],s),l=o[o.length-1],u=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(f){const _=s.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${_}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:`${l}${_}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:a}const h=this.resolve(e,s);let d=h&&h.res;const g=h&&h.usedKey||a,p=h&&h.exactUsedKey||a,m=Object.prototype.toString.apply(d),v=["[object Number]","[object Function]","[object RegExp]"],y=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,A=!N(d)&&typeof d!="boolean"&&typeof d!="number";if(x&&d&&A&&v.indexOf(m)<0&&!(N(y)&&Array.isArray(d))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,d,{...s,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=_,h.usedParams=this.getUsedParamsDetails(s),h):_}if(r){const _=Array.isArray(d),w=_?[]:{},D=_?p:g;for(const P in d)if(Object.prototype.hasOwnProperty.call(d,P)){const U=`${D}${r}${P}`;w[P]=this.translate(U,{...s,joinArrays:!1,ns:o}),w[P]===U&&(w[P]=d[P])}d=w}}else if(x&&N(y)&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,e,s,n));else{let _=!1,w=!1;const D=s.count!==void 0&&!N(s.count),P=wt.hasDefaultValue(s),U=D?this.pluralResolver.getSuffix(u,s.count,s):"",C=s.ordinal&&D?this.pluralResolver.getSuffix(u,s.count,{ordinal:!1}):"",B=D&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),O=B&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${U}`]||s[`defaultValue${C}`]||s.defaultValue;!this.isValidLookup(d)&&P&&(_=!0,d=O),this.isValidLookup(d)||(w=!0,d=a);const E=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:d,R=P&&O!==d&&this.options.updateMissing;if(w||_||R){if(this.logger.log(R?"updateKey":"missingKey",u,l,a,R?O:d),r){const M=this.resolve(a,{...s,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let T=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let M=0;M<K.length;M++)T.push(K[M]);else this.options.saveMissingTo==="all"?T=this.languageUtils.toResolveHierarchy(s.lng||this.language):T.push(s.lng||this.language);const ee=(M,z,k)=>{const W=P&&k!==d?k:E;this.options.missingKeyHandler?this.options.missingKeyHandler(M,l,z,W,R,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(M,l,z,W,R,s),this.emit("missingKey",M,l,z,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?T.forEach(M=>{const z=this.pluralResolver.getSuffixes(M,s);B&&s[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(k=>{ee([M],a+k,s[`defaultValue${k}`]||O)})}):ee(T,a,O))}d=this.extendTranslation(d,e,s,h,n),w&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${a}`),(w||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,_?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(h.res=d,h.usedParams=this.getUsedParamsDetails(s),h):d}extendTranslation(e,s,n,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=N(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(u){const d=e.match(this.interpolator.nestingRegexp);f=d&&d.length}let h=n.replace&&!N(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,n.lng||this.language||i.usedLng,n),u){const d=e.match(this.interpolator.nestingRegexp),g=d&&d.length;f<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,g=new Array(d),p=0;p<d;p++)g[p]=arguments[p];return r&&r[0]===g[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${s[0]}`),null):a.translate(...g,s)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=N(o)?[o]:o;return e!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(e=Ts.handle(l,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,r,a,o;return N(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,s),f=u.key;i=f;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=s.count!==void 0&&!N(s.count),g=d&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),p=s.context!==void 0&&(N(s.context)||typeof s.context=="number")&&s.context!=="",m=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);h.forEach(v=>{this.isValidLookup(n)||(o=v,!fs[`${m[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(fs[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(y=>{if(this.isValidLookup(n))return;a=y;const x=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,f,y,v,s);else{let _;d&&(_=this.pluralResolver.getSuffix(y,s.count,s));const w=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(x.push(f+_),s.ordinal&&_.indexOf(D)===0&&x.push(f+_.replace(D,this.options.pluralSeparator)),g&&x.push(f+w)),p){const P=`${f}${this.options.contextSeparator}${s.context}`;x.push(P),d&&(x.push(P+_),s.ordinal&&_.indexOf(D)===0&&x.push(P+_.replace(D,this.options.pluralSeparator)),g&&x.push(P+w))}}let A;for(;A=x.pop();)this.isValidLookup(n)||(r=A,n=this.getResource(y,v,A,s))}))})}),{res:n,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,s,n,i):this.resourceStore.getResource(e,s,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!N(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const r of s)delete i[r]}return i}static hasDefaultValue(e){const s="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&s===n.substring(0,s.length)&&e[n]!==void 0)return!0;return!1}}const Tt=t=>t.charAt(0).toUpperCase()+t.slice(1);class hs{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ke.create("languageUtils")}getScriptPartFromCode(e){if(e=St(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=St(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(N(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const s=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Tt(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Tt(n[1].toLowerCase())),s.indexOf(n[2].toLowerCase())>-1&&(n[2]=Tt(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(n=>{if(s)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&e.forEach(n=>{if(s)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return s=i;s=this.options.supportedLngs.find(r=>{if(r===i)return r;if(!(r.indexOf("-")<0&&i.indexOf("-")<0)&&(r.indexOf("-")>0&&i.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===i||r.indexOf(i)===0&&i.length>1))return r})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),N(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let n=e[s];return n||(n=e[this.getScriptPartFromCode(s)]),n||(n=e[this.formatLanguageCode(s)]),n||(n=e[this.getLanguagePartFromCode(s)]),n||(n=e.default),n||[]}toResolveHierarchy(e,s){const n=this.getFallbackCodes(s||this.options.fallbackLng||[],e),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return N(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):N(e)&&r(this.formatLanguageCode(e)),n.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}let Cn=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],kn={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Pn=["v1","v2","v3"],Ln=["v4"],gs={zero:0,one:1,two:2,few:3,many:4,other:5},On=()=>{const t={};return Cn.forEach(e=>{e.lngs.forEach(s=>{t[s]={numbers:e.nr,plurals:kn[e.fc]}})}),t};class Nn{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=s,this.logger=ke.create("pluralResolver"),(!this.options.compatibilityJSON||Ln.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=On(),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=St(e==="dev"?"en":e),i=s.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(n,{type:i})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,s)}return this.pluralRulesCache[r]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(i=>`${s}${i}`)}getSuffixes(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,r)=>gs[i]-gs[r]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(e,i,s)):[]}getSuffix(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:this.getSuffixRetroCompatible(i,s):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,s){const n=e.noAbs?e.plurals(s):e.plurals(Math.abs(s));let i=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Pn.includes(this.options.compatibilityJSON)}}const ps=function(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=vn(t,e,s);return!r&&i&&N(s)&&(r=zt(t,s,n),r===void 0&&(r=zt(e,s,n))),r},It=t=>t.replace(/\$/g,"$$$$");class An{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ke.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(s=>s),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:f,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:y,alwaysFormat:x}=e.interpolation;this.escape=s!==void 0?s:bn,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?We(r):a||"{{",this.suffix=o?We(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=f?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=d?We(d):g||We("$t("),this.nestingSuffix=p?We(p):m||We(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=y||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,n)=>s&&s.source===n?(s.lastIndex=0,s):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,n,i){let r,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const y=ps(s,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,n,{...i,...s,interpolationkey:g}):y}const p=g.split(this.formatSeparator),m=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format(ps(s,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),v,n,{...i,...s,interpolationkey:m})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>It(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?It(this.escape(g)):It(g)}].forEach(g=>{for(o=0;r=g.regex.exec(e);){const p=r[1].trim();if(a=u(p),a===void 0)if(typeof f=="function"){const v=f(e,r,i);a=N(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))a="";else if(h){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),a="";else!N(a)&&!this.useRawValueToEscape&&(a=os(a));const m=g.safeValue(a);if(e=e.replace(r[0],m),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=r[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,a;const o=(l,u)=>{const f=this.nestingOptionsSeparator;if(l.indexOf(f)<0)return l;const h=l.split(new RegExp(`${f}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,a);const g=d.match(/'/g),p=d.match(/"/g);(g&&g.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${f}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!N(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const f=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=f.shift(),l=f,u=!0}if(r=s(o.call(this,i[1].trim(),a),a),r&&i[0]===e&&!N(r))return r;N(r)||(r=os(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),r=""),u&&(r=l.reduce((f,h)=>this.format(f,h,n.lng,{...n,interpolationkey:i[1].trim()}),r.trim())),e=e.replace(i[0],r),this.regexp.lastIndex=0}return e}}const En=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),f=o.trim();s[f]||(s[f]=u),u==="false"&&(s[f]=!1),u==="true"&&(s[f]=!0),isNaN(u)||(s[f]=parseInt(u,10))}})}return{formatName:e,formatOptions:s}},He=t=>{const e={};return(s,n,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const a=n+JSON.stringify(r);let o=e[a];return o||(o=t(St(n),i),e[a]=o),o(s)}};class Rn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ke.create("formatter"),this.options=e,this.formats={number:He((s,n)=>{const i=new Intl.NumberFormat(s,{...n});return r=>i.format(r)}),currency:He((s,n)=>{const i=new Intl.NumberFormat(s,{...n,style:"currency"});return r=>i.format(r)}),datetime:He((s,n)=>{const i=new Intl.DateTimeFormat(s,{...n});return r=>i.format(r)}),relativetime:He((s,n)=>{const i=new Intl.RelativeTimeFormat(s,{...n});return r=>i.format(r,n.range||"day")}),list:He((s,n)=>{const i=new Intl.ListFormat(s,{...n});return r=>i.format(r)})},this.init(e)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=He(s)}format(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=s.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(l=>l.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,l)=>{const{formatName:u,formatOptions:f}=En(l);if(this.formats[u]){let h=o;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},g=d.locale||d.lng||i.locale||i.lng||n;h=this.formats[u](o,g,{...f,...i,...d})}catch(d){this.logger.warn(d)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const Fn=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Tn extends Ot{constructor(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=s,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=ke.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,s,n,i){const r={},a={},o={},l={};return e.forEach(u=>{let f=!0;s.forEach(h=>{const d=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,f=!1,a[d]===void 0&&(a[d]=!0),r[d]===void 0&&(r[d]=!0),l[h]===void 0&&(l[h]=!0)))}),f||(o[u]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,s,n){const i=e.split("|"),r=i[0],a=i[1];s&&this.emit("failedLoading",r,a,s),!s&&n&&this.store.addResourceBundle(r,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{mn(l.loaded,[r],a),Fn(l,e),s&&l.errors.push(s),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const f=l.loaded[u];f.length&&f.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,s,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:n,tried:i,wait:r,callback:a});return}this.readingCalls++;const o=(u,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,n,i+1,r*2,a)},r);return}a(u,f)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,s);u&&typeof u.then=="function"?u.then(f=>o(null,f)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,s,o)}prepareLoading(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();N(e)&&(e=this.languageUtils.toResolveHierarchy(e)),N(s)&&(s=[s]);const r=this.queueLoad(e,s,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,s,n){this.prepareLoading(e,s,{},n)}reload(e,s,n){this.prepareLoading(e,s,{reload:!0},n)}loadOne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${s}loading namespace ${r} for language ${i} failed`,a),!a&&o&&this.logger.log(`${s}loaded namespace ${r} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,s,n,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${n}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:r},u=this.backend.create.bind(this.backend);if(u.length<6)try{let f;u.length===5?f=u(e,s,n,i,l):f=u(e,s,n,i),f&&typeof f.then=="function"?f.then(h=>o(null,h)).catch(o):o(null,f)}catch(f){o(f)}else u(e,s,n,i,o,l)}!e||!e[0]||this.store.addResource(e[0],s,n,i)}}}const ms=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),N(t[1])&&(e.defaultValue=t[1]),N(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(n=>{e[n]=s[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),vs=t=>(N(t.ns)&&(t.ns=[t.ns]),N(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),N(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),gt=()=>{},In=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class rt extends Ot{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=vs(e),this.services={},this.logger=ke,this.modules={external:[]},In(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(){var e=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(n=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(N(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const i=ms();this.options={...i,...this.options,...vs(s)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const r=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?ke.init(r(this.modules.logger),this.options):ke.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=Rn);const h=new hs(this.options);this.store=new ds(this.options.resources,this.options);const d=this.services;d.logger=ke,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new Nn(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=r(f),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new An(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Tn(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(g){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];e.emit(g,...m)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new wt(this.services,this.options),this.translator.on("*",function(g){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];e.emit(g,...m)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=gt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return e.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return e.store[f](...arguments),e}});const l=Ye(),u=()=>{const f=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),n(h,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt;const i=N(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const r=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&r.indexOf(u)<0&&r.push(u)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(r,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,s,n){const i=Ye();return typeof e=="function"&&(n=e,e=void 0),typeof s=="function"&&(n=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),n||(n=gt),this.services.backendConnector.reload(e,s,r=>{i.resolve(),n(r)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ts.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let s=0;s<this.languages.length;s++){const n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,s){var n=this;this.isLanguageChangingTo=e;const i=Ye();this.emit("languageChanging",e);const r=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),s&&s(l,function(){return n.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=N(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,f=>{a(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,s,n){var i=this;const r=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,f=new Array(u>2?u-2:0),h=2;h<u;h++)f[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([a,o].concat(f))}else l={...o};l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||r.keyPrefix);const d=i.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(p=>`${l.keyPrefix}${d}${p}`):g=l.keyPrefix?`${l.keyPrefix}${d}${a}`:a,i.t(g,l)};return N(e)?r.lng=e:r.lngs=e,r.ns=s,r.keyPrefix=n,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(s.precheck){const o=s.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!i||a(r,e)))}loadNamespaces(e,s){const n=Ye();return this.options.ns?(N(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),s&&s(i)}),n):(s&&s(),Promise.resolve())}loadLanguages(e,s){const n=Ye();N(e)&&(e=[e]);const i=this.options.preload||[],r=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{n.resolve(),s&&s(a)}),n):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new hs(ms());return s.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new rt(e,s)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new rt(i);return(e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n&&(r.store=new ds(this.store.data,i),r.services.resourceStore=r.store),r.translator=new wt(r.services,i),r.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];r.emit(o,...u)}),r.init(i,s),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const le=rt.createInstance();le.createInstance=rt.createInstance;le.createInstance;le.dir;le.init;le.loadResources;le.reloadResources;le.use;le.changeLanguage;le.getFixedT;le.t;le.exists;le.setDefaultNamespace;le.hasLoadedNamespace;le.loadNamespaces;le.loadLanguages;function Dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(t)}function Mn(t,e){if(at(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(at(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Un(t){var e=Mn(t,"string");return at(e)=="symbol"?e:e+""}function jn(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Un(n.key),n)}}function zn(t,e,s){return e&&jn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var Is=[],Vn=Is.forEach,Kn=Is.slice;function Bn(t){return Vn.call(Kn.call(arguments,1),function(e){if(e)for(var s in e)t[s]===void 0&&(t[s]=e[s])}),t}var _s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,qn=function(e,s,n){var i=n||{};i.path=i.path||"/";var r=encodeURIComponent(s),a="".concat(e,"=").concat(r);if(i.maxAge>0){var o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(o))}if(i.domain){if(!_s.test(i.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(i.domain)}if(i.path){if(!_s.test(i.path))throw new TypeError("option path is invalid");a+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},bs={create:function(e,s,n,i){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),i&&(r.domain=i),document.cookie=qn(e,encodeURIComponent(s),r)},read:function(e){for(var s="".concat(e,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(s)===0)return r.substring(s.length,r.length)}return null},remove:function(e){this.create(e,"",-1)}},Wn={name:"cookie",lookup:function(e){var s;if(e.lookupCookie&&typeof document<"u"){var n=bs.read(e.lookupCookie);n&&(s=n)}return s},cacheUserLanguage:function(e,s){s.lookupCookie&&typeof document<"u"&&bs.create(s.lookupCookie,e,s.cookieMinutes,s.cookieDomain,s.cookieOptions)}},Hn={name:"querystring",lookup:function(e){var s;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1),r=i.split("&"),a=0;a<r.length;a++){var o=r[a].indexOf("=");if(o>0){var l=r[a].substring(0,o);l===e.lookupQuerystring&&(s=r[a].substring(o+1))}}}return s}},Ze=null,$s=function(){if(Ze!==null)return Ze;try{Ze=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ze=!1}return Ze},Jn={name:"localStorage",lookup:function(e){var s;if(e.lookupLocalStorage&&$s()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(s=n)}return s},cacheUserLanguage:function(e,s){s.lookupLocalStorage&&$s()&&window.localStorage.setItem(s.lookupLocalStorage,e)}},et=null,ys=function(){if(et!==null)return et;try{et=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{et=!1}return et},Gn={name:"sessionStorage",lookup:function(e){var s;if(e.lookupSessionStorage&&ys()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(s=n)}return s},cacheUserLanguage:function(e,s){s.lookupSessionStorage&&ys()&&window.sessionStorage.setItem(s.lookupSessionStorage,e)}},Qn={name:"navigator",lookup:function(e){var s=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)s.push(navigator.languages[n]);navigator.userLanguage&&s.push(navigator.userLanguage),navigator.language&&s.push(navigator.language)}return s.length>0?s:void 0}},Xn={name:"htmlTag",lookup:function(e){var s,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(s=n.getAttribute("lang")),s}},Yn={name:"path",lookup:function(e){var s;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;s=n[e.lookupFromPathIndex].replace("/","")}else s=n[0].replace("/","")}return s}},Zn={name:"subdomain",lookup:function(e){var s=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[s]}},Ds=!1;try{document.cookie,Ds=!0}catch{}var Ms=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ds||Ms.splice(1,1);function ei(){return{order:Ms,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var Us=function(){function t(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dn(this,t),this.type="languageDetector",this.detectors={},this.init(e,s)}return zn(t,[{key:"init",value:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s||{languageUtils:{}},this.options=Bn(n,this.options||{},ei()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(r){return r.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Wn),this.addDetector(Hn),this.addDetector(Jn),this.addDetector(Gn),this.addDetector(Qn),this.addDetector(Xn),this.addDetector(Yn),this.addDetector(Zn)}},{key:"addDetector",value:function(s){return this.detectors[s.name]=s,this}},{key:"detect",value:function(s){var n=this;s||(s=this.options.order);var i=[];return s.forEach(function(r){if(n.detectors[r]){var a=n.detectors[r].lookup(n.options);a&&typeof a=="string"&&(a=[a]),a&&(i=i.concat(a))}}),i=i.map(function(r){return n.options.convertDetectedLanguage(r)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(s,n){var i=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||n.forEach(function(r){i.detectors[r]&&i.detectors[r].cacheUserLanguage(s,i.options)}))}}])}();Us.type="languageDetector";const ti={page_title:"deepnest - Industrial nesting",parts:"Parts",nests:"Nests",sheets:"Sheets",settings:"Settings"},si={stop_nest:"Stop nest",export:"Export",export_svg:"SVG file",export_dxf:"DXF file",export_json:"JSON file",back:"Back",import:"Import",start_nest:"Start nest",deselect:"Deselect",select:"Select",all:"all",add:"Add",cancel:"Cancel",save_preset:"Save Preset",load:"Load",delete:"Delete",save:"Save",reset_defaults:"set all to default"},ni={size:"Size",sheet:"Sheet",quantity:"Quantity",add_sheet:"Add Sheet",width:"width",height:"height",nesting_config:"Nesting configuration",display_units:"Display units",inches:"inches",mm:"mm",space_between_parts:"Space between parts",curve_tolerance:"Curve tolerance",part_rotations:"Part rotations",optimization_type:"Optimization type",gravity:"Gravity",bounding_box:"Bounding Box",squeeze:"Squeeze",use_rough_approximation:"Use rough approximation",cpu_cores:"CPU cores",import_export:"Import/Export",use_svg_normalizer:"Use SVG Normalizer?",svg_scale:"SVG scale",units_per:"units/",endpoint_tolerance:"Endpoint tolerance",dxf_import_units:"DXF import units",points:"Points",picas:"Picas",inches_cap:"Inches",cm:"cm",dxf_export_units:"DXF export units",export_with_sheet_boundaries:"Export with Sheet Boundborders?",export_with_sheets_space:"Export with Space between Sheets?",distance_between_sheets:"Distance between Sheets?",laser_options:"Laser options",merge_common_lines:"Merge common lines",optimization_ratio:"Optimization ratio",meta_heuristic_tuning:"Meta-heuristic fine tuning",ga_population:"GA population",ga_mutation_rate:"GA mutation rate",other_settings:"Other Settings",use_quantity_from_filename:"Use Quantity from filename",presets:"Presets",save_config_presets:"Save Configuration Presets",load_delete_presets:"Load/Delete Configuration Presets",select_preset_default:"-- Select a preset --",save_preset_title:"Save Preset",enter_preset_name:"Enter preset name"},ii={nesting_in_progress:"Nesting in progress...",error_occurred:"Error occurred",processing:"Processing...",ready:"Ready",threads_active:"{{count}} threads active",parts_loaded:"{{count}} parts loaded",nests_available:"{{count}} nests available"},ri={navigation:ti,actions:si,labels:ni,status:ii},ai="Please enter a preset name",oi="Preset saved successfully!",li="Error saving preset",ci="Please select a preset to load",ui="Preset loaded successfully!",di="Selected preset not found",fi="Error loading preset",hi="Please select a preset to delete",gi='Are you sure you want to delete the preset "{{presetName}}"?',pi="Preset deleted successfully!",mi="Error deleting preset",vi="Please import some parts first",_i="Please mark at least one part as the sheet",bi="No file selected",$i="An error occurred reading the file",yi="Error processing SVG",Si="could not contact file conversion server",xi="There was an Error while converting",wi={enter_preset_name:ai,preset_saved:oi,error_saving_preset:li,select_preset_to_load:ci,preset_loaded:ui,preset_not_found:di,error_loading_preset:fi,select_preset_to_delete:hi,confirm_delete_preset:gi,preset_deleted:pi,error_deleting_preset:mi,import_parts_first:vi,mark_part_as_sheet:_i,no_file_selected:bi,file_read_error:$i,svg_processing_error:yi,conversion_server_error:Si,conversion_error:xi},Ci="Parts",ki="Import Parts",Pi="Export Parts",Li="Export Selected",Oi="Delete Selected",Ni="No parts selected",Ai="Failed to import parts",Ei="Failed to export parts",Ri="Total Parts",Fi="Total Quantity",Ti="Select All",Ii="Deselect All",Di="No Parts Loaded",Mi="Import SVG or DXF files to get started",Ui="Search parts...",ji="Sort by",zi="Name",Vi="Quantity",Ki="Size",Bi="Rotation",qi="Dimensions",Wi="Area",Hi="Preview Error",Ji={parts_title:Ci,import:"Import",export:"Export",delete:"Delete",import_parts:ki,export_parts:Pi,export_selected:Li,delete_selected:Oi,no_parts_selected:Ni,import_failed:Ai,export_failed:Ei,total_parts:Ri,total_quantity:Fi,select_all:Ti,deselect_all:Ii,no_parts_loaded:Di,import_parts_to_get_started:Mi,search_parts:Ui,sort_by:ji,name:zi,quantity:Vi,size:Ki,rotation:Bi,dimensions:qi,area:Wi,preview_error:Hi},Gi="Nesting",Qi="Start Nesting",Xi="Stop Nesting",Yi="Clear Results",Zi="Cannot start nesting: need parts and sheets",er="Failed to start nesting",tr="Failed to stop nesting",sr="Parts to Nest",nr="Available Sheets",ir="Results Count",rr="No Nesting Results",ar="Start nesting to see results here",or="Add parts and sheets first to enable nesting",lr="Nesting in Progress",cr="Est. time remaining",ur="Current Operation",dr="Threads Active",fr="Worker Status",hr="Running",gr="Stopped",pr="Generation",mr="Best Fitness",vr="Refresh Status",_r="Nesting Results",br="Sorted by efficiency",$r="Result",yr="Best",Sr="Efficiency",xr="Fitness",wr="Sheets Used",Cr="Parts Placed",kr="View Details",Pr="Back to Results",Lr="Result Details",Or="Export Result",Nr="Export failed",Ar="Click to view",Er="Zoom Out",Rr="Zoom In",Fr="Reset View",Tr="Sheet",Ir="Statistics",Dr="Material Efficiency",Mr="Fitness Score",Ur="Material Waste",jr="Total Parts Placed",zr="Total Material Used",Vr="Generation Time",Kr="Generation Number",Br={nesting_title:Gi,start_nesting:Qi,stop_nesting:Xi,clear_results:Yi,cannot_start_nesting:Zi,start_nesting_failed:er,stop_nesting_failed:tr,parts_to_nest:sr,available_sheets:nr,results_count:ir,no_nesting_results:rr,start_nesting_to_see_results:ar,add_parts_and_sheets_first:or,nesting_in_progress:lr,estimated_time_remaining:cr,current_operation:ur,threads_active:dr,worker_status:fr,running:hr,stopped:gr,current_generation:pr,best_fitness:mr,refresh_status:vr,nesting_results:_r,sorted_by_efficiency:br,result:$r,best:yr,efficiency:Sr,fitness:xr,sheets_used:wr,parts_placed:Cr,view_details:kr,export:"Export",delete:"Delete",back_to_results:Pr,result_details:Lr,export_result:Or,export_failed:Nr,click_to_view:Ar,zoom_out:Er,zoom_in:Rr,reset_view:Fr,sheet:Tr,statistics:Ir,material_efficiency:Dr,fitness_score:Mr,material_waste:Ur,total_parts_placed:jr,total_material_used:zr,generation_time:Vr,generation_number:Kr},qr="Sheets",Wr="Add Sheet",Hr="Edit Sheet",Jr="Add New Sheet",Gr="Total Sheets",Qr="Total Area",Xr="No Sheets Loaded",Yr="Add sheets to define your material constraints",Zr="Quick Templates",ea="Configured Sheets",ta="Sheet",sa="Dimensions",na="Quantity",ia="Material",ra="Margin",aa="Edit",oa="Basic Information",la="Sheet Name",ca="Enter sheet name (optional)",ua="Width",da="Height",fa="Thickness",ha="Properties",ga="Area",pa="Preview",ma="Cancel",va="Update Sheet",_a="Swap Width/Height",ba="Width must be greater than 0",$a="Height must be greater than 0",ya="Thickness must be greater than 0",Sa="Quantity must be greater than 0",xa="Margin cannot be negative",wa={sheets_title:qr,add_sheet:Wr,edit_sheet:Hr,add_new_sheet:Jr,total_sheets:Gr,total_area:Qr,no_sheets_loaded:Xr,add_sheets_to_get_started:Yr,quick_templates:Zr,configured_sheets:ea,sheet:ta,dimensions:sa,quantity:na,material:ia,margin:ra,edit:aa,delete:"Delete",basic_information:oa,sheet_name:la,enter_sheet_name:ca,width:ua,height:da,thickness:fa,properties:ha,area:ga,preview:pa,cancel:ma,update_sheet:va,swap_dimensions:_a,width_must_be_positive:ba,height_must_be_positive:$a,thickness_must_be_positive:ya,quantity_must_be_positive:Sa,margin_cannot_be_negative:xa},Ca={fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"deepnest-language"},interpolation:{escapeValue:!1},resources:{en:{common:ri,messages:wi,parts:Ji,nesting:Br,sheets:wa}}},ka={t:t=>t,changeLanguage:async t=>{},language:()=>"en",ready:()=>!1},js=Zs(ka),be=(t="common")=>{const e=en(js);return e?[(n,i)=>{if(!e.ready())return n;const r=`${t}.${n}`;return e.t(r,i)},{changeLanguage:e.changeLanguage,language:e.language}]:[n=>n,{changeLanguage:async n=>{},language:()=>"en"}]},Pa=t=>{const[e,s]=Y("en"),[n,i]=Y(!1);Kt(async()=>{try{await le.use(Us).init(Ca),s(le.language||"en"),i(!0)}catch(l){console.error("Failed to initialize i18n:",l),i(!0)}});const o={t:(l,u)=>n()&&le.t(l,u)||l,changeLanguage:async l=>{try{await le.changeLanguage(l),s(l)}catch(u){console.error("Failed to change language:",u)}},language:e,ready:n};return js.Provider({value:o,children:t.children})},Vt=Symbol("store-raw"),Je=Symbol("store-node"),Le=Symbol("store-has"),zs=Symbol("store-self");function Vs(t){let e=t[je];if(!e&&(Object.defineProperty(t,je,{value:e=new Proxy(t,Na)}),!Array.isArray(t))){const s=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let i=0,r=s.length;i<r;i++){const a=s[i];n[a].get&&Object.defineProperty(t,a,{enumerable:n[a].enumerable,get:n[a].get.bind(e)})}}return e}function Ct(t){let e;return t!=null&&typeof t=="object"&&(t[je]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function ot(t,e=new Set){let s,n,i,r;if(s=t!=null&&t[Vt])return s;if(!Ct(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let a=0,o=t.length;a<o;a++)i=t[a],(n=ot(i,e))!==i&&(t[a]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const a=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let l=0,u=a.length;l<u;l++)r=a[l],!o[r].get&&(i=t[r],(n=ot(i,e))!==i&&(t[r]=n))}return t}function kt(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function lt(t,e,s){if(t[e])return t[e];const[n,i]=Y(s,{equals:!1,internal:!0});return n.$=i,t[e]=n}function La(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===je||e===Je||(delete s.value,delete s.writable,s.get=()=>t[je][e]),s}function Ks(t){Mt()&&lt(kt(t,Je),zs)()}function Oa(t){return Ks(t),Reflect.ownKeys(t)}const Na={get(t,e,s){if(e===Vt)return t;if(e===je)return s;if(e===Dt)return Ks(t),s;const n=kt(t,Je),i=n[e];let r=i?i():t[e];if(e===Je||e===Le||e==="__proto__")return r;if(!i){const a=Object.getOwnPropertyDescriptor(t,e);Mt()&&(typeof r!="function"||t.hasOwnProperty(e))&&!(a&&a.get)&&(r=lt(n,e,r)())}return Ct(r)?Vs(r):r},has(t,e){return e===Vt||e===je||e===Dt||e===Je||e===Le||e==="__proto__"?!0:(Mt()&&lt(kt(t,Le),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Oa,getOwnPropertyDescriptor:La};function Pt(t,e,s,n=!1){if(!n&&t[e]===s)return;const i=t[e],r=t.length;s===void 0?(delete t[e],t[Le]&&t[Le][e]&&i!==void 0&&t[Le][e].$()):(t[e]=s,t[Le]&&t[Le][e]&&i===void 0&&t[Le][e].$());let a=kt(t,Je),o;if((o=lt(a,e,i))&&o.$(()=>s),Array.isArray(t)&&t.length!==r){for(let l=t.length;l<r;l++)(o=a[l])&&o.$();(o=lt(a,"length",r))&&o.$(t.length)}(o=a[zs])&&o.$()}function Bs(t,e){const s=Object.keys(e);for(let n=0;n<s.length;n+=1){const i=s[n];Pt(t,i,e[i])}}function Aa(t,e){if(typeof e=="function"&&(e=e(t)),e=ot(e),Array.isArray(e)){if(t===e)return;let s=0,n=e.length;for(;s<n;s++){const i=e[s];t[s]!==i&&Pt(t,s,i)}Pt(t,"length",n)}else Bs(t,e)}function st(t,e,s=[]){let n,i=t;if(e.length>1){n=e.shift();const a=typeof n,o=Array.isArray(t);if(Array.isArray(n)){for(let l=0;l<n.length;l++)st(t,[n[l]].concat(e),s);return}else if(o&&a==="function"){for(let l=0;l<t.length;l++)n(t[l],l)&&st(t,[l].concat(e),s);return}else if(o&&a==="object"){const{from:l=0,to:u=t.length-1,by:f=1}=n;for(let h=l;h<=u;h+=f)st(t,[h].concat(e),s);return}else if(e.length>1){st(t[n],e,[n].concat(s));return}i=t[n],s=[n].concat(s)}let r=e[0];typeof r=="function"&&(r=r(i,s),r===i)||n===void 0&&r==null||(r=ot(r),n===void 0||Ct(i)&&Ct(r)&&!Array.isArray(r)?Bs(i,r):Pt(t,n,r))}function Ea(...[t,e]){const s=ot(t||{}),n=Array.isArray(s),i=Vs(s);function r(...a){Ys(()=>{n&&a.length===1?Aa(s,a[0]):st(s,a)})}return[i,r]}const qs={units:"inches",scale:72,spacing:0,rotations:4,populationSize:10,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.72,endpointTolerance:.36,svgScale:72,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},Ss={activeTab:"parts",darkMode:!1,language:"en",modals:{presetModal:!1,helpModal:!1},panels:{partsWidth:300,resultsHeight:200}},Ws={parts:[],sheets:[],nests:[],presets:{},importedFiles:[]},Hs={isNesting:!1,progress:0,currentNest:null,workerStatus:{isRunning:!1,currentOperation:"",threadsActive:0},lastError:null},Ra=()=>{try{if(typeof localStorage<"u"){const t=localStorage.getItem("deepnest-ui-state");if(t){const e=JSON.parse(t);return{...Ss,...e}}}}catch(t){console.warn("Failed to load UI state from localStorage:",t)}return Ss},Fa={ui:Ra(),config:qs,app:Ws,process:Hs},[b,ie]=Ea(Fa),I={setActiveTab:t=>{ie("ui","activeTab",t)},setDarkMode:t=>{if(ie("ui","darkMode",t),typeof document<"u"&&document.body.classList.toggle("dark-mode",t),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(e){console.warn("Failed to save UI state to localStorage:",e)}},setLanguage:t=>{if(ie("ui","language",t),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(e){console.warn("Failed to save UI state to localStorage:",e)}},setPanelWidth:(t,e)=>{if(ie("ui","panels",t,e),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(b.ui))}catch(s){console.warn("Failed to save UI state to localStorage:",s)}},openModal:t=>{ie("ui","modals",t,!0)},closeModal:t=>{ie("ui","modals",t,!1)},updateConfig:t=>{ie("config",t)},resetConfig:()=>{ie("config",qs)},setParts:t=>{ie("app","parts",t)},addPart:t=>{ie("app","parts",e=>[...e,t])},removePart:t=>{ie("app","parts",e=>e.filter(s=>s.id!==t))},updatePart:(t,e)=>{ie("app","parts",s=>s.id===t,e)},setNests:t=>{ie("app","nests",t)},addNest:t=>{ie("app","nests",e=>[...e,t])},setPresets:t=>{ie("app","presets",t)},setNestingStatus:t=>{ie("process","isNesting",t)},setNestingProgress:t=>{ie("process","progress",t)},setWorkerStatus:t=>{ie("process","workerStatus",t)},setError:t=>{ie("process","lastError",t)},reset:()=>{ie("app",Ws),ie("process",Hs)}};class Ta{eventListeners=new Map;get isAvailable(){return typeof window<"u"&&!!window.electronAPI}async invoke(e,...s){if(!this.isAvailable)throw new Error("IPC not available");try{return await window.electronAPI.ipcRenderer.invoke(e,...s)}catch(n){throw console.error(`IPC invoke error on channel ${String(e)}:`,n),n}}on(e,s){if(!this.isAvailable)return console.warn("IPC not available, listener not registered"),()=>{};const n=String(e);return this.eventListeners.has(n)||this.eventListeners.set(n,new Set),this.eventListeners.get(n).add(s),window.electronAPI.ipcRenderer.on(e,s),()=>{const i=this.eventListeners.get(n);i&&(i.delete(s),i.size===0&&(this.eventListeners.delete(n),window.electronAPI.ipcRenderer.removeAllListeners(e)))}}send(e,...s){if(!this.isAvailable){console.warn("IPC not available, message not sent");return}window.electronAPI.ipcRenderer.send(e,...s)}async readConfig(){return this.invoke("read-config")}async writeConfig(e){return this.invoke("write-config",JSON.stringify(e))}async savePreset(e,s){return this.invoke("save-preset",e,JSON.stringify(s))}async loadPresets(){return this.invoke("load-presets")}async deletePreset(e){return this.invoke("delete-preset",e)}async startNesting(e){return this.invoke("start-nesting",e)}async stopNesting(){return this.invoke("stop-nesting")}stopBackgroundWorker(){this.send("background-stop")}onNestProgress(e){return this.on("nest-progress",e)}onNestComplete(e){return this.on("nest-complete",e)}onBackgroundProgress(e){return this.on("background-progress",e)}onWorkerStatus(e){return this.on("worker-status",e)}onNestError(e){return this.on("nest-error",e)}cleanup(){if(this.isAvailable){for(const e of this.eventListeners.keys())window.electronAPI.ipcRenderer.removeAllListeners(e);this.eventListeners.clear()}}}const ue=new Ta;var Ia=L('<header class=header><div class=header-left><h1 class=app-title></h1></div><div class=header-right><div class=language-selector><select><option value=en>English</option><option value=de>Deutsch</option><option value=fr>Franais</option><option value=es>Espaol</option></select></div><button class=dark-mode-toggle title="Toggle dark mode">');const Da=()=>{const[t,{changeLanguage:e}]=be("navigation"),s=()=>{I.setDarkMode(!b.ui.darkMode)},n=async i=>{I.setLanguage(i),await e(i)};return(()=>{var i=Ia(),r=i.firstChild,a=r.firstChild,o=r.nextSibling,l=o.firstChild,u=l.firstChild,f=l.nextSibling;return c(a,()=>t("page_title")),u.addEventListener("change",h=>n(h.currentTarget.value)),f.$$click=s,c(f,()=>b.ui.darkMode?"":""),j(()=>u.value=b.ui.language),i})()};xe(["click"]);var Ma=L("<nav class=navigation><div class=nav-tabs>"),Ua=L("<button><span class=nav-tab-icon></span><span class=nav-tab-label>");const ja=()=>{const[t]=be("navigation"),e=[{id:"parts",labelKey:"parts",icon:""},{id:"nests",labelKey:"nests",icon:""},{id:"sheets",labelKey:"sheets",icon:""},{id:"settings",labelKey:"settings",icon:""}],s=n=>{I.setActiveTab(n)};return(()=>{var n=Ma(),i=n.firstChild;return c(i,S(Ae,{each:e,children:r=>(()=>{var a=Ua(),o=a.firstChild,l=o.nextSibling;return a.$$click=()=>s(r.id),c(o,()=>r.icon),c(l,()=>t(r.labelKey)),j(u=>{var f=`nav-tab ${b.ui.activeTab===r.id?"active":""}`,h=t(r.labelKey);return f!==u.e&&Oe(a,u.e=f),h!==u.t&&q(a,"title",u.t=h),u},{e:void 0,t:void 0}),a})()})),n})()};xe(["click"]);var za=L('<div class=parts-list><div class=parts-controls><div class=search-box><input type=text class=search-input></div><div class=sort-controls><label>:</label><select class=sort-select><option value=name></option><option value=quantity></option><option value=size></option></select></div></div><div class=parts-table><div class=table-header><div class="table-cell checkbox-cell"><input type=checkbox></div><div class="table-cell name-cell sortable"> </div><div class="table-cell quantity-cell sortable"> </div><div class="table-cell size-cell sortable"> </div><div class="table-cell rotation-cell"></div></div><div class=table-body>'),Va=L('<div><div class="table-cell checkbox-cell"><input type=checkbox></div><div class="table-cell name-cell"><div class=part-name></div></div><div class="table-cell quantity-cell"><input type=number min=1 class=quantity-input></div><div class="table-cell size-cell"><span class=size-text></span></div><div class="table-cell rotation-cell"><input type=number min=0 max=360 step=90 class=rotation-input><span class=rotation-unit>');const Ka=()=>{const[t]=be("parts"),[e,s]=Y(""),[n,i]=Y("name"),[r,a]=Y("asc"),o=J(()=>{let g=b.app.parts;if(e()){const p=e().toLowerCase();g=g.filter(m=>m.name.toLowerCase().includes(p)||m.source.toLowerCase().includes(p))}return g=g.sort((p,m)=>{let v,y;switch(n()){case"name":v=p.name,y=m.name;break;case"quantity":v=p.quantity,y=m.quantity;break;case"size":v=p.bounds.width*p.bounds.height,y=m.bounds.width*m.bounds.height;break;default:v=p.name,y=m.name}return typeof v=="string"&&typeof y=="string"?r()==="asc"?v.localeCompare(y):y.localeCompare(v):r()==="asc"?v-y:y-v}),g}),l=g=>{I.updatePart(g.id,{selected:!g.selected})},u=(g,p)=>{p<1&&(p=1),I.updatePart(g,{quantity:p})},f=(g,p)=>{I.updatePart(g,{rotation:p})},h=g=>{n()===g?a(r()==="asc"?"desc":"asc"):(i(g),a("asc"))},d=g=>`${g.width.toFixed(1)}  ${g.height.toFixed(1)}`;return(()=>{var g=za(),p=g.firstChild,m=p.firstChild,v=m.firstChild,y=m.nextSibling,x=y.firstChild,A=x.firstChild,_=x.nextSibling,w=_.firstChild,D=w.nextSibling,P=D.nextSibling,U=p.nextSibling,C=U.firstChild,B=C.firstChild,O=B.firstChild,Q=B.nextSibling,E=Q.firstChild,R=Q.nextSibling,T=R.firstChild,K=R.nextSibling,ee=K.firstChild,M=K.nextSibling,z=C.nextSibling;return v.$$input=k=>s(k.currentTarget.value),c(x,()=>t("sort_by"),A),_.addEventListener("change",k=>i(k.currentTarget.value)),c(w,()=>t("name")),c(D,()=>t("quantity")),c(P,()=>t("size")),O.addEventListener("change",k=>{const W=k.currentTarget.checked;b.app.parts.forEach(G=>{I.updatePart(G.id,{selected:W})})}),Q.$$click=()=>h("name"),c(Q,()=>t("name"),E),c(Q,(()=>{var k=Fe(()=>n()==="name");return()=>k()&&(r()==="asc"?"":"")})(),null),R.$$click=()=>h("quantity"),c(R,()=>t("quantity"),T),c(R,(()=>{var k=Fe(()=>n()==="quantity");return()=>k()&&(r()==="asc"?"":"")})(),null),K.$$click=()=>h("size"),c(K,()=>t("size"),ee),c(K,(()=>{var k=Fe(()=>n()==="size");return()=>k()&&(r()==="asc"?"":"")})(),null),c(M,()=>t("rotation")),c(z,S(Ae,{get each(){return o()},children:k=>(()=>{var W=Va(),G=W.firstChild,te=G.firstChild,ae=G.nextSibling,oe=ae.firstChild,de=ae.nextSibling,$e=de.firstChild,ge=de.nextSibling,we=ge.firstChild,ye=ge.nextSibling,Ce=ye.firstChild;return te.addEventListener("change",()=>l(k)),c(oe,()=>k.name),$e.addEventListener("change",he=>u(k.id,parseInt(he.currentTarget.value))),c(we,()=>d(k.bounds)),Ce.addEventListener("change",he=>f(k.id,parseInt(he.currentTarget.value))),j(he=>{var ve=`table-row ${k.selected?"selected":""}`,_e=k.source;return ve!==he.e&&Oe(W,he.e=ve),_e!==he.t&&q(oe,"title",he.t=_e),he},{e:void 0,t:void 0}),j(()=>te.checked=k.selected),j(()=>$e.value=k.quantity),j(()=>Ce.value=k.rotation),W})()})),j(k=>{var W=t("search_parts"),G=b.app.parts.some(te=>te.selected)&&!b.app.parts.every(te=>te.selected);return W!==k.e&&q(v,"placeholder",k.e=W),G!==k.t&&(O.indeterminate=k.t=G),k},{e:void 0,t:void 0}),j(()=>v.value=e()),j(()=>_.value=n()),j(()=>O.checked=b.app.parts.every(k=>k.selected)),g})()};xe(["input","click"]);var Ba=L('<div class=parts-panel><div class=panel-header><h2></h2><div class=panel-actions><button class="button secondary"> </button><button class="button secondary"> </button><button class="button secondary"> </button></div></div><div class=parts-summary><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div><div class=summary-actions><button class=button-link></button><span class=separator>|</span><button class=button-link></button></div></div><div class=panel-content>'),qa=L('<div class=empty-state><div class=empty-icon></div><h3></h3><p></p><button class="button primary">');const Wa=()=>{const[t]=be("parts"),e=J(()=>b.app.parts.length),s=J(()=>b.app.parts.reduce((l,u)=>l+u.quantity,0)),n=async()=>{if(!ue.isAvailable){console.warn("IPC not available");return}try{const l=await ue.openFileDialog({title:t("import_parts"),filters:[{name:"Vector Files",extensions:["svg","dxf"]},{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(l.canceled||!l.filePaths?.length)return;const u=await ue.importParts(l.filePaths);I.setParts([...b.app.parts,...u])}catch(l){console.error("Failed to import parts:",l),I.setError(t("import_failed"))}},i=async()=>{const l=b.app.parts.filter(u=>u.selected);if(l.length===0){I.setError(t("no_parts_selected"));return}try{const u=await ue.saveFileDialog({title:t("export_parts"),defaultPath:"parts.svg",filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(u.canceled||!u.filePath)return;await ue.exportParts(l,u.filePath)}catch(u){console.error("Failed to export parts:",u),I.setError(t("export_failed"))}},r=()=>{if(b.app.parts.filter(f=>f.selected).length===0){I.setError(t("no_parts_selected"));return}const u=b.app.parts.filter(f=>!f.selected);I.setParts(u)},a=()=>{b.app.parts.forEach(l=>{I.updatePart(l.id,{selected:!0})})},o=()=>{b.app.parts.forEach(l=>{I.updatePart(l.id,{selected:!1})})};return(()=>{var l=Ba(),u=l.firstChild,f=u.firstChild,h=f.nextSibling,d=h.firstChild;d.firstChild;var g=d.nextSibling;g.firstChild;var p=g.nextSibling;p.firstChild;var m=u.nextSibling,v=m.firstChild,y=v.firstChild,x=y.firstChild,A=y.nextSibling,_=v.nextSibling,w=_.firstChild,D=w.firstChild,P=w.nextSibling,U=_.nextSibling,C=U.firstChild,B=C.nextSibling,O=B.nextSibling,Q=m.nextSibling;return c(f,()=>t("parts_title")),d.$$click=n,c(d,()=>t("import"),null),g.$$click=i,c(g,()=>t("export"),null),p.$$click=r,c(p,()=>t("delete"),null),c(y,()=>t("total_parts"),x),c(A,e),c(w,()=>t("total_quantity"),D),c(P,s),C.$$click=a,c(C,()=>t("select_all")),O.$$click=o,c(O,()=>t("deselect_all")),c(Q,S(H,{get when(){return e()>0},get fallback(){return(()=>{var E=qa(),R=E.firstChild,T=R.nextSibling,K=T.nextSibling,ee=K.nextSibling;return c(T,()=>t("no_parts_loaded")),c(K,()=>t("import_parts_to_get_started")),ee.$$click=n,c(ee,()=>t("import_parts")),E})()},get children(){return S(Ka,{})}})),j(E=>{var R=t("import_parts"),T=t("export_selected"),K=b.app.parts.filter(W=>W.selected).length===0,ee=t("delete_selected"),M=b.app.parts.filter(W=>W.selected).length===0,z=e()===0,k=e()===0;return R!==E.e&&q(d,"title",E.e=R),T!==E.t&&q(g,"title",E.t=T),K!==E.a&&(g.disabled=E.a=K),ee!==E.o&&q(p,"title",E.o=ee),M!==E.i&&(p.disabled=E.i=M),z!==E.n&&(C.disabled=E.n=z),k!==E.s&&(O.disabled=E.s=k),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),l})()};xe(["click"]);var Ha=L("<div class=time-remaining>: "),Ja=L("<div class=current-operation><span class=operation-label>:</span><span class=operation-text>"),Ga=L("<div class=current-nest-info><div class=info-item><span class=info-label>:</span><span class=info-value></span></div><div class=info-item><span class=info-label>:</span><span class=info-value>"),Qa=L('<div class=nesting-progress><div class=progress-header><h3></h3><div class=progress-percentage>%</div></div><div class=progress-bar-container><div class="progress-bar large"><div class=progress-fill></div></div></div><div class=progress-details><div class=worker-info><div class=info-item><span class=info-label>:</span><span class=info-value></span></div><div class=info-item><span class=info-label>:</span><span></span></div></div></div><div class=progress-actions><button class=button-link>');const Xa=()=>{const[t]=be("nesting"),e=J(()=>Math.max(0,Math.min(100,b.process.progress))),s=J(()=>{const n=e();if(n===0)return null;const r=6e4*(100-n)/n;return r<6e4?`${Math.round(r/1e3)}s`:`${Math.round(r/6e4)}m`});return(()=>{var n=Qa(),i=n.firstChild,r=i.firstChild,a=r.nextSibling,o=a.firstChild,l=i.nextSibling,u=l.firstChild,f=u.firstChild,h=l.nextSibling,d=h.firstChild,g=d.firstChild,p=g.firstChild,m=p.firstChild,v=p.nextSibling,y=g.nextSibling,x=y.firstChild,A=x.firstChild,_=x.nextSibling,w=h.nextSibling,D=w.firstChild;return c(r,()=>t("nesting_in_progress")),c(a,()=>e().toFixed(1),o),c(l,S(H,{get when(){return s()},get children(){var P=Ha(),U=P.firstChild;return c(P,()=>t("estimated_time_remaining"),U),c(P,s,null),P}}),null),c(h,S(H,{get when(){return b.process.workerStatus.currentOperation},get children(){var P=Ja(),U=P.firstChild,C=U.firstChild,B=U.nextSibling;return c(U,()=>t("current_operation"),C),c(B,()=>b.process.workerStatus.currentOperation),P}}),d),c(p,()=>t("threads_active"),m),c(v,()=>b.process.workerStatus.threadsActive),c(x,()=>t("worker_status"),A),c(_,(()=>{var P=Fe(()=>!!b.process.workerStatus.isRunning);return()=>P()?t("running"):t("stopped")})()),c(h,S(H,{get when(){return b.process.currentNest},get children(){var P=Ga(),U=P.firstChild,C=U.firstChild,B=C.firstChild,O=C.nextSibling,Q=U.nextSibling,E=Q.firstChild,R=E.firstChild,T=E.nextSibling;return c(C,()=>t("current_generation"),B),c(O,()=>b.process.currentNest?.generation||0),c(E,()=>t("best_fitness"),R),c(T,()=>b.process.currentNest?.fitness?.toFixed(2)||"N/A"),P}}),null),D.$$click=()=>window.location.reload(),c(D,()=>t("refresh_status")),j(P=>{var U=`${e()}%`,C=`info-value ${b.process.workerStatus.isRunning?"running":"stopped"}`;return U!==P.e&&((P.e=U)!=null?f.style.setProperty("width",U):f.style.removeProperty("width")),C!==P.t&&Oe(_,P.t=C),P},{e:void 0,t:void 0}),n})()};xe(["click"]);var Ya=L("<div class=stat-row><span class=stat-title>:</span><span class=stat-data>ms"),Za=L("<div class=stat-row><span class=stat-title>:</span><span class=stat-data>"),eo=L('<div class=result-viewer><div class=viewer-controls><div class=zoom-controls><button class=control-button></button><span class=zoom-level>%</span><button class=control-button>+</button><button class=control-button></button></div></div><div class=viewer-content><div class=svg-viewer-container><svg class=result-svg width=100% height=400 viewBox="0 0 800 400"><g><defs><pattern id=grid width=20 height=20 patternUnits=userSpaceOnUse><path d="M 20 0 L 0 0 0 20"fill=none stroke=#e0e0e0 stroke-width=1></path></pattern></defs><rect width=800 height=400 fill=url(#grid)></rect></g></svg></div><div class=result-statistics><h4></h4><div class=stats-grid><div class=stat-card><div class="stat-value efficiency"></div><div class=stat-label></div></div><div class=stat-card><div class=stat-value></div><div class=stat-label></div></div><div class=stat-card><div class=stat-value></div><div class=stat-label></div></div><div class=stat-card><div class=stat-value>%</div><div class=stat-label></div></div></div><div class=detailed-stats><div class=stat-row><span class=stat-title>:</span><span class=stat-data></span></div><div class=stat-row><span class=stat-title>:</span><span class=stat-data>'),to=L('<svg><g class=sheet-group><rect fill="rgba(200, 200, 200, 0.3)"stroke=var(--border-color) stroke-width=2></rect><text font-size=12 fill=var(--text-secondary)> </svg>',!1,!0,!1),so=L('<svg><g class=part-group><rect fill="rgba(36, 199, 237, 0.7)"stroke=var(--button-primary) stroke-width=1></svg>',!1,!0,!1);const no=t=>{const[e]=be("nesting"),[s,n]=Y(1),[i,r]=Y({x:0,y:0}),[a,o]=Y(!1),[l,u]=Y({x:0,y:0}),f=J(()=>t.result.sheets?.reduce((_,w)=>_+w.width*w.height,0)||0),h=J(()=>t.result.placedParts||0),d=J(()=>{const _=f(),w=h();return _===0?0:(_-w)/_*100}),g=()=>{n(_=>Math.min(_*1.2,5))},p=()=>{n(_=>Math.max(_/1.2,.1))},m=()=>{n(1),r({x:0,y:0})},v=_=>{o(!0),u({x:_.clientX-i().x,y:_.clientY-i().y})},y=_=>{if(!a())return;const w={x:_.clientX-l().x,y:_.clientY-l().y};r(w)},x=()=>{o(!1)},A=J(()=>{const _=s(),w=i();return`translate(${w.x}, ${w.y}) scale(${_})`});return(()=>{var _=eo(),w=_.firstChild,D=w.firstChild,P=D.firstChild,U=P.nextSibling,C=U.firstChild,B=U.nextSibling,O=B.nextSibling,Q=w.nextSibling,E=Q.firstChild,R=E.firstChild,T=R.firstChild,K=T.firstChild;K.nextSibling;var ee=E.nextSibling,M=ee.firstChild,z=M.nextSibling,k=z.firstChild,W=k.firstChild,G=W.nextSibling,te=k.nextSibling,ae=te.firstChild,oe=ae.nextSibling,de=te.nextSibling,$e=de.firstChild,ge=$e.nextSibling,we=de.nextSibling,ye=we.firstChild,Ce=ye.firstChild,he=ye.nextSibling,ve=z.nextSibling,_e=ve.firstChild,Ee=_e.firstChild,ze=Ee.firstChild,Ve=Ee.nextSibling,Re=_e.nextSibling,Ie=Re.firstChild,De=Ie.firstChild,Me=Ie.nextSibling;return P.$$click=p,c(U,()=>Math.round(s()*100),C),B.$$click=g,O.$$click=m,R.addEventListener("mouseleave",x),R.$$mouseup=x,R.$$mousemove=y,R.$$mousedown=v,c(T,S(Ae,{get each(){return t.result.sheets||[]},children:(F,se)=>(()=>{var X=to(),V=X.firstChild,ce=V.nextSibling,pe=ce.firstChild;return c(ce,()=>e("sheet"),pe),c(ce,()=>se()+1,null),j(ne=>{var Pe=F.x||0,Ue=F.y||0,Ke=F.width,ut=F.height,Qe=(F.x||0)+10,dt=(F.y||0)+25;return Pe!==ne.e&&q(V,"x",ne.e=Pe),Ue!==ne.t&&q(V,"y",ne.t=Ue),Ke!==ne.a&&q(V,"width",ne.a=Ke),ut!==ne.o&&q(V,"height",ne.o=ut),Qe!==ne.i&&q(ce,"x",ne.i=Qe),dt!==ne.n&&q(ce,"y",ne.n=dt),ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),X})()}),null),c(T,S(Ae,{get each(){return t.result.placements||[]},children:F=>(()=>{var se=so(),X=se.firstChild;return j(V=>{var ce=F.x,pe=F.y,ne=F.width||50,Pe=F.height||50,Ue=`rotate(${F.rotation||0} ${F.x+(F.width||50)/2} ${F.y+(F.height||50)/2})`;return ce!==V.e&&q(X,"x",V.e=ce),pe!==V.t&&q(X,"y",V.t=pe),ne!==V.a&&q(X,"width",V.a=ne),Pe!==V.o&&q(X,"height",V.o=Pe),Ue!==V.i&&q(X,"transform",V.i=Ue),V},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),se})()}),null),c(M,()=>e("statistics")),c(W,(()=>{var F=Fe(()=>!!t.result.efficiency);return()=>F()?`${(t.result.efficiency*100).toFixed(1)}%`:"N/A"})()),c(G,()=>e("material_efficiency")),c(ae,()=>t.result.fitness?.toFixed(2)||"N/A"),c(oe,()=>e("fitness_score")),c($e,()=>t.result.sheets?.length||0),c(ge,()=>e("sheets_used")),c(ye,()=>d().toFixed(1),Ce),c(he,()=>e("material_waste")),c(Ee,()=>e("total_parts_placed"),ze),c(Ve,()=>t.result.placedParts||0),c(Ie,()=>e("total_material_used"),De),c(Me,()=>f().toFixed(2)),c(ve,S(H,{get when(){return t.result.generationTime},get children(){var F=Ya(),se=F.firstChild,X=se.firstChild,V=se.nextSibling,ce=V.firstChild;return c(se,()=>e("generation_time"),X),c(V,()=>t.result.generationTime,ce),F}}),null),c(ve,S(H,{get when(){return t.result.generation},get children(){var F=Za(),se=F.firstChild,X=se.firstChild,V=se.nextSibling;return c(se,()=>e("generation_number"),X),c(V,()=>t.result.generation),F}}),null),j(F=>{var se=e("zoom_out"),X=e("zoom_in"),V=e("reset_view"),ce=a()?"grabbing":"grab",pe=A();return se!==F.e&&q(P,"title",F.e=se),X!==F.t&&q(B,"title",F.t=X),V!==F.a&&q(O,"title",F.a=V),ce!==F.o&&((F.o=ce)!=null?R.style.setProperty("cursor",ce):R.style.removeProperty("cursor")),pe!==F.i&&q(T,"transform",F.i=pe),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),_})()};xe(["click","mousedown","mousemove","mouseup"]);var io=L('<div class=result-detail-view><div class=detail-header><button class="button secondary"> </button><h3></h3><div class=detail-actions><button class="button secondary"> '),ro=L("<div class=results-header><h3> (<!>)</h3><div class=results-controls><label class=sort-label>"),ao=L("<div class=results-grid>"),oo=L("<div class=results-grid-container>"),lo=L("<span class=best-badge>"),co=L("<div class=stat-item><span class=stat-label>:</span><span class=stat-value>"),uo=L('<div class=result-card><div class=result-preview><div class=preview-placeholder><div class=preview-icon></div><div class=preview-text></div></div></div><div class=result-info><div class=result-title> #</div><div class=result-stats><div class=stat-item><span class=stat-label>:</span><span class="stat-value efficiency"></span></div><div class=stat-item><span class=stat-label>:</span><span class=stat-value></span></div><div class=stat-item><span class=stat-label>:</span><span class=stat-value></span></div></div><div class=result-actions><button class=button-link></button><button class=button-link></button><button class="button-link danger">');const fo=()=>{const[t]=be("nesting"),[e,s]=Y(null),[n,i]=Y("grid"),r=J(()=>[...b.app.nests].sort((d,g)=>d.efficiency!==g.efficiency?(g.efficiency||0)-(d.efficiency||0):(g.fitness||0)-(d.fitness||0))),a=d=>{s(d),i("detail")},o=()=>{s(null),i("grid")},l=async d=>{if(ue.isAvailable)try{const g=await ue.saveFileDialog({title:t("export_result"),defaultPath:`nest_result_${d.id}.svg`,filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(g.canceled||!g.filePath)return;await ue.exportNestResult(d,g.filePath)}catch(g){console.error("Failed to export result:",g),I.setError(t("export_failed"))}},u=d=>{const g=b.app.nests.filter(p=>p.id!==d.id);I.setNests(g)},f=d=>d?`${(d*100).toFixed(1)}%`:"N/A",h=d=>d?d.toFixed(2):"N/A";return(()=>{var d=oo();return c(d,S(H,{get when(){return Fe(()=>n()==="detail")()&&e()},get children(){var g=io(),p=g.firstChild,m=p.firstChild;m.firstChild;var v=m.nextSibling,y=v.nextSibling,x=y.firstChild;return x.firstChild,m.$$click=o,c(m,()=>t("back_to_results"),null),c(v,()=>t("result_details")),x.$$click=()=>l(e()),c(x,()=>t("export"),null),c(g,S(no,{get result(){return e()}}),null),g}}),null),c(d,S(H,{get when(){return n()==="grid"},get children(){return[(()=>{var g=ro(),p=g.firstChild,m=p.firstChild,v=m.nextSibling;v.nextSibling;var y=p.nextSibling,x=y.firstChild;return c(p,()=>t("nesting_results"),m),c(p,()=>r().length,v),c(x,()=>t("sorted_by_efficiency")),g})(),(()=>{var g=ao();return c(g,S(Ae,{get each(){return r()},children:(p,m)=>(()=>{var v=uo(),y=v.firstChild,x=y.firstChild,A=x.firstChild,_=A.nextSibling,w=y.nextSibling,D=w.firstChild,P=D.firstChild,U=D.nextSibling,C=U.firstChild,B=C.firstChild,O=B.firstChild,Q=B.nextSibling,E=C.nextSibling,R=E.firstChild,T=R.firstChild,K=R.nextSibling,ee=E.nextSibling,M=ee.firstChild,z=M.firstChild,k=M.nextSibling,W=U.nextSibling,G=W.firstChild,te=G.nextSibling,ae=te.nextSibling;return y.$$click=()=>a(p),c(_,()=>t("click_to_view")),c(D,()=>t("result"),P),c(D,()=>m()+1,null),c(D,S(H,{get when(){return m()===0},get children(){var oe=lo();return c(oe,()=>t("best")),oe}}),null),c(B,()=>t("efficiency"),O),c(Q,()=>f(p.efficiency)),c(R,()=>t("fitness"),T),c(K,()=>h(p.fitness)),c(M,()=>t("sheets_used"),z),c(k,()=>p.sheets?.length||0),c(U,S(H,{get when(){return p.placedParts},get children(){var oe=co(),de=oe.firstChild,$e=de.firstChild,ge=de.nextSibling;return c(de,()=>t("parts_placed"),$e),c(ge,()=>p.placedParts),oe}}),null),G.$$click=()=>a(p),c(G,()=>t("view_details")),te.$$click=()=>l(p),c(te,()=>t("export")),ae.$$click=()=>u(p),c(ae,()=>t("delete")),v})()})),g})()]}}),null),d})()};xe(["click"]);var ho=L('<button class="button secondary"> '),go=L('<div class=nesting-panel><div class=panel-header><h2></h2><div class=panel-actions><button class="button primary"> </button><button class="button secondary"> </button></div></div><div class=nesting-summary><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div></div><div class=panel-content>'),po=L("<p class=warning-text>"),mo=L("<div class=empty-state><div class=empty-icon></div><h3></h3><p>");const vo=()=>{const[t]=be("nesting"),e=J(()=>b.app.parts.length>0&&b.app.sheets.length>0&&!b.process.isNesting),s=J(()=>b.app.nests.length>0),n=async()=>{if(e())try{I.setNestingStatus(!0),I.setNestingProgress(0),I.setError(null);const o={parts:b.app.parts.filter(l=>l.quantity>0),sheets:b.app.sheets,config:b.config};await ue.startNesting(o)}catch(o){console.error("Failed to start nesting:",o),I.setError(t("start_nesting_failed")),I.setNestingStatus(!1)}},i=async()=>{if(b.process.isNesting)try{await ue.stopNesting(),I.setNestingStatus(!1)}catch(o){console.error("Failed to stop nesting:",o),I.setError(t("stop_nesting_failed"))}},r=()=>{I.setNests([])},a=J(()=>b.app.parts.filter(o=>o.quantity>0).length);return(()=>{var o=go(),l=o.firstChild,u=l.firstChild,f=u.nextSibling,h=f.firstChild;h.firstChild;var d=h.nextSibling;d.firstChild;var g=l.nextSibling,p=g.firstChild,m=p.firstChild,v=m.firstChild,y=m.nextSibling,x=p.nextSibling,A=x.firstChild,_=A.firstChild,w=A.nextSibling,D=x.nextSibling,P=D.firstChild,U=P.firstChild,C=P.nextSibling,B=g.nextSibling;return c(u,()=>t("nesting_title")),h.$$click=n,c(h,()=>t("start_nesting"),null),d.$$click=i,c(d,()=>t("stop_nesting"),null),c(f,S(H,{get when(){return s()&&!b.process.isNesting},get children(){var O=ho();return O.firstChild,O.$$click=r,c(O,()=>t("clear_results"),null),j(()=>q(O,"title",t("clear_results"))),O}}),null),c(m,()=>t("parts_to_nest"),v),c(y,a),c(A,()=>t("available_sheets"),_),c(w,()=>b.app.sheets.length),c(P,()=>t("results_count"),U),c(C,()=>b.app.nests.length),c(B,S(H,{get when(){return b.process.isNesting},get children(){return S(Xa,{})}}),null),c(B,S(H,{get when(){return s()},get fallback(){return(()=>{var O=mo(),Q=O.firstChild,E=Q.nextSibling,R=E.nextSibling;return c(E,()=>t("no_nesting_results")),c(R,()=>t("start_nesting_to_see_results")),c(O,S(H,{get when(){return!e()},get children(){var T=po();return c(T,()=>t("add_parts_and_sheets_first")),T}}),null),O})()},get children(){return S(fo,{})}}),null),j(O=>{var Q=!e(),E=e()?t("start_nesting"):t("cannot_start_nesting"),R=!b.process.isNesting,T=t("stop_nesting");return Q!==O.e&&(h.disabled=O.e=Q),E!==O.t&&q(h,"title",O.t=E),R!==O.a&&(d.disabled=O.a=R),T!==O.o&&q(d,"title",O.o=T),O},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()};xe(["click"]);var tt=L("<span class=error-message>"),_o=L("<div class=preview-detail>: <!> mm"),bo=L('<div class=sheet-config><div class=config-form><div class=form-section><h4></h4><div class=form-group><label for=sheet-name>:</label><input id=sheet-name type=text class=form-input></div><div class=form-group><label for=material>:</label><select id=material class=form-select></select></div></div><div class=form-section><h4></h4><div class=preset-buttons></div><div class=dimensions-row><div class=form-group><label for=width> (mm):</label><input id=width type=number min=1 step=0.1></div><button type=button class=swap-button></button><div class=form-group><label for=height> (mm):</label><input id=height type=number min=1 step=0.1></div></div><div class=area-display>: <!> mm</div></div><div class=form-section><h4></h4><div class=properties-row><div class=form-group><label for=thickness> (mm):</label><input id=thickness type=number min=0.1 step=0.1></div><div class=form-group><label for=quantity>:</label><input id=quantity type=number min=1></div><div class=form-group><label for=margin> (mm):</label><input id=margin type=number min=0 step=0.1></div></div></div><div class=sheet-preview-section><h4></h4><div class=sheet-preview-container><div class=sheet-preview-visual><div class=sheet-preview-margin></div></div><div class=preview-info><div class=preview-detail>  <!> mm</div><div class=preview-detail>: <!> mm</div></div></div></div></div><div class=form-actions><button type=button class="button secondary"></button><button type=button class="button primary">'),$o=L("<option>"),yo=L("<button type=button class=preset-button>");const So=t=>{const[e]=be("sheets"),[s,n]=Y(""),[i,r]=Y(200),[a,o]=Y(200),[l,u]=Y(3),[f,h]=Y(1),[d,g]=Y(5),[p,m]=Y("Generic"),[v,y]=Y({}),x=["Generic","Wood - Plywood","Wood - MDF","Wood - Hardwood","Metal - Aluminum","Metal - Steel","Metal - Brass","Plastic - Acrylic","Plastic - ABS","Cardboard","Fabric","Leather","Paper"],A=[{name:"A4",width:210,height:297},{name:"A3",width:297,height:420},{name:"A2",width:420,height:594},{name:"A1",width:594,height:841},{name:"Letter",width:216,height:279},{name:"Legal",width:216,height:356},{name:'1212"',width:305,height:305},{name:'2424"',width:610,height:610},{name:'4824"',width:1219,height:610}];Cs(()=>{const C=t.sheet;C?(n(C.name||""),r(C.width),o(C.height),u(C.thickness||3),h(C.quantity||1),g(C.margin||5),m(C.material||"Generic")):(n(""),r(200),o(200),u(3),h(1),g(5),m("Generic")),y({})});const _=()=>{const C={};return i()<=0&&(C.width=e("width_must_be_positive")),a()<=0&&(C.height=e("height_must_be_positive")),l()<=0&&(C.thickness=e("thickness_must_be_positive")),f()<=0&&(C.quantity=e("quantity_must_be_positive")),d()<0&&(C.margin=e("margin_cannot_be_negative")),y(C),Object.keys(C).length===0},w=()=>{if(!_())return;const C={id:t.sheet?.id||`sheet_${Date.now()}`,name:s().trim()||`Sheet ${Date.now()}`,width:i(),height:a(),thickness:l(),quantity:f(),margin:d(),material:p()};t.onSave(C)},D=C=>{r(C.width),o(C.height),s().trim()||n(C.name)},P=()=>{const C=i();r(a()),o(C)},U=()=>(i()*a()).toFixed(0);return(()=>{var C=bo(),B=C.firstChild,O=B.firstChild,Q=O.firstChild,E=Q.nextSibling,R=E.firstChild,T=R.firstChild,K=R.nextSibling,ee=E.nextSibling,M=ee.firstChild,z=M.firstChild,k=M.nextSibling,W=O.nextSibling,G=W.firstChild,te=G.nextSibling,ae=te.nextSibling,oe=ae.firstChild,de=oe.firstChild,$e=de.firstChild,ge=de.nextSibling,we=oe.nextSibling,ye=we.nextSibling,Ce=ye.firstChild,he=Ce.firstChild,ve=Ce.nextSibling,_e=ae.nextSibling,Ee=_e.firstChild,ze=Ee.nextSibling;ze.nextSibling;var Ve=W.nextSibling,Re=Ve.firstChild,Ie=Re.nextSibling,De=Ie.firstChild,Me=De.firstChild,F=Me.firstChild,se=Me.nextSibling,X=De.nextSibling,V=X.firstChild,ce=V.firstChild,pe=V.nextSibling,ne=X.nextSibling,Pe=ne.firstChild,Ue=Pe.firstChild,Ke=Pe.nextSibling,ut=Ve.nextSibling,Qe=ut.firstChild,dt=Qe.nextSibling,Be=dt.firstChild,qt=Be.firstChild,Wt=Be.nextSibling,ft=Wt.firstChild,Ht=ft.firstChild,Jt=Ht.nextSibling;Jt.nextSibling;var Nt=ft.nextSibling,Gt=Nt.firstChild,Qt=Gt.nextSibling;Qt.nextSibling;var Js=B.nextSibling,At=Js.firstChild,Xt=At.nextSibling;return c(Q,()=>e("basic_information")),c(R,()=>e("sheet_name"),T),K.$$input=$=>n($.currentTarget.value),c(M,()=>e("material"),z),k.addEventListener("change",$=>m($.currentTarget.value)),c(k,S(Ae,{each:x,children:$=>(()=>{var me=$o();return me.value=$,c(me,$),me})()})),c(G,()=>e("dimensions")),c(te,S(Ae,{each:A,children:$=>(()=>{var me=yo();return me.$$click=()=>D($),c(me,()=>$.name),j(()=>q(me,"title",`${$.width}  ${$.height} mm`)),me})()})),c(de,()=>e("width"),$e),ge.$$input=$=>r(parseFloat($.currentTarget.value)||0),c(oe,S(H,{get when(){return v().width},get children(){var $=tt();return c($,()=>v().width),$}}),null),we.$$click=P,c(Ce,()=>e("height"),he),ve.$$input=$=>o(parseFloat($.currentTarget.value)||0),c(ye,S(H,{get when(){return v().height},get children(){var $=tt();return c($,()=>v().height),$}}),null),c(_e,()=>e("area"),Ee),c(_e,U,ze),c(Re,()=>e("properties")),c(Me,()=>e("thickness"),F),se.$$input=$=>u(parseFloat($.currentTarget.value)||0),c(De,S(H,{get when(){return v().thickness},get children(){var $=tt();return c($,()=>v().thickness),$}}),null),c(V,()=>e("quantity"),ce),pe.$$input=$=>h(parseInt($.currentTarget.value)||0),c(X,S(H,{get when(){return v().quantity},get children(){var $=tt();return c($,()=>v().quantity),$}}),null),c(Pe,()=>e("margin"),Ue),Ke.$$input=$=>g(parseFloat($.currentTarget.value)||0),c(ne,S(H,{get when(){return v().margin},get children(){var $=tt();return c($,()=>v().margin),$}}),null),c(Qe,()=>e("preview")),Be.style.setProperty("max-width","200px"),Be.style.setProperty("max-height","200px"),c(ft,i,Ht),c(ft,a,Jt),c(Nt,()=>e("area"),Gt),c(Nt,U,Qt),c(Wt,S(H,{get when(){return d()>0},get children(){var $=_o(),me=$.firstChild,Xe=me.nextSibling;return Xe.nextSibling,c($,()=>e("margin"),me),c($,d,Xe),$}}),null),fn(At,"click",t.onCancel),c(At,()=>e("cancel")),Xt.$$click=w,c(Xt,(()=>{var $=Fe(()=>!!t.sheet);return()=>$()?e("update_sheet"):e("add_sheet")})()),j($=>{var me=e("enter_sheet_name"),Xe=`form-input ${v().width?"error":""}`,Yt=e("swap_dimensions"),Zt=`form-input ${v().height?"error":""}`,es=`form-input ${v().thickness?"error":""}`,ts=`form-input ${v().quantity?"error":""}`,ss=`form-input ${v().margin?"error":""}`,Et=`${i()} / ${a()}`,Rt=`${Math.max(d()/Math.max(i(),a())*100,2)}%`;return me!==$.e&&q(K,"placeholder",$.e=me),Xe!==$.t&&Oe(ge,$.t=Xe),Yt!==$.a&&q(we,"title",$.a=Yt),Zt!==$.o&&Oe(ve,$.o=Zt),es!==$.i&&Oe(se,$.i=es),ts!==$.n&&Oe(pe,$.n=ts),ss!==$.s&&Oe(Ke,$.s=ss),Et!==$.h&&(($.h=Et)!=null?Be.style.setProperty("aspect-ratio",Et):Be.style.removeProperty("aspect-ratio")),Rt!==$.r&&(($.r=Rt)!=null?qt.style.setProperty("margin",Rt):qt.style.removeProperty("margin")),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),j(()=>K.value=s()),j(()=>k.value=p()),j(()=>ge.value=i()),j(()=>ve.value=a()),j(()=>se.value=l()),j(()=>pe.value=f()),j(()=>Ke.value=d()),C})()};xe(["input","click"]);var xo=L("<div class=sheet-config-overlay><div class=sheet-config-modal><div class=modal-header><h3></h3><button class=close-button>"),wo=L("<div class=sheets-list><div class=list-header><h3></h3></div><div class=sheets-grid>"),Co=L('<div class=sheets-panel><div class=panel-header><h2></h2><div class=panel-actions><button class="button primary"> </button></div></div><div class=sheets-summary><div class=summary-item><span class=summary-label>:</span><span class=summary-value></span></div><div class=summary-item><span class=summary-label>:</span><span class=summary-value> mm</span></div></div><div class=panel-content>'),ko=L("<div class=empty-state><div class=empty-icon></div><h3></h3><p></p><div class=template-section><h4></h4><div class=template-grid>"),Po=L("<button class=template-button><div class=template-name></div><div class=template-size>  "),Lo=L("<div class=detail-item><span class=detail-label>:</span><span class=detail-value> mm"),Oo=L('<div class=sheet-card><div class=sheet-preview><div class=sheet-visual><div class=sheet-rectangle><div class=sheet-margin></div></div></div></div><div class=sheet-info><div class=sheet-title></div><div class=sheet-details><div class=detail-item><span class=detail-label>:</span><span class=detail-value></span></div><div class=detail-item><span class=detail-label>:</span><span class=detail-value></span></div><div class=detail-item><span class=detail-label>:</span><span class=detail-value></span></div></div><div class=sheet-actions><button class=button-link></button><button class="button-link danger">');const No=()=>{const[t]=be("sheets"),[e,s]=Y(!1),[n,i]=Y(null),r=J(()=>b.app.sheets.length),a=J(()=>b.app.sheets.reduce((m,v)=>m+v.width*v.height,0)),o=[{name:"A4",width:210,height:297,units:"mm"},{name:"A3",width:297,height:420,units:"mm"},{name:"A2",width:420,height:594,units:"mm"},{name:"A1",width:594,height:841,units:"mm"},{name:"Letter",width:216,height:279,units:"mm"},{name:"Legal",width:216,height:356,units:"mm"},{name:'12x12"',width:305,height:305,units:"mm"},{name:'24x24"',width:610,height:610,units:"mm"},{name:'48x24"',width:1219,height:610,units:"mm"}],l=()=>{i(null),s(!0)},u=m=>{i(m),s(!0)},f=m=>{const v=b.app.sheets.filter(y=>y.id!==m);I.setSheets(v)},h=m=>{n()?I.updateSheet(m.id,m):I.addSheet(m),s(!1),i(null)},d=()=>{s(!1),i(null)},g=m=>{const v={name:m.name,width:m.width,height:m.height,thickness:3,quantity:1,margin:5,material:"Generic"};I.addSheet(v)},p=m=>`${m.width}  ${m.height} mm`;return(()=>{var m=Co(),v=m.firstChild,y=v.firstChild,x=y.nextSibling,A=x.firstChild;A.firstChild;var _=v.nextSibling,w=_.firstChild,D=w.firstChild,P=D.firstChild,U=D.nextSibling,C=w.nextSibling,B=C.firstChild,O=B.firstChild,Q=B.nextSibling,E=Q.firstChild,R=_.nextSibling;return c(y,()=>t("sheets_title")),A.$$click=l,c(A,()=>t("add_sheet"),null),c(D,()=>t("total_sheets"),P),c(U,r),c(B,()=>t("total_area"),O),c(Q,()=>a().toFixed(0),E),c(m,S(H,{get when(){return e()},get children(){var T=xo(),K=T.firstChild,ee=K.firstChild,M=ee.firstChild,z=M.nextSibling;return c(M,(()=>{var k=Fe(()=>!!n());return()=>k()?t("edit_sheet"):t("add_new_sheet")})()),z.$$click=d,c(K,S(So,{get sheet(){return n()},onSave:h,onCancel:d}),null),T}}),R),c(R,S(H,{get when(){return r()>0},get fallback(){return(()=>{var T=ko(),K=T.firstChild,ee=K.nextSibling,M=ee.nextSibling,z=M.nextSibling,k=z.firstChild,W=k.nextSibling;return c(ee,()=>t("no_sheets_loaded")),c(M,()=>t("add_sheets_to_get_started")),c(k,()=>t("quick_templates")),c(W,S(Ae,{each:o,children:G=>(()=>{var te=Po(),ae=te.firstChild,oe=ae.nextSibling,de=oe.firstChild;return te.$$click=()=>g(G),c(ae,()=>G.name),c(oe,()=>G.width,de),c(oe,()=>G.height,null),j(()=>q(te,"title",`${G.width}  ${G.height} ${G.units}`)),te})()})),T})()},get children(){var T=wo(),K=T.firstChild,ee=K.firstChild,M=K.nextSibling;return c(ee,()=>t("configured_sheets")),c(M,S(Ae,{get each(){return b.app.sheets},children:(z,k)=>(()=>{var W=Oo(),G=W.firstChild,te=G.firstChild,ae=te.firstChild,oe=ae.firstChild,de=G.nextSibling,$e=de.firstChild,ge=$e.nextSibling,we=ge.firstChild,ye=we.firstChild,Ce=ye.firstChild,he=ye.nextSibling,ve=we.nextSibling,_e=ve.firstChild,Ee=_e.firstChild,ze=_e.nextSibling,Ve=ve.nextSibling,Re=Ve.firstChild,Ie=Re.firstChild,De=Re.nextSibling,Me=ge.nextSibling,F=Me.firstChild,se=F.nextSibling;return ae.style.setProperty("max-width","120px"),ae.style.setProperty("max-height","120px"),oe.style.setProperty("margin","8px"),c($e,()=>z.name||`${t("sheet")} ${k()+1}`),c(ye,()=>t("dimensions"),Ce),c(he,()=>p(z)),c(_e,()=>t("quantity"),Ee),c(ze,()=>z.quantity),c(Re,()=>t("material"),Ie),c(De,()=>z.material||"Generic"),c(ge,S(H,{get when(){return z.margin},get children(){var X=Lo(),V=X.firstChild,ce=V.firstChild,pe=V.nextSibling,ne=pe.firstChild;return c(V,()=>t("margin"),ce),c(pe,()=>z.margin,ne),X}}),null),F.$$click=()=>u(z),c(F,()=>t("edit")),se.$$click=()=>f(z.id),c(se,()=>t("delete")),j(X=>(X=`${z.width} / ${z.height}`)!=null?ae.style.setProperty("aspect-ratio",X):ae.style.removeProperty("aspect-ratio")),W})()})),T}})),j(()=>q(A,"title",t("add_sheet"))),m})()};xe(["click"]);var Ao=L('<div class=settings-panel><div class=panel-header><h2></h2><div class=panel-actions><button class="button secondary"></button></div></div><div class=panel-content><div class=settings-sections><p>Settings and configuration will be implemented here.</p><p>This will include:</p><ul><li>Nesting algorithm parameters</li><li>Import/Export settings</li><li>UI preferences</li><li>Preset management</li><li>Advanced settings');const Eo=()=>{const[t]=be("navigation"),[e]=be("actions");return(()=>{var s=Ao(),n=s.firstChild,i=n.firstChild,r=i.nextSibling,a=r.firstChild;return c(i,()=>t("settings")),c(a,()=>e("reset_defaults")),s})()};var Ro=L("<main class=main-content>");const Fo=()=>(()=>{var t=Ro();return c(t,S(cn,{get children(){return[S(ht,{get when(){return b.ui.activeTab==="parts"},get children(){return S(Wa,{})}}),S(ht,{get when(){return b.ui.activeTab==="nests"},get children(){return S(vo,{})}}),S(ht,{get when(){return b.ui.activeTab==="sheets"},get children(){return S(No,{})}}),S(ht,{get when(){return b.ui.activeTab==="settings"},get children(){return S(Eo,{})}})]}})),t})();var To=L("<div class=progress-container><div class=progress-bar><div class=progress-fill></div></div><span class=progress-text>%"),Io=L("<span class=thread-count>"),Do=L("<span class=parts-count>"),Mo=L("<span class=nests-count>"),Uo=L("<div class=error-status><span class=error-icon></span><span class=error-text>"),jo=L("<footer class=status-bar><div class=status-left><span class=status-text></span></div><div class=status-right>");const zo=()=>{const[t]=be("common"),e=J(()=>{const{process:n}=b;return n.isNesting?t("status.nesting_in_progress"):n.lastError?t("status.error_occurred"):n.workerStatus.isRunning?n.workerStatus.currentOperation||t("status.processing"):t("status.ready")}),s=J(()=>Math.max(0,Math.min(100,b.process.progress)));return(()=>{var n=jo(),i=n.firstChild,r=i.firstChild,a=i.nextSibling;return c(r,e),c(i,S(H,{get when(){return b.process.isNesting},get children(){var o=To(),l=o.firstChild,u=l.firstChild,f=l.nextSibling,h=f.firstChild;return c(f,()=>s().toFixed(1),h),j(d=>(d=`${s()}%`)!=null?u.style.setProperty("width",d):u.style.removeProperty("width")),o}}),null),c(a,S(H,{get when(){return b.process.workerStatus.threadsActive>0},get children(){var o=Io();return c(o,()=>t("status.threads_active",{count:b.process.workerStatus.threadsActive})),o}}),null),c(a,S(H,{get when(){return b.app.parts.length>0},get children(){var o=Do();return c(o,()=>t("status.parts_loaded",{count:b.app.parts.length})),o}}),null),c(a,S(H,{get when(){return b.app.nests.length>0},get children(){var o=Mo();return c(o,()=>t("status.nests_available",{count:b.app.nests.length})),o}}),null),c(a,S(H,{get when(){return b.process.lastError},get children(){var o=Uo(),l=o.firstChild,u=l.nextSibling;return c(u,()=>b.process.lastError),o}}),null),n})()};var Vo=L('<div><div class=resizable-left></div><div class=resizable-handle title="Drag to resize"><div class=resizable-handle-line></div></div><div class=resizable-right>');const Ko=t=>{const{minLeftWidth:e=250,maxLeftWidth:s=500,defaultLeftWidth:n=300}=t,[i,r]=Y(!1),[a,o]=Y(b.ui.panels.partsWidth||n);let l,u;const f=g=>{g.preventDefault(),r(!0),document.addEventListener("mousemove",h),document.addEventListener("mouseup",d),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},h=g=>{if(!i()||!l)return;const p=l.getBoundingClientRect(),m=g.clientX-p.left,v=Math.max(e,Math.min(s,m));o(v),I.setPanelWidth("partsWidth",v)},d=()=>{r(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d),document.body.style.cursor="",document.body.style.userSelect=""};return Kt(()=>{o(b.ui.panels.partsWidth||n)}),ks(()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d),document.body.style.cursor="",document.body.style.userSelect=""}),(()=>{var g=Vo(),p=g.firstChild,m=p.nextSibling,v=m.nextSibling,y=l;typeof y=="function"?rs(y,g):l=g,c(p,()=>t.left),m.$$mousedown=f;var x=u;return typeof x=="function"?rs(x,m):u=m,c(v,()=>t.right),j(A=>{var _=`resizable-layout ${i()?"resizing":""}`,w=`${a()}px`;return _!==A.e&&Oe(g,A.e=_),w!==A.t&&((A.t=w)!=null?p.style.setProperty("width",w):p.style.removeProperty("width")),A},{e:void 0,t:void 0}),g})()};xe(["mousedown"]);var Bo=L("<div class=layout><div class=layout-body>");const qo=()=>(()=>{var t=Bo(),e=t.firstChild;return c(t,S(Da,{}),e),c(e,S(Ko,{get left(){return S(ja,{})},get right(){return S(Fo,{})},minLeftWidth:200,maxLeftWidth:600,defaultLeftWidth:300})),c(t,S(zo,{}),null),t})();var Wo=L("<div class=app>");const Ho=()=>{Kt(async()=>{if(I.setDarkMode(b.ui.darkMode),t(),ue.isAvailable)try{const e=await ue.readConfig();I.updateConfig(e)}catch(e){console.warn("Failed to load initial config:",e)}});const t=()=>{ue.isAvailable&&(ue.onNestProgress(e=>{I.setNestingProgress(e)}),ue.onNestComplete(e=>{I.setNests(e),I.setNestingStatus(!1)}),ue.onBackgroundProgress(e=>{I.setNestingProgress(e.progress)}),ue.onWorkerStatus(e=>{I.setWorkerStatus(e)}),ue.onNestError(e=>{I.setError(e),I.setNestingStatus(!1)}))};return S(Pa,{get children(){var e=Wo();return c(e,S(qo,{})),e}})},Jo=document.getElementById("root");dn(()=>S(Ho,{}),Jo);
