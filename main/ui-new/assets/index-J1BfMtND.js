(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const gs=!1,us=(t,e)=>t===e,dt=Symbol("solid-proxy"),lr=Symbol("solid-track"),zt={equals:us};let Hr=Jr;const it=1,Bt=2,Wr={owned:null,cleanups:null,context:null,owner:null};var $e=null;let sr=null,fs=null,Le=null,je=null,st=null,er=0;function It(t,e){const r=Le,s=$e,n=t.length===0,i=e===void 0?s:e,l=n?Wr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=n?t:()=>t(()=>qe(()=>Pt(l)));$e=l,Le=null;try{return mt(o,!0)}finally{Le=r,$e=s}}function Y(t,e){e=e?Object.assign({},zt,e):zt;const r={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),Gr(r,n));return[qr.bind(r),s]}function A(t,e,r){const s=xr(t,e,!1,it);Nt(s)}function pt(t,e,r){Hr=xs;const s=xr(t,e,!1,it);s.user=!0,st?st.push(s):Nt(s)}function he(t,e,r){r=r?Object.assign({},zt,r):zt;const s=xr(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=r.equals||void 0,Nt(s),qr.bind(s)}function hs(t){return mt(t,!1)}function qe(t){if(Le===null)return t();const e=Le;Le=null;try{return t()}finally{Le=e}}function br(t){pt(()=>qe(t))}function _r(t){return $e===null||($e.cleanups===null?$e.cleanups=[t]:$e.cleanups.push(t)),t}function dr(){return Le}const[Db,zb]=Y(!1);function ps(t,e){const r=Symbol("context");return{id:r,Provider:vs(r),defaultValue:t}}function ms(t){let e;return $e&&$e.context&&(e=$e.context[t.id])!==void 0?e:t.defaultValue}function Kr(t){const e=he(t),r=he(()=>cr(e()));return r.toArray=()=>{const s=r();return Array.isArray(s)?s:s!=null?[s]:[]},r}function qr(){if(this.sources&&this.state)if(this.state===it)Nt(this);else{const t=je;je=null,mt(()=>Ut(this),!1),je=t}if(Le){const t=this.observers?this.observers.length:0;Le.sources?(Le.sources.push(this),Le.sourceSlots.push(t)):(Le.sources=[this],Le.sourceSlots=[t]),this.observers?(this.observers.push(Le),this.observerSlots.push(Le.sources.length-1)):(this.observers=[Le],this.observerSlots=[Le.sources.length-1])}return this.value}function Gr(t,e,r){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&mt(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],l=sr&&sr.running;l&&sr.disposed.has(i),(l?!i.tState:!i.state)&&(i.pure?je.push(i):st.push(i),i.observers&&Qr(i)),l||(i.state=it)}if(je.length>1e6)throw je=[],new Error},!1)),e}function Nt(t){if(!t.fn)return;Pt(t);const e=er;bs(t,t.value,e)}function bs(t,e,r){let s;const n=$e,i=Le;Le=$e=t;try{s=t.fn(e)}catch(l){return t.pure&&(t.state=it,t.owned&&t.owned.forEach(Pt),t.owned=null),t.updatedAt=r+1,Xr(l)}finally{Le=i,$e=n}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?Gr(t,s):t.value=s,t.updatedAt=r)}function xr(t,e,r,s=it,n){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:$e,context:$e?$e.context:null,pure:r};return $e===null||$e!==Wr&&($e.owned?$e.owned.push(i):$e.owned=[i]),i}function Vt(t){if(t.state===0)return;if(t.state===Bt)return Ut(t);if(t.suspense&&qe(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<er);)t.state&&e.push(t);for(let r=e.length-1;r>=0;r--)if(t=e[r],t.state===it)Nt(t);else if(t.state===Bt){const s=je;je=null,mt(()=>Ut(t,e[0]),!1),je=s}}function mt(t,e){if(je)return t();let r=!1;e||(je=[]),st?r=!0:st=[],er++;try{const s=t();return _s(r),s}catch(s){r||(st=null),je=null,Xr(s)}}function _s(t){if(je&&(Jr(je),je=null),t)return;const e=st;st=null,e.length&&mt(()=>Hr(e),!1)}function Jr(t){for(let e=0;e<t.length;e++)Vt(t[e])}function xs(t){let e,r=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[r++]=s:Vt(s)}for(e=0;e<r;e++)Vt(t[e])}function Ut(t,e){t.state=0;for(let r=0;r<t.sources.length;r+=1){const s=t.sources[r];if(s.sources){const n=s.state;n===it?s!==e&&(!s.updatedAt||s.updatedAt<er)&&Vt(s):n===Bt&&Ut(s,e)}}}function Qr(t){for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e];r.state||(r.state=Bt,r.pure?je.push(r):st.push(r),r.observers&&Qr(r))}}function Pt(t){let e;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),s=t.sourceSlots.pop(),n=r.observers;if(n&&n.length){const i=n.pop(),l=r.observerSlots.pop();s<n.length&&(i.sourceSlots[l]=s,n[s]=i,r.observerSlots[s]=l)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)Pt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Pt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function ys(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Xr(t,e=$e){throw ys(t)}function cr(t){if(typeof t=="function"&&!t.length)return cr(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const s=cr(t[r]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}function vs(t,e){return function(s){let n;return A(()=>n=qe(()=>($e.context={...$e.context,[t]:s.value},Kr(()=>s.children))),void 0),n}}const $s=Symbol("fallback");function kr(t){for(let e=0;e<t.length;e++)t[e]()}function ks(t,e,r={}){let s=[],n=[],i=[],l=0,o=e.length>1?[]:null;return _r(()=>kr(i)),()=>{let d=t()||[],c=d.length,u,g;return d[lr],qe(()=>{let f,p,b,_,$,E,M,C,j;if(c===0)l!==0&&(kr(i),i=[],s=[],n=[],l=0,o&&(o=[])),r.fallback&&(s=[$s],n[0]=It(J=>(i[0]=J,r.fallback())),l=1);else if(l===0){for(n=new Array(c),g=0;g<c;g++)s[g]=d[g],n[g]=It(m);l=c}else{for(b=new Array(c),_=new Array(c),o&&($=new Array(c)),E=0,M=Math.min(l,c);E<M&&s[E]===d[E];E++);for(M=l-1,C=c-1;M>=E&&C>=E&&s[M]===d[C];M--,C--)b[C]=n[M],_[C]=i[M],o&&($[C]=o[M]);for(f=new Map,p=new Array(C+1),g=C;g>=E;g--)j=d[g],u=f.get(j),p[g]=u===void 0?-1:u,f.set(j,g);for(u=E;u<=M;u++)j=s[u],g=f.get(j),g!==void 0&&g!==-1?(b[g]=n[u],_[g]=i[u],o&&($[g]=o[u]),g=p[g],f.set(j,g)):i[u]();for(g=E;g<c;g++)g in b?(n[g]=b[g],i[g]=_[g],o&&(o[g]=$[g],o[g](g))):n[g]=It(m);n=n.slice(0,l=c),s=d.slice(0)}return n});function m(f){if(i[g]=f,o){const[p,b]=Y(g);return o[g]=b,e(d[g],p)}return e(d[g])}}}function k(t,e){return qe(()=>t(e||{}))}const Zr=t=>`Stale read from <${t}>.`;function Ie(t){const e="fallback"in t&&{fallback:()=>t.fallback};return he(ks(()=>t.each,t.children,e||void 0))}function ee(t){const e=t.keyed,r=he(()=>t.when,void 0,void 0),s=e?r:he(r,void 0,{equals:(n,i)=>!n==!i});return he(()=>{const n=s();if(n){const i=t.children;return typeof i=="function"&&i.length>0?qe(()=>i(e?n:()=>{if(!qe(s))throw Zr("Show");return r()})):i}return t.fallback},void 0,void 0)}function ws(t){const e=Kr(()=>t.children),r=he(()=>{const s=e(),n=Array.isArray(s)?s:[s];let i=()=>{};for(let l=0;l<n.length;l++){const o=l,d=n[l],c=i,u=he(()=>c()?void 0:d.when,void 0,void 0),g=d.keyed?u:he(u,void 0,{equals:(m,f)=>!m==!f});i=()=>c()||(g()?[o,u,d]:void 0)}return i});return he(()=>{const s=r()();if(!s)return t.fallback;const[n,i,l]=s,o=l.children;return typeof o=="function"&&o.length>0?qe(()=>o(l.keyed?i():()=>{if(qe(r)()?.[0]!==n)throw Zr("Match");return i()})):o},void 0,void 0)}function Mt(t){return t}const Fe=t=>he(()=>t());function Ss(t,e,r){let s=r.length,n=e.length,i=s,l=0,o=0,d=e[n-1].nextSibling,c=null;for(;l<n||o<i;){if(e[l]===r[o]){l++,o++;continue}for(;e[n-1]===r[i-1];)n--,i--;if(n===l){const u=i<s?o?r[o-1].nextSibling:r[i-o]:d;for(;o<i;)t.insertBefore(r[o++],u)}else if(i===o)for(;l<n;)(!c||!c.has(e[l]))&&e[l].remove(),l++;else if(e[l]===r[i-1]&&r[o]===e[n-1]){const u=e[--n].nextSibling;t.insertBefore(r[o++],e[l++].nextSibling),t.insertBefore(r[--i],u),e[n]=r[i]}else{if(!c){c=new Map;let g=o;for(;g<i;)c.set(r[g],g++)}const u=c.get(e[l]);if(u!=null)if(o<u&&u<i){let g=l,m=1,f;for(;++g<n&&g<i&&!((f=c.get(e[g]))==null||f!==u+m);)m++;if(m>u-o){const p=e[l];for(;o<u;)t.insertBefore(r[o++],p)}else t.replaceChild(r[o++],e[l++])}else l++;else e[l++].remove()}}}const wr="_$DX_DELEGATE";function Cs(t,e,r,s={}){let n;return It(i=>{n=i,e===document?t():a(e,t(),e.firstChild?null:void 0,r)},s.owner),()=>{n(),e.textContent=""}}function v(t,e,r,s){let n;const i=()=>{const o=s?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return o.innerHTML=t,r?o.content.firstChild.firstChild:s?o.firstChild:o.content.firstChild},l=e?()=>qe(()=>document.importNode(n||(n=i()),!0)):()=>(n||(n=i())).cloneNode(!0);return l.cloneNode=l,l}function Te(t,e=window.document){const r=e[wr]||(e[wr]=new Set);for(let s=0,n=t.length;s<n;s++){const i=t[s];r.has(i)||(r.add(i),e.addEventListener(i,Ls))}}function oe(t,e,r){r==null?t.removeAttribute(e):t.setAttribute(e,r)}function ke(t,e){e==null?t.removeAttribute("class"):t.className=e}function Ps(t,e,r,s){Array.isArray(r)?(t[`$$${e}`]=r[0],t[`$$${e}Data`]=r[1]):t[`$$${e}`]=r}function Sr(t,e,r){return qe(()=>t(e,r))}function a(t,e,r,s){if(r!==void 0&&!s&&(s=[]),typeof e!="function")return Ht(t,e,s,r);A(n=>Ht(t,e(),n,r),s)}function Ls(t){let e=t.target;const r=`$$${t.type}`,s=t.target,n=t.currentTarget,i=d=>Object.defineProperty(t,"target",{configurable:!0,value:d}),l=()=>{const d=e[r];if(d&&!e.disabled){const c=e[`${r}Data`];if(c!==void 0?d.call(e,c,t):d.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},o=()=>{for(;l()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const d=t.composedPath();i(d[0]);for(let c=0;c<d.length-2&&(e=d[c],!!l());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===n)break}}else o();i(s)}function Ht(t,e,r,s,n){for(;typeof r=="function";)r=r();if(e===r)return r;const i=typeof e,l=s!==void 0;if(t=l&&r[0]&&r[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===r))return r;if(l){let o=r[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),r=ut(t,r,s,o)}else r!==""&&typeof r=="string"?r=t.firstChild.data=e:r=t.textContent=e}else if(e==null||i==="boolean")r=ut(t,r,s);else{if(i==="function")return A(()=>{let o=e();for(;typeof o=="function";)o=o();r=Ht(t,o,r,s)}),()=>r;if(Array.isArray(e)){const o=[],d=r&&Array.isArray(r);if(gr(o,e,r,n))return A(()=>r=Ht(t,o,r,s,!0)),()=>r;if(o.length===0){if(r=ut(t,r,s),l)return r}else d?r.length===0?Cr(t,o,s):Ss(t,r,o):(r&&ut(t),Cr(t,o));r=o}else if(e.nodeType){if(Array.isArray(r)){if(l)return r=ut(t,r,s,e);ut(t,r,null,e)}else r==null||r===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);r=e}}return r}function gr(t,e,r,s){let n=!1;for(let i=0,l=e.length;i<l;i++){let o=e[i],d=r&&r[t.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))n=gr(t,o,d)||n;else if(c==="function")if(s){for(;typeof o=="function";)o=o();n=gr(t,Array.isArray(o)?o:[o],Array.isArray(d)?d:[d])||n}else t.push(o),n=!0;else{const u=String(o);d&&d.nodeType===3&&d.data===u?t.push(d):t.push(document.createTextNode(u))}}return n}function Cr(t,e,r=null){for(let s=0,n=e.length;s<n;s++)t.insertBefore(e[s],r)}function ut(t,e,r,s){if(r===void 0)return t.textContent="";const n=s||document.createTextNode("");if(e.length){let i=!1;for(let l=e.length-1;l>=0;l--){const o=e[l];if(n!==o){const d=o.parentNode===t;!i&&!l?d?t.replaceChild(n,o):t.insertBefore(n,r):d&&o.remove()}else i=!0}}else t.insertBefore(n,r);return[n]}const ur=Symbol("store-raw"),ht=Symbol("store-node"),rt=Symbol("store-has"),Yr=Symbol("store-self");function es(t){let e=t[dt];if(!e&&(Object.defineProperty(t,dt,{value:e=new Proxy(t,Rs)}),!Array.isArray(t))){const r=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);for(let n=0,i=r.length;n<i;n++){const l=r[n];s[l].get&&Object.defineProperty(t,l,{enumerable:s[l].enumerable,get:s[l].get.bind(e)})}}return e}function Wt(t){let e;return t!=null&&typeof t=="object"&&(t[dt]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Lt(t,e=new Set){let r,s,n,i;if(r=t!=null&&t[ur])return r;if(!Wt(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let l=0,o=t.length;l<o;l++)n=t[l],(s=Lt(n,e))!==n&&(t[l]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const l=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let d=0,c=l.length;d<c;d++)i=l[d],!o[i].get&&(n=t[i],(s=Lt(n,e))!==n&&(t[i]=s))}return t}function Kt(t,e){let r=t[e];return r||Object.defineProperty(t,e,{value:r=Object.create(null)}),r}function Et(t,e,r){if(t[e])return t[e];const[s,n]=Y(r,{equals:!1,internal:!0});return s.$=n,t[e]=s}function Es(t,e){const r=Reflect.getOwnPropertyDescriptor(t,e);return!r||r.get||!r.configurable||e===dt||e===ht||(delete r.value,delete r.writable,r.get=()=>t[dt][e]),r}function ts(t){dr()&&Et(Kt(t,ht),Yr)()}function As(t){return ts(t),Reflect.ownKeys(t)}const Rs={get(t,e,r){if(e===ur)return t;if(e===dt)return r;if(e===lr)return ts(t),r;const s=Kt(t,ht),n=s[e];let i=n?n():t[e];if(e===ht||e===rt||e==="__proto__")return i;if(!n){const l=Object.getOwnPropertyDescriptor(t,e);dr()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(l&&l.get)&&(i=Et(s,e,i)())}return Wt(i)?es(i):i},has(t,e){return e===ur||e===dt||e===lr||e===ht||e===rt||e==="__proto__"?!0:(dr()&&Et(Kt(t,rt),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:As,getOwnPropertyDescriptor:Es};function qt(t,e,r,s=!1){if(!s&&t[e]===r)return;const n=t[e],i=t.length;r===void 0?(delete t[e],t[rt]&&t[rt][e]&&n!==void 0&&t[rt][e].$()):(t[e]=r,t[rt]&&t[rt][e]&&n===void 0&&t[rt][e].$());let l=Kt(t,ht),o;if((o=Et(l,e,n))&&o.$(()=>r),Array.isArray(t)&&t.length!==i){for(let d=t.length;d<i;d++)(o=l[d])&&o.$();(o=Et(l,"length",i))&&o.$(t.length)}(o=l[Yr])&&o.$()}function rs(t,e){const r=Object.keys(e);for(let s=0;s<r.length;s+=1){const n=r[s];qt(t,n,e[n])}}function Ns(t,e){if(typeof e=="function"&&(e=e(t)),e=Lt(e),Array.isArray(e)){if(t===e)return;let r=0,s=e.length;for(;r<s;r++){const n=e[r];t[r]!==n&&qt(t,r,n)}qt(t,"length",s)}else rs(t,e)}function wt(t,e,r=[]){let s,n=t;if(e.length>1){s=e.shift();const l=typeof s,o=Array.isArray(t);if(Array.isArray(s)){for(let d=0;d<s.length;d++)wt(t,[s[d]].concat(e),r);return}else if(o&&l==="function"){for(let d=0;d<t.length;d++)s(t[d],d)&&wt(t,[d].concat(e),r);return}else if(o&&l==="object"){const{from:d=0,to:c=t.length-1,by:u=1}=s;for(let g=d;g<=c;g+=u)wt(t,[g].concat(e),r);return}else if(e.length>1){wt(t[s],e,[s].concat(r));return}n=t[s],r=[s].concat(r)}let i=e[0];typeof i=="function"&&(i=i(n,r),i===n)||s===void 0&&i==null||(i=Lt(i),s===void 0||Wt(n)&&Wt(i)&&!Array.isArray(i)?rs(n,i):qt(t,s,i))}function Fs(...[t,e]){const r=Lt(t||{}),s=Array.isArray(r),n=es(r);function i(...l){hs(()=>{s&&l.length===1?Ns(r,l[0]):wt(r,l)})}return[n,i]}const Ms=[{id:"part-1",name:"Rectangle Part",filename:"rectangle.svg",path:[[0,0],[100,0],[100,50],[0,50]],area:5e3,bounds:{x:0,y:0,width:100,height:50},quantity:5,placed:3,rotation:0,material:"wood",thickness:3,isSelected:!1},{id:"part-2",name:"Circle Part",filename:"circle.svg",path:Is(25,50,50),area:1963.5,bounds:{x:25,y:25,width:50,height:50},quantity:3,placed:2,rotation:0,material:"acrylic",thickness:5,isSelected:!1},{id:"part-3",name:"Triangle Part",filename:"triangle.svg",path:[[0,60],[30,0],[60,60]],area:1800,bounds:{x:0,y:0,width:60,height:60},quantity:8,placed:5,rotation:0,material:"plywood",thickness:6,isSelected:!0}],Os=[{id:"sheet-1",name:"Standard Sheet",width:600,height:400,thickness:3,material:"wood",margin:5,isSelected:!0,bounds:{x:0,y:0,width:600,height:400},utilization:0},{id:"sheet-2",name:"Large Acrylic Sheet",width:800,height:600,thickness:5,material:"acrylic",margin:3,isSelected:!1,bounds:{x:0,y:0,width:800,height:600},utilization:0}],Ts=[{id:"nest-1",sheetId:"sheet-1",placements:[{id:"placement-1",partId:"part-1",x:10,y:10,rotation:0,bounds:{x:10,y:10,width:100,height:50}},{id:"placement-2",partId:"part-2",x:120,y:10,rotation:0,bounds:{x:120,y:10,width:50,height:50}},{id:"placement-3",partId:"part-3",x:10,y:70,rotation:0,bounds:{x:10,y:70,width:60,height:60}}],fitness:.75,utilization:.68,area:12e3,createdAt:new Date().toISOString(),isOptimal:!1},{id:"nest-2",sheetId:"sheet-1",placements:[{id:"placement-4",partId:"part-1",x:5,y:5,rotation:90,bounds:{x:5,y:5,width:50,height:100}},{id:"placement-5",partId:"part-2",x:65,y:5,rotation:0,bounds:{x:65,y:5,width:50,height:50}}],fitness:.82,utilization:.72,area:8500,createdAt:new Date(Date.now()-6e4).toISOString(),isOptimal:!0}],js={"preset-1":{id:"preset-1",name:"Default Laser Settings",description:"Standard settings for laser cutting wood",config:{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:15,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!0,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!0,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString()},"preset-2":{id:"preset-2",name:"High Precision CNC",description:"Tight tolerances for CNC machining",config:{units:"inches",scale:72,spacing:.1,rotations:8,populationSize:50,mutationRate:5,threads:8,placementType:"bottom-left",mergeLines:!1,timeRatio:.8,simplify:!0,tolerance:.001,endpointTolerance:5e-4,svgScale:72,dxfImportUnits:"inches",dxfExportUnits:"inches",exportSheetBounds:!0,exportSheetSpacing:!0,sheetSpacing:.25,useQuantityFromFilename:!1,useSvgPreProcessor:!0,conversionServer:"https://converter.deepnest.app/convert"},createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-72e5).toISOString()}};function Is(t,e,r){const s=[];for(let i=0;i<=32;i++){const l=i/32*2*Math.PI,o=e+t*Math.cos(l),d=r+t*Math.sin(l);s.push([o,d])}return s}const Ds=()=>({ui:{activeTab:"parts",darkMode:!1,language:"en",theme:"auto",showTooltips:!0,showStatusBar:!0,modals:{presetModal:!1,helpModal:!1},panels:{partsWidth:300,resultsHeight:200}},config:{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},app:{parts:Ms,sheets:Os,nests:Ts,presets:js,importedFiles:[]},process:{isNesting:!1,progress:0,currentNest:null,workerStatus:{isRunning:!1,currentOperation:"",threadsActive:0},lastError:null}}),tt=()=>typeof window<"u"&&!window.electronAPI,fr={units:"inches",scale:72,spacing:0,rotations:4,populationSize:10,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.72,endpointTolerance:.36,svgScale:72,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"},Dt={activeTab:"parts",darkMode:!1,language:"en",modals:{presetModal:!1,helpModal:!1},panels:{partsWidth:300,resultsHeight:200}},ss={parts:[],sheets:[],nests:[],presets:{},importedFiles:[]},ns={isNesting:!1,progress:0,currentNest:null,workerStatus:{isRunning:!1,currentOperation:"",threadsActive:0},lastError:null},zs=()=>{try{if(typeof localStorage<"u"){const t=localStorage.getItem("deepnest-ui-state");let e=Dt;if(t){const r=JSON.parse(t);e={...Dt,...r}}return"theme"in localStorage?e.darkMode=localStorage.theme==="dark":e.darkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,e}}catch(t){console.warn("Failed to load UI state from localStorage:",t)}return Dt},is=tt()?Ds():{ui:zs(),config:fr,app:ss,process:ns},[h,fe]=Fs(is);typeof document<"u"&&is.ui.darkMode&&document.documentElement.classList.add("dark");tt()&&console.info("🔧 Development mode: Global store initialized with mock data");const w={setActiveTab:t=>{fe("ui","activeTab",t)},setDarkMode:t=>{if(fe("ui","darkMode",t),typeof localStorage<"u")try{t?localStorage.theme="dark":localStorage.theme="light",localStorage.setItem("deepnest-ui-state",JSON.stringify(h.ui))}catch(e){console.warn("Failed to save theme to localStorage:",e)}},setThemePreference:t=>{if(typeof localStorage<"u")try{if(t==="system"){localStorage.removeItem("theme");const e=window.matchMedia("(prefers-color-scheme: dark)").matches;fe("ui","darkMode",e)}else localStorage.theme=t,fe("ui","darkMode",t==="dark");localStorage.setItem("deepnest-ui-state",JSON.stringify(h.ui))}catch(e){console.warn("Failed to save theme preference to localStorage:",e)}},setLanguage:t=>{if(fe("ui","language",t),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(h.ui))}catch(e){console.warn("Failed to save UI state to localStorage:",e)}},setPanelWidth:(t,e)=>{if(fe("ui","panels",t,e),typeof localStorage<"u")try{localStorage.setItem("deepnest-ui-state",JSON.stringify(h.ui))}catch(r){console.warn("Failed to save UI state to localStorage:",r)}},openModal:t=>{fe("ui","modals",t,!0)},closeModal:t=>{fe("ui","modals",t,!1)},updateConfig:t=>{fe("config",t)},resetConfig:()=>{fe("config",fr)},setParts:t=>{fe("app","parts",t)},addPart:t=>{fe("app","parts",e=>[...e,t])},removePart:t=>{fe("app","parts",e=>e.filter(r=>r.id!==t))},updatePart:(t,e)=>{fe("app","parts",r=>r.id===t,e)},setNests:t=>{fe("app","nests",t)},addNest:t=>{fe("app","nests",e=>[...e,t])},setCurrentNest:t=>{fe("process","currentNest",t)},setPresets:t=>{fe("app","presets",t)},addPreset:t=>{fe("app","presets",t.id,t)},removePreset:t=>{fe("app","presets",e=>{const r={...e};return delete r[t],r})},updatePreset:(t,e)=>{fe("app","presets",t,r=>({...r,...e}))},setNestingStatus:t=>{fe("process","isNesting",t)},setNestingProgress:t=>{fe("process","progress",t)},setWorkerStatus:t=>{fe("process","workerStatus",t)},setError:t=>{fe("process","lastError",t)},setMessage:t=>{t&&console.info("App Message:",t)},setShowTooltips:t=>{fe("ui","showTooltips",t)},setShowStatusBar:t=>{fe("ui","showStatusBar",t)},setTheme:t=>{fe("ui","theme",t)},resetToDefaults:()=>{fe("config",fr),fe("ui",Dt)},reset:()=>{fe("app",ss),fe("process",ns)}};class Bs{eventListeners=new Map;nestingProgress=0;isNesting=!1;activeWorkers=new Set;nestResults=[];get isAvailable(){return tt()||typeof window<"u"&&!!window.electronAPI}async invoke(e,...r){if(!this.isAvailable)throw new Error("IPC not available");if(tt())return this.handleMockInvoke(e,...r);try{return await window.electronAPI.ipcRenderer.invoke(e,...r)}catch(s){throw console.error(`IPC invoke error on channel ${String(e)}:`,s),s}}async handleMockInvoke(e,...r){switch(await new Promise(s=>setTimeout(s,100)),console.info(`🔧 Mock IPC call: ${e}`,r),e){case"read-config":return{units:"mm",scale:1,spacing:2,rotations:4,populationSize:20,mutationRate:10,threads:4,placementType:"gravity",mergeLines:!0,timeRatio:.5,simplify:!1,tolerance:.1,endpointTolerance:.05,svgScale:1,dxfImportUnits:"mm",dxfExportUnits:"mm",exportSheetBounds:!1,exportSheetSpacing:!1,sheetSpacing:10,useQuantityFromFilename:!1,useSvgPreProcessor:!1,conversionServer:"https://converter.deepnest.app/convert"};case"write-config":case"save-preset":case"delete-preset":case"start-nesting":case"stop-nesting":return;case"load-presets":return{default:JSON.stringify({units:"mm",spacing:2,rotations:4}),precision:JSON.stringify({units:"inches",spacing:.1,rotations:8})};case"open-file-dialog":return{canceled:!1,filePaths:["/mock/path/example.svg"]};case"save-file-dialog":return{canceled:!1,filePath:"/mock/path/output.svg"};case"import-parts":return[{id:"mock-part-1",name:"Mock Part",bounds:{x:0,y:0,width:100,height:50},quantity:1,rotation:0}];default:console.warn(`🔧 Unhandled mock IPC channel: ${e}`);return}}simulateBackgroundWorker(){if(!tt())return;console.info("🔧 Simulating background worker progress...");let e=0;const r=setInterval(()=>{e+=.1,this.emitToUIListeners("background-progress",{index:0,progress:Math.min(e,1)}),e>=1&&(clearInterval(r),this.emitToUIListeners("background-progress",{index:0,progress:-1}),setTimeout(()=>{this.emitToUIListeners("background-response",{index:0,fitness:.85,area:85e3,totalarea:1e5,mergedLength:0,utilisation:.85,placements:[{sheet:0,sheetid:1,sheetplacements:[{id:1,source:0,x:10,y:10,rotation:0}]}]})},500))},200)}async startNesting(e){return this.isNesting=!0,this.nestingProgress=0,this.nestResults=[],this.activeWorkers.clear(),this.eventListeners.has("background-progress")||this.initializeBackgroundWorkerListeners(),this.emitToUIListeners("nest-status",{isRunning:!0,operation:"Starting nesting..."}),tt()?(setTimeout(()=>this.simulateBackgroundWorker(),1e3),Promise.resolve()):this.invoke("start-nesting",e)}async stopNesting(){return this.isNesting=!1,this.activeWorkers.clear(),this.emitToUIListeners("nest-status",{isRunning:!1,operation:"Stopped"}),tt()?Promise.resolve():this.invoke("stop-nesting")}on(e,r){if(!this.isAvailable)return console.warn("IPC not available, listener not registered"),()=>{};const s=String(e);return this.eventListeners.has(s)||this.eventListeners.set(s,new Set),this.eventListeners.get(s).add(r),tt()?(console.info(`🔧 Mock IPC listener registered for: ${s}`),()=>{const n=this.eventListeners.get(s);n&&(n.delete(r),n.size===0&&this.eventListeners.delete(s))}):(window.electronAPI.ipcRenderer.on(e,r),()=>{const n=this.eventListeners.get(s);n&&(n.delete(r),n.size===0&&(this.eventListeners.delete(s),window.electronAPI?.ipcRenderer&&window.electronAPI.ipcRenderer.removeAllListeners(e)))})}send(e,...r){if(!this.isAvailable){console.warn("IPC not available, message not sent");return}if(tt()){console.info(`🔧 Mock IPC send: ${e}`,r);return}window.electronAPI.ipcRenderer.send(e,...r)}async readConfig(){return this.invoke("read-config")}async writeConfig(e){return this.invoke("write-config",JSON.stringify(e))}async savePreset(e,r){return this.invoke("save-preset",e,JSON.stringify(r))}async loadPresets(){return this.invoke("load-presets")}async deletePreset(e){return this.invoke("delete-preset",e)}async openFileDialog(){return this.invoke("open-file-dialog")}async saveFileDialog(){return this.invoke("save-file-dialog")}async importParts(e){return this.invoke("import-parts",e)}stopBackgroundWorker(){this.send("background-stop"),this.isNesting=!1,this.activeWorkers.clear()}initializeBackgroundWorkerListeners(){this.on("background-progress",e=>{this.activeWorkers.add(e.index),e.progress===-1&&this.activeWorkers.delete(e.index),this.nestingProgress=e.progress===-1?1:Math.max(this.nestingProgress,e.progress),this.emitToUIListeners("nest-progress",this.nestingProgress),this.emitToUIListeners("nest-status",{isRunning:this.isNesting&&this.activeWorkers.size>0,operation:e.progress===-1?"Complete":"Calculating placement..."})}),this.on("background-response",e=>{this.handleBackgroundWorkerResult(e)}),this.on("setPlacements",e=>{this.handleBackgroundWorkerResult(e)})}handleBackgroundWorkerResult(e){const r={id:`result-${e.index}`,fitness:e.fitness,area:e.area,totalArea:e.totalarea,utilisation:e.utilisation,sheets:e.placements.map(s=>({id:s.sheetid,parts:s.sheetplacements.map(n=>({id:n.id,x:n.x,y:n.y,rotation:n.rotation}))}))};this.nestResults.push(r),(this.nestResults.length===1||e.fitness<Math.min(...this.nestResults.map(s=>s.fitness)))&&this.emitToUIListeners("nest-complete",[...this.nestResults])}emitToUIListeners(e,r){const s=this.eventListeners.get(e);s&&s.forEach(n=>{try{n(r)}catch(i){console.error(`Error in ${e} listener:`,i)}})}onNestProgress(e){return this.on("nest-progress",e)}onNestComplete(e){return this.on("nest-complete",e)}onNestStatus(e){return this.on("nest-status",e)}onNestError(e){return this.on("nest-error",e)}onBackgroundProgress(e){return this.on("background-progress",e)}onBackgroundResponse(e){return this.on("background-response",e)}onSetPlacements(e){return this.on("setPlacements",e)}cleanup(){if(this.isAvailable){for(const e of this.eventListeners.keys())window.electronAPI.ipcRenderer.removeAllListeners(e);this.eventListeners.clear(),this.isNesting=!1,this.nestingProgress=0,this.activeWorkers.clear(),this.nestResults=[]}}}const Z=new Bs,re=t=>typeof t=="string",vt=()=>{let t,e;const r=new Promise((s,n)=>{t=s,e=n});return r.resolve=t,r.reject=e,r},Pr=t=>t==null?"":""+t,Vs=(t,e,r)=>{t.forEach(s=>{e[s]&&(r[s]=e[s])})},Us=/###/g,Lr=t=>t&&t.indexOf("###")>-1?t.replace(Us,"."):t,Er=t=>!t||re(t),St=(t,e,r)=>{const s=re(e)?e.split("."):e;let n=0;for(;n<s.length-1;){if(Er(t))return{};const i=Lr(s[n]);!t[i]&&r&&(t[i]=new r),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++n}return Er(t)?{}:{obj:t,k:Lr(s[n])}},Ar=(t,e,r)=>{const{obj:s,k:n}=St(t,e,Object);if(s!==void 0||e.length===1){s[n]=r;return}let i=e[e.length-1],l=e.slice(0,e.length-1),o=St(t,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=St(t,l,Object),o?.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=r},Hs=(t,e,r,s)=>{const{obj:n,k:i}=St(t,e,Object);n[i]=n[i]||[],n[i].push(r)},Gt=(t,e)=>{const{obj:r,k:s}=St(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,s))return r[s]},Ws=(t,e,r)=>{const s=Gt(t,r);return s!==void 0?s:Gt(e,r)},as=(t,e,r)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?re(t[s])||t[s]instanceof String||re(e[s])||e[s]instanceof String?r&&(t[s]=e[s]):as(t[s],e[s],r):t[s]=e[s]);return t},ft=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ks={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const qs=t=>re(t)?t.replace(/[&<>"'\/]/g,e=>Ks[e]):t;class Gs{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Js=[" ",",","?","!",";"],Qs=new Gs(20),Xs=(t,e,r)=>{e=e||"",r=r||"";const s=Js.filter(l=>e.indexOf(l)<0&&r.indexOf(l)<0);if(s.length===0)return!0;const n=Qs.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!n.test(t);if(!i){const l=t.indexOf(r);l>0&&!n.test(t.substring(0,l))&&(i=!0)}return i},hr=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(r);let n=t;for(let i=0;i<s.length;){if(!n||typeof n!="object")return;let l,o="";for(let d=i;d<s.length;++d)if(d!==i&&(o+=r),o+=s[d],l=n[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<s.length-1)continue;i+=d-i+1;break}n=l}return n},At=t=>t?.replace("_","-"),Zs={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class Jt{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||Zs,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,s,n){return n&&!this.debug?null:(re(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new Jt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Jt(this.logger,e)}}var Qe=new Jt;class tr{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const n=this.observers[s].get(r)||0;this.observers[s].set(r,n+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n.apply(n,[e,...r])})}}class Rr extends tr{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,s,n={}){const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,r],s&&(Array.isArray(s)?o.push(...s):re(s)&&i?o.push(...s.split(i)):o.push(s)));const d=Gt(this.data,o);return!d&&!r&&!s&&e.indexOf(".")>-1&&(e=o[0],r=o[1],s=o.slice(2).join(".")),d||!l||!re(s)?d:hr(this.data?.[e]?.[r],s,i)}addResource(e,r,s,n,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,r];s&&(o=o.concat(l?s.split(l):s)),e.indexOf(".")>-1&&(o=e.split("."),n=r,r=o[1]),this.addNamespaces(r),Ar(this.data,o,n),i.silent||this.emit("added",e,r,s,n)}addResources(e,r,s,n={silent:!1}){for(const i in s)(re(s[i])||Array.isArray(s[i]))&&this.addResource(e,r,i,s[i],{silent:!0});n.silent||this.emit("added",e,r,s)}addResourceBundle(e,r,s,n,i,l={silent:!1,skipCopy:!1}){let o=[e,r];e.indexOf(".")>-1&&(o=e.split("."),n=s,s=r,r=o[1]),this.addNamespaces(r);let d=Gt(this.data,o)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?as(d,s,i):d={...d,...s},Ar(this.data,o,d),l.silent||this.emit("added",e,r,s)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(n=>r[n]&&Object.keys(r[n]).length>0)}toJSON(){return this.data}}var os={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,s,n){return t.forEach(i=>{e=this.processors[i]?.process(e,r,s,n)??e}),e}};const Nr={},Fr=t=>!re(t)&&typeof t!="boolean"&&typeof t!="number";class Qt extends tr{constructor(e,r={}){super(),Vs(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qe.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const s={...r};return e==null?!1:this.resolve(e,s)?.res!==void 0}extractFromKey(e,r){let s=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const n=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const l=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Xs(e,s,n);if(l&&!o){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:re(i)?[i]:i};const c=e.split(s);(s!==n||s===n&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(n)}return{key:e,namespaces:re(i)?[i]:i}}translate(e,r,s){let n=typeof r=="object"?{...r}:r;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:d}=this.extractFromKey(e[e.length-1],n),c=d[d.length-1];let u=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const g=n.lng||this.language,m=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g?.toLowerCase()==="cimode")return m?i?{res:`${c}${u}${o}`,usedKey:o,exactUsedKey:o,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${u}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:o;const f=this.resolve(e,n);let p=f?.res;const b=f?.usedKey||o,_=f?.exactUsedKey||o,$=["[object Number]","[object Function]","[object RegExp]"],E=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,M=!this.i18nFormat||this.i18nFormat.handleAsObject,C=n.count!==void 0&&!re(n.count),j=Qt.hasDefaultValue(n),J=C?this.pluralResolver.getSuffix(g,n.count,n):"",D=n.ordinal&&C?this.pluralResolver.getSuffix(g,n.count,{ordinal:!1}):"",W=C&&!n.ordinal&&n.count===0,y=W&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${J}`]||n[`defaultValue${D}`]||n.defaultValue;let x=p;M&&!p&&j&&(x=y);const R=Fr(x),P=Object.prototype.toString.apply(x);if(M&&x&&R&&$.indexOf(P)<0&&!(re(E)&&Array.isArray(x))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,x,{...n,ns:d}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(f.res=S,f.usedParams=this.getUsedParamsDetails(n),f):S}if(l){const S=Array.isArray(x),L=S?[]:{},F=S?_:b;for(const T in x)if(Object.prototype.hasOwnProperty.call(x,T)){const B=`${F}${l}${T}`;j&&!p?L[T]=this.translate(B,{...n,defaultValue:Fr(y)?y[T]:void 0,joinArrays:!1,ns:d}):L[T]=this.translate(B,{...n,joinArrays:!1,ns:d}),L[T]===B&&(L[T]=x[T])}p=L}}else if(M&&re(E)&&Array.isArray(p))p=p.join(E),p&&(p=this.extendTranslation(p,e,n,s));else{let S=!1,L=!1;!this.isValidLookup(p)&&j&&(S=!0,p=y),this.isValidLookup(p)||(L=!0,p=o);const T=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:p,B=j&&y!==p&&this.options.updateMissing;if(L||S||B){if(this.logger.log(B?"updateKey":"missingKey",g,c,o,B?y:p),l){const I=this.resolve(o,{...n,keySeparator:!1});I&&I.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let H=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let I=0;I<q.length;I++)H.push(q[I]);else this.options.saveMissingTo==="all"?H=this.languageUtils.toResolveHierarchy(n.lng||this.language):H.push(n.lng||this.language);const K=(I,se,de)=>{const ie=j&&de!==p?de:T;this.options.missingKeyHandler?this.options.missingKeyHandler(I,c,se,ie,B,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(I,c,se,ie,B,n),this.emit("missingKey",I,c,se,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?H.forEach(I=>{const se=this.pluralResolver.getSuffixes(I,n);W&&n[`defaultValue${this.options.pluralSeparator}zero`]&&se.indexOf(`${this.options.pluralSeparator}zero`)<0&&se.push(`${this.options.pluralSeparator}zero`),se.forEach(de=>{K([I],o+de,n[`defaultValue${de}`]||y)})}):K(H,o,y))}p=this.extendTranslation(p,e,n,f,s),L&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${c}${u}${o}`),(L||S)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${u}${o}`:o,S?p:void 0,n))}return i?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,r,s,n,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=re(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(d){const g=e.match(this.interpolator.nestingRegexp);c=g&&g.length}let u=s.replace&&!re(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,s.lng||this.language||n.usedLng,s),d){const g=e.match(this.interpolator.nestingRegexp),m=g&&g.length;c<m&&(s.nest=!1)}!s.lng&&n&&n.res&&(s.lng=this.language||n.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>i?.[0]===g[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${r[0]}`),null):this.translate(...g,r),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,o=re(l)?[l]:l;return e!=null&&o?.length&&s.applyPostProcessor!==!1&&(e=os.handle(o,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,r={}){let s,n,i,l,o;return re(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(s))return;const c=this.extractFromKey(d,r),u=c.key;n=u;let g=c.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const m=r.count!==void 0&&!re(r.count),f=m&&!r.ordinal&&r.count===0,p=r.context!==void 0&&(re(r.context)||typeof r.context=="number")&&r.context!=="",b=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);g.forEach(_=>{this.isValidLookup(s)||(o=_,!Nr[`${b[0]}-${_}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(Nr[`${b[0]}-${_}`]=!0,this.logger.warn(`key "${n}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach($=>{if(this.isValidLookup(s))return;l=$;const E=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(E,u,$,_,r);else{let C;m&&(C=this.pluralResolver.getSuffix($,r.count,r));const j=`${this.options.pluralSeparator}zero`,J=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(E.push(u+C),r.ordinal&&C.indexOf(J)===0&&E.push(u+C.replace(J,this.options.pluralSeparator)),f&&E.push(u+j)),p){const D=`${u}${this.options.contextSeparator}${r.context}`;E.push(D),m&&(E.push(D+C),r.ordinal&&C.indexOf(J)===0&&E.push(D+C.replace(J,this.options.pluralSeparator)),f&&E.push(D+j))}}let M;for(;M=E.pop();)this.isValidLookup(s)||(i=M,s=this.getResource($,_,M,r))}))})}),{res:s,usedKey:n,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,s,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,r,s,n):this.resourceStore.getResource(e,r,s,n)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!re(e.replace);let n=s?e.replace:e;if(s&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const i of r)delete n[i]}return n}static hasDefaultValue(e){const r="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&r===s.substring(0,r.length)&&e[s]!==void 0)return!0;return!1}}class Mr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qe.create("languageUtils")}getScriptPartFromCode(e){if(e=At(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=At(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(re(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(s=>{if(r)return;const n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(r=n)}),!r&&this.options.supportedLngs&&e.forEach(s=>{if(r)return;const n=this.getScriptPartFromCode(s);if(this.isSupportedCode(n))return r=n;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),re(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let s=e[r];return s||(s=e[this.getScriptPartFromCode(r)]),s||(s=e[this.formatLanguageCode(r)]),s||(s=e[this.getLanguagePartFromCode(r)]),s||(s=e.default),s||[]}toResolveHierarchy(e,r){const s=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),n=[],i=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return re(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):re(e)&&i(this.formatLanguageCode(e)),s.forEach(l=>{n.indexOf(l)<0&&i(this.formatLanguageCode(l))}),n}}const Or={zero:0,one:1,two:2,few:3,many:4,other:5},Tr={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ys{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Qe.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const s=At(e==="dev"?"en":e),n=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(s,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Tr;if(!e.match(/-|_/))return Tr;const d=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(d,r)}return this.pluralRulesCache[i]=l,l}needsPlural(e,r={}){let s=this.getRule(e,r);return s||(s=this.getRule("dev",r)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,r,s={}){return this.getSuffixes(e,s).map(n=>`${r}${n}`)}getSuffixes(e,r={}){let s=this.getRule(e,r);return s||(s=this.getRule("dev",r)),s?s.resolvedOptions().pluralCategories.sort((n,i)=>Or[n]-Or[i]).map(n=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,r,s={}){const n=this.getRule(e,s);return n?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,s))}}const jr=(t,e,r,s=".",n=!0)=>{let i=Ws(t,e,r);return!i&&n&&re(r)&&(i=hr(t,r,s),i===void 0&&(i=hr(e,r,s))),i},nr=t=>t.replace(/\$/g,"$$$$");class en{constructor(e={}){this.logger=Qe.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:s,useRawValueToEscape:n,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:d,formatSeparator:c,unescapeSuffix:u,unescapePrefix:g,nestingPrefix:m,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:b,nestingOptionsSeparator:_,maxReplaces:$,alwaysFormat:E}=e.interpolation;this.escape=r!==void 0?r:qs,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?ft(i):l||"{{",this.suffix=o?ft(o):d||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?ft(m):f||ft("$t("),this.nestingSuffix=p?ft(p):b||ft(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=$||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,s)=>r?.source===s?(r.lastIndex=0,r):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,s,n){let i,l,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){const $=jr(r,d,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format($,void 0,s,{...n,...r,interpolationkey:f}):$}const p=f.split(this.formatSeparator),b=p.shift().trim(),_=p.join(this.formatSeparator).trim();return this.format(jr(r,d,b,this.options.keySeparator,this.options.ignoreJSONStructure),_,s,{...n,...r,interpolationkey:b})};this.resetRegExp();const u=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>nr(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?nr(this.escape(f)):nr(f)}].forEach(f=>{for(o=0;i=f.regex.exec(e);){const p=i[1].trim();if(l=c(p),l===void 0)if(typeof u=="function"){const _=u(e,i,n);l=re(_)?_:""}else if(n&&Object.prototype.hasOwnProperty.call(n,p))l="";else if(g){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),l="";else!re(l)&&!this.useRawValueToEscape&&(l=Pr(l));const b=f.safeValue(l);if(e=e.replace(i[0],b),g?(f.regex.lastIndex+=l.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,r,s={}){let n,i,l;const o=(d,c)=>{const u=this.nestingOptionsSeparator;if(d.indexOf(u)<0)return d;const g=d.split(new RegExp(`${u}[ ]*{`));let m=`{${g[1]}`;d=g[0],m=this.interpolate(m,l);const f=m.match(/'/g),p=m.match(/"/g);((f?.length??0)%2===0&&!p||p.length%2!==0)&&(m=m.replace(/'/g,'"'));try{l=JSON.parse(m),c&&(l={...c,...l})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,b),`${d}${u}${m}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;n=this.nestingRegexp.exec(e);){let d=[];l={...s},l=l.replace&&!re(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const c=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(c!==-1&&(d=n[1].slice(c).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),n[1]=n[1].slice(0,c)),i=r(o.call(this,n[1].trim(),l),l),i&&n[0]===e&&!re(i))return i;re(i)||(i=Pr(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),d.length&&(i=d.reduce((u,g)=>this.format(u,g,s.lng,{...s,interpolationkey:n[1].trim()}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const tn=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);e==="currency"&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach(l=>{if(l){const[o,...d]=l.split(":"),c=d.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();r[u]||(r[u]=c),c==="false"&&(r[u]=!1),c==="true"&&(r[u]=!0),isNaN(c)||(r[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:r}},Ir=t=>{const e={};return(r,s,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const l=s+JSON.stringify(i);let o=e[l];return o||(o=t(At(s),n),e[l]=o),o(r)}},rn=t=>(e,r,s)=>t(At(r),s)(e);class sn{constructor(e={}){this.logger=Qe.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const s=r.cacheInBuiltFormats?Ir:rn;this.formats={number:s((n,i)=>{const l=new Intl.NumberFormat(n,{...i});return o=>l.format(o)}),currency:s((n,i)=>{const l=new Intl.NumberFormat(n,{...i,style:"currency"});return o=>l.format(o)}),datetime:s((n,i)=>{const l=new Intl.DateTimeFormat(n,{...i});return o=>l.format(o)}),relativetime:s((n,i)=>{const l=new Intl.RelativeTimeFormat(n,{...i});return o=>l.format(o,i.range||"day")}),list:s((n,i)=>{const l=new Intl.ListFormat(n,{...i});return o=>l.format(o)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Ir(r)}format(e,r,s,n={}){const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,d)=>{const{formatName:c,formatOptions:u}=tn(d);if(this.formats[c]){let g=o;try{const m=n?.formatParams?.[n.interpolationkey]||{},f=m.locale||m.lng||n.locale||n.lng||s;g=this.formats[c](o,f,{...u,...n,...m})}catch(m){this.logger.warn(m)}return g}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const nn=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class an extends tr{constructor(e,r,s,n={}){super(),this.backend=e,this.store=r,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=Qe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,n.backend,n)}queueLoad(e,r,s,n){const i={},l={},o={},d={};return e.forEach(c=>{let u=!0;r.forEach(g=>{const m=`${c}|${g}`;!s.reload&&this.store.hasResourceBundle(c,g)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?l[m]===void 0&&(l[m]=!0):(this.state[m]=1,u=!1,l[m]===void 0&&(l[m]=!0),i[m]===void 0&&(i[m]=!0),d[g]===void 0&&(d[g]=!0)))}),u||(o[c]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(e,r,s){const n=e.split("|"),i=n[0],l=n[1];r&&this.emit("failedLoading",i,l,r),!r&&s&&this.store.addResourceBundle(i,l,s,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&s&&(this.state[e]=0);const o={};this.queue.forEach(d=>{Hs(d.loaded,[i],l),nn(d,e),r&&d.errors.push(r),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(c=>{o[c]||(o[c]={});const u=d.loaded[c];u.length&&u.forEach(g=>{o[c][g]===void 0&&(o[c][g]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(e,r,s,n=0,i=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:s,tried:n,wait:i,callback:l});return}this.readingCalls++;const o=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(c&&u&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,s,n+1,i*2,l)},i);return}l(c,u)},d=this.backend[s].bind(this.backend);if(d.length===2){try{const c=d(e,r);c&&typeof c.then=="function"?c.then(u=>o(null,u)).catch(o):o(null,c)}catch(c){o(c)}return}return d(e,r,o)}prepareLoading(e,r,s={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();re(e)&&(e=this.languageUtils.toResolveHierarchy(e)),re(r)&&(r=[r]);const i=this.queueLoad(e,r,s,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(e,r,s){this.prepareLoading(e,r,{},s)}reload(e,r,s){this.prepareLoading(e,r,{reload:!0},s)}loadOne(e,r=""){const s=e.split("|"),n=s[0],i=s[1];this.read(n,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${r}loading namespace ${i} for language ${n} failed`,l),!l&&o&&this.logger.log(`${r}loaded namespace ${i} for language ${n}`,o),this.loaded(e,l,o)})}saveMissing(e,r,s,n,i,l={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${s}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const d={...l,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,r,s,n,d):u=c(e,r,s,n),u&&typeof u.then=="function"?u.then(g=>o(null,g)).catch(o):o(null,u)}catch(u){o(u)}else c(e,r,s,n,o,d)}!e||!e[0]||this.store.addResource(e[0],r,s,n)}}}const Dr=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),re(t[1])&&(e.defaultValue=t[1]),re(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(s=>{e[s]=r[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),zr=t=>(re(t.ns)&&(t.ns=[t.ns]),re(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),re(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Ot=()=>{},on=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Rt extends tr{constructor(e={},r){if(super(),this.options=zr(e),this.services={},this.logger=Qe,this.modules={external:[]},on(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(re(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=Dr();this.options={...s,...this.options,...zr(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Qe.init(n(this.modules.logger),this.options):Qe.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=sn;const u=new Mr(this.options);this.store=new Rr(this.options.resources,this.options);const g=this.services;g.logger=Qe,g.resourceStore=this.store,g.languageUtils=u,g.pluralResolver=new Ys(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(g.formatter=n(c),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new en(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new an(n(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.languageDetector&&(g.languageDetector=n(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=n(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Qt(this.services,this.options),this.translator.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ot),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...u)=>this.store[c](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...u)=>(this.store[c](...u),this)});const o=vt(),d=()=>{const c=(u,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(g),r(u,g)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),o}loadResources(e,r=Ot){let s=r;const n=re(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(n?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(o=>l(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(e,r,s){const n=vt();return typeof e=="function"&&(s=e,e=void 0),typeof r=="function"&&(s=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),s||(s=Ot),this.services.backendConnector.reload(e,r,i=>{n.resolve(),s(i)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&os.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const s=this.languages[r];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const s=vt();this.emit("languageChanging",e);const n=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,d)=>{d?this.isLanguageChangingTo===e&&(n(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,s.resolve((...c)=>this.t(...c)),r&&r(o,(...c)=>this.t(...c))},l=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const d=re(o)?o:o&&o[0],c=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(re(o)?[o]:o);c&&(this.language||n(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,u=>{i(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}getFixedT(e,r,s){const n=(i,l,...o)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([i,l].concat(o)):d={...l},d.lng=d.lng||n.lng,d.lngs=d.lngs||n.lngs,d.ns=d.ns||n.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||s||n.keyPrefix);const c=this.options.keySeparator||".";let u;return d.keyPrefix&&Array.isArray(i)?u=i.map(g=>`${d.keyPrefix}${c}${g}`):u=d.keyPrefix?`${d.keyPrefix}${c}${i}`:i,this.t(u,d)};return re(e)?n.lng=e:n.lngs=e,n.ns=r,n.keyPrefix=s,n}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=r.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(o,d)=>{const c=this.services.backendConnector.state[`${o}|${d}`];return c===-1||c===0||c===2};if(r.precheck){const o=r.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,e)&&(!n||l(i,e)))}loadNamespaces(e,r){const s=vt();return this.options.ns?(re(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),r&&r(n)}),s):(r&&r(),Promise.resolve())}loadLanguages(e,r){const s=vt();re(e)&&(e=[e]);const n=this.options.preload||[],i=e.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=n.concat(i),this.loadResources(l=>{s.resolve(),r&&r(l)}),s):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const n=new Intl.Locale(e);if(n&&n.getTextInfo){const i=n.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new Mr(Dr());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){return new Rt(e,r)}cloneInstance(e={},r=Ot){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},i=new Rt(n);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const o=Object.keys(this.store.data).reduce((d,c)=>(d[c]={...this.store.data[c]},d[c]=Object.keys(d[c]).reduce((u,g)=>(u[g]={...d[c][g]},u),d[c]),d),{});i.store=new Rr(o,n),i.services.resourceStore=i.store}return i.translator=new Qt(i.services,n),i.translator.on("*",(o,...d)=>{i.emit(o,...d)}),i.init(n,r),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const De=Rt.createInstance();De.createInstance=Rt.createInstance;De.createInstance;De.dir;De.init;De.loadResources;De.reloadResources;De.use;De.changeLanguage;De.getFixedT;De.t;De.exists;De.setDefaultNamespace;De.hasLoadedNamespace;De.loadNamespaces;De.loadLanguages;const ln={page_title:"deepnest - Industrial nesting",parts:"Parts",nests:"Nests",sheets:"Sheets",settings:"Settings"},dn={stop_nest:"Stop nest",export:"Export",export_svg:"SVG file",export_dxf:"DXF file",export_json:"JSON file",back:"Back",import:"Import",start_nest:"Start nest",deselect:"Deselect",select:"Select",all:"all",add:"Add",cancel:"Cancel",save_preset:"Save Preset",load:"Load",delete:"Delete",save:"Save",reset_defaults:"set all to default"},cn={size:"Size",sheet:"Sheet",quantity:"Quantity",add_sheet:"Add Sheet",width:"width",height:"height",nesting_config:"Nesting configuration",display_units:"Display units",inches:"inches",mm:"mm",space_between_parts:"Space between parts",curve_tolerance:"Curve tolerance",part_rotations:"Part rotations",optimization_type:"Optimization type",gravity:"Gravity",bounding_box:"Bounding Box",squeeze:"Squeeze",use_rough_approximation:"Use rough approximation",cpu_cores:"CPU cores",import_export:"Import/Export",use_svg_normalizer:"Use SVG Normalizer?",svg_scale:"SVG scale",units_per:"units/",endpoint_tolerance:"Endpoint tolerance",dxf_import_units:"DXF import units",points:"Points",picas:"Picas",inches_cap:"Inches",cm:"cm",dxf_export_units:"DXF export units",export_with_sheet_boundaries:"Export with Sheet Boundborders?",export_with_sheets_space:"Export with Space between Sheets?",distance_between_sheets:"Distance between Sheets?",laser_options:"Laser options",merge_common_lines:"Merge common lines",optimization_ratio:"Optimization ratio",meta_heuristic_tuning:"Meta-heuristic fine tuning",ga_population:"GA population",ga_mutation_rate:"GA mutation rate",other_settings:"Other Settings",use_quantity_from_filename:"Use Quantity from filename",presets:"Presets",save_config_presets:"Save Configuration Presets",load_delete_presets:"Load/Delete Configuration Presets",select_preset_default:"-- Select a preset --",save_preset_title:"Save Preset",enter_preset_name:"Enter preset name"},gn={nesting_in_progress:"Nesting in progress...",error_occurred:"Error occurred",processing:"Processing...",ready:"Ready",threads_active:"{{count}} threads active",parts_loaded:"{{count}} parts loaded",nests_available:"{{count}} nests available"},Br={navigation:ln,actions:dn,labels:cn,status:gn},un="Please enter a preset name",fn="Preset saved successfully!",hn="Error saving preset",pn="Please select a preset to load",mn="Preset loaded successfully!",bn="Selected preset not found",_n="Error loading preset",xn="Please select a preset to delete",yn='Are you sure you want to delete the preset "{{presetName}}"?',vn="Preset deleted successfully!",$n="Error deleting preset",kn="Please import some parts first",wn="Please mark at least one part as the sheet",Sn="No file selected",Cn="An error occurred reading the file",Pn="Error processing SVG",Ln="could not contact file conversion server",En="There was an Error while converting",An={enter_preset_name:un,preset_saved:fn,error_saving_preset:hn,select_preset_to_load:pn,preset_loaded:mn,preset_not_found:bn,error_loading_preset:_n,select_preset_to_delete:xn,confirm_delete_preset:yn,preset_deleted:vn,error_deleting_preset:$n,import_parts_first:kn,mark_part_as_sheet:wn,no_file_selected:Sn,file_read_error:Cn,svg_processing_error:Pn,conversion_server_error:Ln,conversion_error:En},Rn="Parts",Nn="Import Parts",Fn="Export Parts",Mn="Export Selected",On="Delete Selected",Tn="No parts selected",jn="Failed to import parts",In="Failed to export parts",Dn="Total Parts",zn="Total Quantity",Bn="Select All",Vn="Deselect All",Un="No Parts Loaded",Hn="Import SVG or DXF files to get started",Wn="Search parts...",Kn="Sort by",qn="Name",Gn="Quantity",Jn="Size",Qn="Rotation",Xn="Dimensions",Zn="Area",Yn="Preview Error",ei={parts_title:Rn,import:"Import",export:"Export",delete:"Delete",import_parts:Nn,export_parts:Fn,export_selected:Mn,delete_selected:On,no_parts_selected:Tn,import_failed:jn,export_failed:In,total_parts:Dn,total_quantity:zn,select_all:Bn,deselect_all:Vn,no_parts_loaded:Un,import_parts_to_get_started:Hn,search_parts:Wn,sort_by:Kn,name:qn,quantity:Gn,size:Jn,rotation:Qn,dimensions:Xn,area:Zn,preview_error:Yn},ti="Nesting",ri="Start Nesting",si="Stop Nesting",ni="Clear Results",ii="Cannot start nesting: need parts and sheets",ai="Failed to start nesting",oi="Failed to stop nesting",li="Parts to Nest",di="Available Sheets",ci="Results Count",gi="No Nesting Results",ui="Start nesting to see results here",fi="Add parts and sheets first to enable nesting",hi="Nesting in Progress",pi="Est. time remaining",mi="Current Operation",bi="Threads Active",_i="Worker Status",xi="Running",yi="Stopped",vi="Generation",$i="Best Fitness",ki="Refresh Status",wi="Nesting Results",Si="Sorted by efficiency",Ci="Result",Pi="Best",Li="Efficiency",Ei="Fitness",Ai="Sheets Used",Ri="Parts Placed",Ni="View Details",Fi="Back to Results",Mi="Result Details",Oi="Export Result",Ti="Export failed",ji="Click to view",Ii="Zoom Out",Di="Zoom In",zi="Reset View",Bi="Sheet",Vi="Statistics",Ui="Material Efficiency",Hi="Fitness Score",Wi="Material Waste",Ki="Total Parts Placed",qi="Total Material Used",Gi="Generation Time",Ji="Generation Number",Qi="Live Results",Xi="Connected",Zi="Disconnected",Yi="Last Update",ea="Expand",ta="Collapse",ra="Current Progress",sa="Best Result",na="Utilization",ia="Intermediate Results",aa="No intermediate results yet",oa="Connection Lost",la="Reconnect Attempts: {{count}}",da="Error Occurred",ca="Just now",ga="{{count}} seconds ago",ua="{{count}} minutes ago",fa="{{count}} hours ago",ha="Sheets",pa={nesting_title:ti,start_nesting:ri,stop_nesting:si,clear_results:ni,cannot_start_nesting:ii,start_nesting_failed:ai,stop_nesting_failed:oi,parts_to_nest:li,available_sheets:di,results_count:ci,no_nesting_results:gi,start_nesting_to_see_results:ui,add_parts_and_sheets_first:fi,nesting_in_progress:hi,estimated_time_remaining:pi,current_operation:mi,threads_active:bi,worker_status:_i,running:xi,stopped:yi,current_generation:vi,best_fitness:$i,refresh_status:ki,nesting_results:wi,sorted_by_efficiency:Si,result:Ci,best:Pi,efficiency:Li,fitness:Ei,sheets_used:Ai,parts_placed:Ri,view_details:Ni,export:"Export",delete:"Delete",back_to_results:Fi,result_details:Mi,export_result:Oi,export_failed:Ti,click_to_view:ji,zoom_out:Ii,zoom_in:Di,reset_view:zi,sheet:Bi,statistics:Vi,material_efficiency:Ui,fitness_score:Hi,material_waste:Wi,total_parts_placed:Ki,total_material_used:qi,generation_time:Gi,generation_number:Ji,live_results:Qi,connected:Xi,disconnected:Zi,last_update:Yi,expand:ea,collapse:ta,current_progress:ra,best_result:sa,utilization:na,intermediate_results:ia,no_intermediate_results:aa,connection_lost:oa,reconnect_attempts:la,error_occurred:da,just_now:ca,seconds_ago:ga,minutes_ago:ua,hours_ago:fa,sheets:ha},ma="Sheets",ba="Add Sheet",_a="Edit Sheet",xa="Add New Sheet",ya="Total Sheets",va="Total Area",$a="No Sheets Loaded",ka="Add sheets to define your material constraints",wa="Quick Templates",Sa="Configured Sheets",Ca="Sheet",Pa="Dimensions",La="Quantity",Ea="Material",Aa="Margin",Ra="Edit",Na="Basic Information",Fa="Sheet Name",Ma="Enter sheet name (optional)",Oa="Width",Ta="Height",ja="Thickness",Ia="Properties",Da="Area",za="Preview",Ba="Cancel",Va="Update Sheet",Ua="Swap Width/Height",Ha="Width must be greater than 0",Wa="Height must be greater than 0",Ka="Thickness must be greater than 0",qa="Quantity must be greater than 0",Ga="Margin cannot be negative",Ja={sheets_title:ma,add_sheet:ba,edit_sheet:_a,add_new_sheet:xa,total_sheets:ya,total_area:va,no_sheets_loaded:$a,add_sheets_to_get_started:ka,quick_templates:wa,configured_sheets:Sa,sheet:Ca,dimensions:Pa,quantity:La,material:Ea,margin:Aa,edit:Ra,delete:"Delete",basic_information:Na,sheet_name:Fa,enter_sheet_name:Ma,width:Oa,height:Ta,thickness:ja,properties:Ia,area:Da,preview:za,cancel:Ba,update_sheet:Va,swap_dimensions:Ua,width_must_be_positive:Ha,height_must_be_positive:Wa,thickness_must_be_positive:Ka,quantity_must_be_positive:qa,margin_cannot_be_negative:Ga},Qa="Settings",Xa="Preset Management",Za="Algorithm Settings",Ya="UI Preferences",eo="Advanced Settings",to="Reset Defaults",ro="Import Configuration",so="Export Configuration",no="Reset to Defaults",io="Are you sure you want to reset all settings to defaults?",ao="Failed to reset settings",oo="Failed to export configuration",lo="Failed to import configuration",co="Presets allow you to save and restore complete nesting configurations.",go="Create Preset",uo="Create New Preset",fo="Preset Name",ho="Preset name is required",po="Enter preset name",mo="Description (optional)",bo="Enter a description for this preset",_o="Cancel",xo="No Presets Available",yo="Create a preset to save your current configuration",vo="Export Preset",$o="Delete Preset",ko="Load Preset",wo="Active",So="Created",Co="Updated",Po="Are you sure you want to delete preset '{{name}}'?",Lo="Failed to create preset",Eo="Failed to load preset",Ao="Failed to delete preset",Ro="Failed to export preset",No="Failed to import preset",Fo="Import Preset",Mo="Nesting Parameters",Oo="Space Between Parts",To="Minimum distance between parts in millimeters",jo="Curve Tolerance",Io="Tolerance for curve approximation. Lower values = more accurate but slower",Do="Part Rotations",zo="Number of rotation angles to try for each part",Bo="No Rotation",Vo="Free Rotation (any angle)",Uo="Genetic Algorithm",Ho="Population Size",Wo="Number of solutions in each generation. Higher = better results but slower",Ko="Mutation Rate",qo="Probability of random changes. Higher = more exploration but less stability",Go="Advanced Options",Jo="Use Holes",Qo="Consider holes in parts for nesting (experimental)",Xo="Explore Concave",Zo="Try placing parts in concave areas of other parts",Yo="Merge Common Lines",el="Combine overlapping cut lines to reduce cutting time",tl="Use Rough Approximation",rl="Use faster but less accurate calculations for initial placement",sl="Appearance",nl="Language",il="Select the interface language",al="Theme",ol="Choose between light, dark, or automatic theme",ll="Auto (follows system)",dl="Light",cl="Dark",gl="Dark Mode",ul="Use dark colors for the interface",fl="Units and Formatting",hl="Display Units",pl="Units for displaying measurements",ml="Millimeters (mm)",bl="Inches (in)",_l="Centimeters (cm)",xl="Show Grid",yl="Display grid lines in the viewport",vl="Show Rulers",$l="Display measurement rulers",kl="Layout Preferences",wl="Parts Panel Width",Sl="Width of the parts panel in pixels",Cl="Reset",Pl="Show Tooltips",Ll="Display helpful tooltips on hover",El="Show Status Bar",Al="Display the status bar at the bottom",Rl="Performance",Nl="Worker Threads",Fl="Number of CPU threads to use (max: {{max}})",Ml="Enable GPU Acceleration",Ol="Use graphics card for calculations (experimental)",Tl="Enable Caching",jl="Cache calculations to improve performance",Il="Debugging",Dl="Debug Mode",zl="Enable additional debugging information",Bl="Verbose Logging",Vl="Log detailed information to console",Ul="Show Debug Info",Hl="Hide Debug Info",Wl="System Information",Kl="Platform",ql="CPU Cores",Gl="Viewport",Jl="Memory Used",Ql="Memory Total",Xl="Export Debug Info",Zl="Maintenance",Yl="Clear Cache",ed="Clear all cached data and preferences",td="Are you sure you want to clear all cached data?",rd="Cache cleared successfully",sd="Failed to clear cache",nd="Reset Layout",id="Reset panel sizes and positions to defaults",ad="Auto-save Interval",od="minutes",ld="How often to automatically save your work (0 = disabled)",dd={settings_title:Qa,preset_management:Xa,algorithm_settings:Za,ui_preferences:Ya,advanced_settings:eo,import:"Import",export:"Export",reset_defaults:to,import_configuration:ro,export_configuration:so,reset_to_defaults:no,confirm_reset_defaults:io,reset_failed:ao,export_failed:oo,import_failed:lo,preset_description:co,create_preset:go,create_new_preset:uo,preset_name:fo,preset_name_required:ho,enter_preset_name:po,preset_description_optional:mo,enter_preset_description:bo,cancel:_o,no_presets_available:xo,create_preset_to_get_started:yo,export_preset:vo,delete_preset:$o,load_preset:ko,active:wo,created:So,updated:Co,confirm_delete_preset:Po,preset_create_failed:Lo,preset_load_failed:Eo,preset_delete_failed:Ao,preset_export_failed:Ro,preset_import_failed:No,import_preset:Fo,nesting_parameters:Mo,space_between_parts:Oo,spacing_description:To,curve_tolerance:jo,curve_tolerance_description:Io,part_rotations:Do,rotations_description:zo,no_rotation:Bo,"2_rotations":"2 Rotations (0°, 180°)","4_rotations":"4 Rotations (0°, 90°, 180°, 270°)","8_rotations":"8 Rotations (45° steps)","12_rotations":"12 Rotations (30° steps)",free_rotation:Vo,genetic_algorithm:Uo,population_size:Ho,population_size_description:Wo,mutation_rate:Ko,mutation_rate_description:qo,advanced_options:Go,use_holes:Jo,use_holes_description:Qo,explore_concave:Xo,explore_concave_description:Zo,merge_common_lines:Yo,merge_lines_description:el,use_rough_approximation:tl,rough_approximation_description:rl,appearance:sl,language:nl,language_description:il,theme:al,theme_description:ol,auto_theme:ll,light_theme:dl,dark_theme:cl,dark_mode:gl,dark_mode_description:ul,units_and_formatting:fl,display_units:hl,units_description:pl,millimeters:ml,inches:bl,centimeters:_l,show_grid:xl,show_grid_description:yl,show_rulers:vl,show_rulers_description:$l,layout_preferences:kl,parts_panel_width:wl,panel_width_description:Sl,reset:Cl,show_tooltips:Pl,tooltips_description:Ll,show_status_bar:El,status_bar_description:Al,performance:Rl,worker_threads:Nl,worker_threads_description:Fl,enable_gpu_acceleration:Ml,gpu_acceleration_description:Ol,enable_caching:Tl,caching_description:jl,debugging:Il,debug_mode:Dl,debug_mode_description:zl,verbose_logging:Bl,verbose_logging_description:Vl,show_debug_info:Ul,hide_debug_info:Hl,system_information:Wl,platform:Kl,cpu_cores:ql,viewport:Gl,memory_used:Jl,memory_total:Ql,export_debug_info:Xl,maintenance:Zl,clear_cache:Yl,clear_cache_description:ed,confirm_clear_cache:td,cache_cleared_success:rd,cache_clear_failed:sd,reset_layout:nd,reset_layout_description:id,auto_save_interval:ad,minutes:od,auto_save_description:ld},cd="File Operations",gd="Drag & Drop Files",ud="Import Files",fd="Export Options",hd="Recent Files",pd="Drop files here to import",md="or click to browse",bd="Supported formats: SVG, DXF, JSON",_d="Select Files",xd="Browse Files",yd="Importing Files...",vd="{{count}} files imported successfully",$d="Importing {{current}} of {{total}} files",kd="Failed to import files",wd="File validation error",Sd="Invalid file format: {{format}}",Cd="File too large: {{size}}. Maximum size is {{max}}",Pd="Failed to read file: {{filename}}",Ld="Export Format",Ed="Export Settings",Ad="Export All",Rd="Export Selected",Nd="Export Current",Fd="Files exported successfully",Md="Failed to export files",Od="SVG Vector",Td="DXF CAD",jd="PDF Document",Id="JSON Data",Dd="Include Sheet Outline",zd="Include Part Labels",Bd="Optimize Cut Paths",Vd="Merge Common Lines",Ud="Export Scale",Hd="Export Units",Wd="No Recent Files",Kd="Clear Recent",qd="Open Recent File",Gd="Pin File",Jd="Unpin File",Qd="Remove from Recent",Xd="File not found: {{filename}}",Zd="Quickly access your recently used files",Yd="Maximum {{count}} recent files",ec="Pinned",tc="Size",rc="Modified",sc="Path",nc="Copy Path",ic="Open File Location",ac="File Information",oc="Processing...",lc="Cancel Import",dc="Retry Import",cc="Skip File",gc="Continue Import",uc="Validation Warning",fc="File contains errors but can be imported",hc="Import Anyway",pc="Fix Errors",mc="Auto Fix",bc="Manual Fix",_c="Error Details",xc="Line {{number}}",yc="Invalid geometry detected",vc="Duplicate points found",$c="Self-intersecting polygon",kc="Unclosed path detected",wc="File is empty",Sc="File appears to be corrupted",Cc="Unsupported file version",Pc="Missing required data",Lc={file_operations:cd,drag_drop_files:gd,import_files:ud,export_options:fd,recent_files:hd,drop_files_here:pd,or_click_to_browse:md,supported_formats:bd,select_files:_d,browse_files:xd,importing_files:yd,files_imported:vd,import_progress:$d,import_failed:kd,file_validation_error:wd,invalid_file_format:Sd,file_too_large:Cd,file_read_error:Pd,export_format:Ld,export_settings:Ed,export_all:Ad,export_selected:Rd,export_current:Nd,export_success:Fd,export_failed:Md,svg_format:Od,dxf_format:Td,pdf_format:jd,json_format:Id,include_sheet:Dd,include_labels:zd,optimize_paths:Bd,merge_lines:Vd,export_scale:Ud,export_units:Hd,no_recent_files:Wd,clear_recent:Kd,open_recent:qd,pin_file:Gd,unpin_file:Jd,remove_from_recent:Qd,file_not_found:Xd,recent_files_description:Zd,max_recent_files:Yd,pinned:ec,file_size:tc,last_modified:rc,file_path:sc,copy_path:nc,open_location:ic,file_info:ac,processing:oc,cancel_import:lc,retry_import:dc,skip_file:cc,continue_import:gc,validation_warning:uc,file_contains_errors:fc,import_anyway:hc,fix_errors:pc,auto_fix:mc,manual_fix:bc,error_details:_c,line_number:xc,invalid_geometry:yc,duplicate_points:vc,self_intersecting:$c,unclosed_path:kc,empty_file:wc,corrupted_file:Sc,unsupported_version:Cc,missing_required_data:Pc},Ec={page_title:"deepnest next - Nesting mit Industrie-Standard",parts:"Teile",nests:"Nester",sheets:"Blätter",settings:"Einstellungen"},Ac={stop_nest:"Nester stoppen",export:"Exportieren",export_svg:"SVG-Datei",export_dxf:"DXF-Datei",export_json:"JSON-Datei",back:"Zurück",import:"Importieren",start_nest:"Nester starten",deselect:"Abwählen",select:"Auswählen",all:"Alle",add:"Hinzufügen",cancel:"Abbrechen",save_preset:"Voreinstellung speichern",load:"Laden",delete:"Löschen",save:"Speichern",reset_defaults:"Alle auf Standard zurücksetzen"},Rc={size:"Größe",sheet:"Blatt",quantity:"Menge",add_sheet:"Blatt hinzufügen",width:"Breite",height:"Höhe",nesting_config:"Nesting-Konfiguration",display_units:"Anzeigeeinheiten",inches:"Zoll",mm:"mm",space_between_parts:"Abstand zwischen Teilen",curve_tolerance:"Kurventoleranz",part_rotations:"Teileinstellungen",optimization_type:"Optimierungstyp",gravity:"Schwerkraft",bounding_box:"Umrandungsbox",squeeze:"Quetschen",use_rough_approximation:"Grobe Annäherung verwenden",cpu_cores:"CPU-Kerne",import_export:"Import/Export",use_svg_normalizer:"SVG-Normalisierer verwenden?",svg_scale:"SVG-Skalierung",units_per:"Einheiten/",endpoint_tolerance:"Endpunkt-Toleranz",dxf_import_units:"DXF-Importeinheiten",points:"Punkte",picas:"Picas",inches_cap:"Zoll",cm:"cm",dxf_export_units:"DXF-Exporteinheiten",export_with_sheet_boundaries:"Export mit Blattgrenzen?",export_with_sheets_space:"Export mit Abstand zwischen Blättern?",distance_between_sheets:"Abstand zwischen Blättern?",laser_options:"Laseroptionen",merge_common_lines:"Gemeinsame Linien zusammenführen",optimization_ratio:"Optimierungsverhältnis",meta_heuristic_tuning:"Meta-heuristische Feinabstimmung",ga_population:"GA-Population",ga_mutation_rate:"GA-Mutationsrate",other_settings:"Weitere Einstellungen",use_quantity_from_filename:"Menge aus Dateinamen verwenden",presets:"Voreinstellungen",save_config_presets:"Voreinstellungen speichern",load_delete_presets:"Voreinstellungen laden/löschen",select_preset_default:"-- Voreinstellung auswählen --",save_preset_title:"Voreinstellung speichern",enter_preset_name:"Voreinstellungsnamen eingeben"},Nc={nesting_in_progress:"Nesting wird durchgeführt...",error_occurred:"Fehler aufgetreten",processing:"Wird verarbeitet...",ready:"Bereit",threads_active:"{{count}} aktive Threads",parts_loaded:"{{count}} Teile geladen",nests_available:"{{count}} Nester verfügbar"},Vr={navigation:Ec,actions:Ac,labels:Rc,status:Nc},Fc="Please enter a preset name",Mc="Preset saved successfully!",Oc="Error saving preset",Tc="Please select a preset to load",jc="Preset loaded successfully!",Ic="Selected preset not found",Dc="Error loading preset",zc="Please select a preset to delete",Bc='Are you sure you want to delete the preset "{{presetName}}"?',Vc="Preset deleted successfully!",Uc="Error deleting preset",Hc="Please import some parts first",Wc="Please mark at least one part as the sheet",Kc="No file selected",qc="An error occurred reading the file",Gc="Error processing SVG",Jc="could not contact file conversion server",Qc="There was an Error while converting",Xc={enter_preset_name:Fc,preset_saved:Mc,error_saving_preset:Oc,select_preset_to_load:Tc,preset_loaded:jc,preset_not_found:Ic,error_loading_preset:Dc,select_preset_to_delete:zc,confirm_delete_preset:Bc,preset_deleted:Vc,error_deleting_preset:Uc,import_parts_first:Hc,mark_part_as_sheet:Wc,no_file_selected:Kc,file_read_error:qc,svg_processing_error:Gc,conversion_server_error:Jc,conversion_error:Qc},Zc="Parts",Yc="Import Parts",eg="Export Parts",tg="Export Selected",rg="Delete Selected",sg="No parts selected",ng="Failed to import parts",ig="Failed to export parts",ag="Total Parts",og="Total Quantity",lg="Select All",dg="Deselect All",cg="No Parts Loaded",gg="Import SVG or DXF files to get started",ug="Search parts...",fg="Sort by",hg="Name",pg="Quantity",mg="Size",bg="Rotation",_g="Dimensions",xg="Area",yg="Preview Error",vg={parts_title:Zc,import:"Import",export:"Export",delete:"Delete",import_parts:Yc,export_parts:eg,export_selected:tg,delete_selected:rg,no_parts_selected:sg,import_failed:ng,export_failed:ig,total_parts:ag,total_quantity:og,select_all:lg,deselect_all:dg,no_parts_loaded:cg,import_parts_to_get_started:gg,search_parts:ug,sort_by:fg,name:hg,quantity:pg,size:mg,rotation:bg,dimensions:_g,area:xg,preview_error:yg},$g="Nesting",kg="Start Nesting",wg="Stop Nesting",Sg="Clear Results",Cg="Cannot start nesting: need parts and sheets",Pg="Failed to start nesting",Lg="Failed to stop nesting",Eg="Parts to Nest",Ag="Available Sheets",Rg="Results Count",Ng="No Nesting Results",Fg="Start nesting to see results here",Mg="Add parts and sheets first to enable nesting",Og="Nesting in Progress",Tg="Est. time remaining",jg="Current Operation",Ig="Threads Active",Dg="Worker Status",zg="Running",Bg="Stopped",Vg="Generation",Ug="Best Fitness",Hg="Refresh Status",Wg="Nesting Results",Kg="Sorted by efficiency",qg="Result",Gg="Best",Jg="Efficiency",Qg="Fitness",Xg="Sheets Used",Zg="Parts Placed",Yg="View Details",eu="Back to Results",tu="Result Details",ru="Export Result",su="Export failed",nu="Click to view",iu="Zoom Out",au="Zoom In",ou="Reset View",lu="Sheet",du="Statistics",cu="Material Efficiency",gu="Fitness Score",uu="Material Waste",fu="Total Parts Placed",hu="Total Material Used",pu="Generation Time",mu="Generation Number",bu={nesting_title:$g,start_nesting:kg,stop_nesting:wg,clear_results:Sg,cannot_start_nesting:Cg,start_nesting_failed:Pg,stop_nesting_failed:Lg,parts_to_nest:Eg,available_sheets:Ag,results_count:Rg,no_nesting_results:Ng,start_nesting_to_see_results:Fg,add_parts_and_sheets_first:Mg,nesting_in_progress:Og,estimated_time_remaining:Tg,current_operation:jg,threads_active:Ig,worker_status:Dg,running:zg,stopped:Bg,current_generation:Vg,best_fitness:Ug,refresh_status:Hg,nesting_results:Wg,sorted_by_efficiency:Kg,result:qg,best:Gg,efficiency:Jg,fitness:Qg,sheets_used:Xg,parts_placed:Zg,view_details:Yg,export:"Export",delete:"Delete",back_to_results:eu,result_details:tu,export_result:ru,export_failed:su,click_to_view:nu,zoom_out:iu,zoom_in:au,reset_view:ou,sheet:lu,statistics:du,material_efficiency:cu,fitness_score:gu,material_waste:uu,total_parts_placed:fu,total_material_used:hu,generation_time:pu,generation_number:mu},_u="Sheets",xu="Add Sheet",yu="Edit Sheet",vu="Add New Sheet",$u="Total Sheets",ku="Total Area",wu="No Sheets Loaded",Su="Add sheets to define your material constraints",Cu="Quick Templates",Pu="Configured Sheets",Lu="Sheet",Eu="Dimensions",Au="Quantity",Ru="Material",Nu="Margin",Fu="Edit",Mu="Basic Information",Ou="Sheet Name",Tu="Enter sheet name (optional)",ju="Width",Iu="Height",Du="Thickness",zu="Properties",Bu="Area",Vu="Preview",Uu="Cancel",Hu="Update Sheet",Wu="Swap Width/Height",Ku="Width must be greater than 0",qu="Height must be greater than 0",Gu="Thickness must be greater than 0",Ju="Quantity must be greater than 0",Qu="Margin cannot be negative",Xu={sheets_title:_u,add_sheet:xu,edit_sheet:yu,add_new_sheet:vu,total_sheets:$u,total_area:ku,no_sheets_loaded:wu,add_sheets_to_get_started:Su,quick_templates:Cu,configured_sheets:Pu,sheet:Lu,dimensions:Eu,quantity:Au,material:Ru,margin:Nu,edit:Fu,delete:"Delete",basic_information:Mu,sheet_name:Ou,enter_sheet_name:Tu,width:ju,height:Iu,thickness:Du,properties:zu,area:Bu,preview:Vu,cancel:Uu,update_sheet:Hu,swap_dimensions:Wu,width_must_be_positive:Ku,height_must_be_positive:qu,thickness_must_be_positive:Gu,quantity_must_be_positive:Ju,margin_cannot_be_negative:Qu},Zu="Settings DE",Yu="Preset Management",e0="Algorithm Settings",t0="UI Preferences",r0="Advanced Settings",s0="Reset Defaults",n0="Import Configuration",i0="Export Configuration",a0="Reset to Defaults",o0="Are you sure you want to reset all settings to defaults?",l0="Failed to reset settings",d0="Failed to export configuration",c0="Failed to import configuration",g0="Presets allow you to save and restore complete nesting configurations.",u0="Create Preset",f0="Create New Preset",h0="Preset Name",p0="Preset name is required",m0="Enter preset name",b0="Description (optional)",_0="Enter a description for this preset",x0="Cancel",y0="No Presets Available",v0="Create a preset to save your current configuration",$0="Export Preset",k0="Delete Preset",w0="Load Preset",S0="Active",C0="Created",P0="Updated",L0="Are you sure you want to delete preset '{{name}}'?",E0="Failed to create preset",A0="Failed to load preset",R0="Failed to delete preset",N0="Failed to export preset",F0="Failed to import preset",M0="Import Preset",O0="Nesting Parameters",T0="Space Between Parts",j0="Minimum distance between parts in millimeters",I0="Curve Tolerance",D0="Tolerance for curve approximation. Lower values = more accurate but slower",z0="Part Rotations",B0="Number of rotation angles to try for each part",V0="No Rotation",U0="Free Rotation (any angle)",H0="Genetic Algorithm",W0="Population Size",K0="Number of solutions in each generation. Higher = better results but slower",q0="Mutation Rate",G0="Probability of random changes. Higher = more exploration but less stability",J0="Advanced Options",Q0="Use Holes",X0="Consider holes in parts for nesting (experimental)",Z0="Explore Concave",Y0="Try placing parts in concave areas of other parts",ef="Merge Common Lines",tf="Combine overlapping cut lines to reduce cutting time",rf="Use Rough Approximation",sf="Use faster but less accurate calculations for initial placement",nf="Appearance",af="Language",of="Select the interface language",lf="Theme",df="Choose between light, dark, or automatic theme",cf="Auto (follows system)",gf="Light",uf="Dark",ff="Dark Mode",hf="Use dark colors for the interface",pf="Units and Formatting",mf="Display Units",bf="Units for displaying measurements",_f="Millimeters (mm)",xf="Inches (in)",yf="Centimeters (cm)",vf="Show Grid",$f="Display grid lines in the viewport",kf="Show Rulers",wf="Display measurement rulers",Sf="Layout Preferences",Cf="Parts Panel Width",Pf="Width of the parts panel in pixels",Lf="Reset",Ef="Show Tooltips",Af="Display helpful tooltips on hover",Rf="Show Status Bar",Nf="Display the status bar at the bottom",Ff="Performance",Mf="Worker Threads",Of="Number of CPU threads to use (max: {{max}})",Tf="Enable GPU Acceleration",jf="Use graphics card for calculations (experimental)",If="Enable Caching",Df="Cache calculations to improve performance",zf="Debugging",Bf="Debug Mode",Vf="Enable additional debugging information",Uf="Verbose Logging",Hf="Log detailed information to console",Wf="Show Debug Info",Kf="Hide Debug Info",qf="System Information",Gf="Platform",Jf="CPU Cores",Qf="Viewport",Xf="Memory Used",Zf="Memory Total",Yf="Export Debug Info",eh="Maintenance",th="Clear Cache",rh="Clear all cached data and preferences",sh="Are you sure you want to clear all cached data?",nh="Cache cleared successfully",ih="Failed to clear cache",ah="Reset Layout",oh="Reset panel sizes and positions to defaults",lh="Auto-save Interval",dh="minutes",ch="How often to automatically save your work (0 = disabled)",gh={settings_title:Zu,preset_management:Yu,algorithm_settings:e0,ui_preferences:t0,advanced_settings:r0,import:"Import",export:"Export",reset_defaults:s0,import_configuration:n0,export_configuration:i0,reset_to_defaults:a0,confirm_reset_defaults:o0,reset_failed:l0,export_failed:d0,import_failed:c0,preset_description:g0,create_preset:u0,create_new_preset:f0,preset_name:h0,preset_name_required:p0,enter_preset_name:m0,preset_description_optional:b0,enter_preset_description:_0,cancel:x0,no_presets_available:y0,create_preset_to_get_started:v0,export_preset:$0,delete_preset:k0,load_preset:w0,active:S0,created:C0,updated:P0,confirm_delete_preset:L0,preset_create_failed:E0,preset_load_failed:A0,preset_delete_failed:R0,preset_export_failed:N0,preset_import_failed:F0,import_preset:M0,nesting_parameters:O0,space_between_parts:T0,spacing_description:j0,curve_tolerance:I0,curve_tolerance_description:D0,part_rotations:z0,rotations_description:B0,no_rotation:V0,"2_rotations":"2 Rotations (0°, 180°)","4_rotations":"4 Rotations (0°, 90°, 180°, 270°)","8_rotations":"8 Rotations (45° steps)","12_rotations":"12 Rotations (30° steps)",free_rotation:U0,genetic_algorithm:H0,population_size:W0,population_size_description:K0,mutation_rate:q0,mutation_rate_description:G0,advanced_options:J0,use_holes:Q0,use_holes_description:X0,explore_concave:Z0,explore_concave_description:Y0,merge_common_lines:ef,merge_lines_description:tf,use_rough_approximation:rf,rough_approximation_description:sf,appearance:nf,language:af,language_description:of,theme:lf,theme_description:df,auto_theme:cf,light_theme:gf,dark_theme:uf,dark_mode:ff,dark_mode_description:hf,units_and_formatting:pf,display_units:mf,units_description:bf,millimeters:_f,inches:xf,centimeters:yf,show_grid:vf,show_grid_description:$f,show_rulers:kf,show_rulers_description:wf,layout_preferences:Sf,parts_panel_width:Cf,panel_width_description:Pf,reset:Lf,show_tooltips:Ef,tooltips_description:Af,show_status_bar:Rf,status_bar_description:Nf,performance:Ff,worker_threads:Mf,worker_threads_description:Of,enable_gpu_acceleration:Tf,gpu_acceleration_description:jf,enable_caching:If,caching_description:Df,debugging:zf,debug_mode:Bf,debug_mode_description:Vf,verbose_logging:Uf,verbose_logging_description:Hf,show_debug_info:Wf,hide_debug_info:Kf,system_information:qf,platform:Gf,cpu_cores:Jf,viewport:Qf,memory_used:Xf,memory_total:Zf,export_debug_info:Yf,maintenance:eh,clear_cache:th,clear_cache_description:rh,confirm_clear_cache:sh,cache_cleared_success:nh,cache_clear_failed:ih,reset_layout:ah,reset_layout_description:oh,auto_save_interval:lh,minutes:dh,auto_save_description:ch},uh="File Operations",fh="Drag & Drop Files",hh="Import Files",ph="Export Options",mh="Recent Files",bh="Drop files here to import",_h="or click to browse",xh="Supported formats: SVG, DXF, JSON",yh="Select Files",vh="Browse Files",$h="Importing Files...",kh="{{count}} files imported successfully",wh="Importing {{current}} of {{total}} files",Sh="Failed to import files",Ch="File validation error",Ph="Invalid file format: {{format}}",Lh="File too large: {{size}}. Maximum size is {{max}}",Eh="Failed to read file: {{filename}}",Ah="Export Format",Rh="Export Settings",Nh="Export All",Fh="Export Selected",Mh="Export Current",Oh="Files exported successfully",Th="Failed to export files",jh="SVG Vector",Ih="DXF CAD",Dh="PDF Document",zh="JSON Data",Bh="Include Sheet Outline",Vh="Include Part Labels",Uh="Optimize Cut Paths",Hh="Merge Common Lines",Wh="Export Scale",Kh="Export Units",qh="No Recent Files",Gh="Clear Recent",Jh="Open Recent File",Qh="Pin File",Xh="Unpin File",Zh="Remove from Recent",Yh="File not found: {{filename}}",ep="Quickly access your recently used files",tp="Maximum {{count}} recent files",rp="Pinned",sp="Size",np="Modified",ip="Path",ap="Copy Path",op="Open File Location",lp="File Information",dp="Processing...",cp="Cancel Import",gp="Retry Import",up="Skip File",fp="Continue Import",hp="Validation Warning",pp="File contains errors but can be imported",mp="Import Anyway",bp="Fix Errors",_p="Auto Fix",xp="Manual Fix",yp="Error Details",vp="Line {{number}}",$p="Invalid geometry detected",kp="Duplicate points found",wp="Self-intersecting polygon",Sp="Unclosed path detected",Cp="File is empty",Pp="File appears to be corrupted",Lp="Unsupported file version",Ep="Missing required data",Ap={file_operations:uh,drag_drop_files:fh,import_files:hh,export_options:ph,recent_files:mh,drop_files_here:bh,or_click_to_browse:_h,supported_formats:xh,select_files:yh,browse_files:vh,importing_files:$h,files_imported:kh,import_progress:wh,import_failed:Sh,file_validation_error:Ch,invalid_file_format:Ph,file_too_large:Lh,file_read_error:Eh,export_format:Ah,export_settings:Rh,export_all:Nh,export_selected:Fh,export_current:Mh,export_success:Oh,export_failed:Th,svg_format:jh,dxf_format:Ih,pdf_format:Dh,json_format:zh,include_sheet:Bh,include_labels:Vh,optimize_paths:Uh,merge_lines:Hh,export_scale:Wh,export_units:Kh,no_recent_files:qh,clear_recent:Gh,open_recent:Jh,pin_file:Qh,unpin_file:Xh,remove_from_recent:Zh,file_not_found:Yh,recent_files_description:ep,max_recent_files:tp,pinned:rp,file_size:sp,last_modified:np,file_path:ip,copy_path:ap,open_location:op,file_info:lp,processing:dp,cancel_import:cp,retry_import:gp,skip_file:up,continue_import:fp,validation_warning:hp,file_contains_errors:pp,import_anyway:mp,fix_errors:bp,auto_fix:_p,manual_fix:xp,error_details:yp,line_number:vp,invalid_geometry:$p,duplicate_points:kp,self_intersecting:wp,unclosed_path:Sp,empty_file:Cp,corrupted_file:Pp,unsupported_version:Lp,missing_required_data:Ep},Rp={fallbackLng:"en",debug:!0,ns:["translation","common","parts","settings","nesting","sheets","files","messages"],defaultNS:"translation",languages:["en","de"],interpolation:{escapeValue:!1},resources:{en:{translation:Br,common:Br,messages:An,parts:ei,nesting:pa,sheets:Ja,settings:dd,files:Lc},de:{translation:Vr,common:Vr,messages:Xc,parts:vg,nesting:bu,sheets:Xu,settings:gh,files:Ap}}},nt=De.createInstance();let pr=!1;const ls="deepnest-language",Np=()=>{try{return localStorage.getItem(ls)}catch(t){return console.warn("Failed to read language from localStorage:",t),null}},mr=t=>{try{localStorage.setItem(ls,t),console.log("✅ Stored language preference:",t)}catch(e){console.warn("Failed to store language in localStorage:",e)}},[Ct,Xt]=Y("en"),[Zt,Fp]=Y(!1),ir=async t=>{pr?(await nt.changeLanguage(t),Xt(t),mr(t),console.log("✅ i18next language changed to:",t)):(await nt.init({...Rp,lng:t}).then(()=>{Xt(t),Fp(!0),mr(t)}),pr=!0,console.log("✅ i18next initialized with language:",t))},ds=ps({t:nt.t.bind(nt),language:Ct.bind(Ct),changeLanguage:Xt.bind(Xt),isReady:Zt.bind(Zt)}),Mp=t=>{console.log("🏗️ I18nProvider: Initializing"),br(async()=>{const s=Np(),n=h.ui.language,i=s||n||"en";console.log("🚀 I18nProvider: Language preference check:",{stored:s,global:n,selected:i}),s&&s!==n&&(console.log(`🔄 Restoring language from localStorage: ${s}`),w.setLanguage(s)),await ir(i)}),pt(async()=>{const s=h.ui.language,n=Ct();console.log(`👀 I18nProvider: globalState.ui.language changed to: ${s}, current: ${n}`),s&&s!==n&&pr&&(console.log(`🔄 I18nProvider: Changing language from ${n} to ${s}`),await ir(s))});const r={t:(s,n)=>{const i=Zt(),l=Ct();if(console.log(`🔍 Translation called: key="${s}", ready=${i}, lang=${l}, typeof key=${typeof s}`),!i)return console.log(`⏳ Translation not ready, returning key: ${s}`),s;if(!s||typeof s!="string")return console.warn("🚨 Invalid translation key:",s),s||"";const o=n?.ns||"translation",d={...n,ns:o};console.log("🔍 About to call i18nInstance.t with:",{key:s,namespace:o,lang:nt.language,hasResources:!!nt.getDataByLanguage(l)?.[o],resources:nt.getDataByLanguage(l)});const c=nt.t(s,d);return console.log(`🔍 i18nInstance.t result: "${c}" for key "${s}"`),c||s},language:Ct,changeLanguage:async s=>{console.log(`🎯 Changing language to: ${s}`),w.setLanguage(s),mr(s),await ir(s)},isReady:Zt};return ds.Provider({value:r,children:t.children})},Me=(t="translation")=>{const e=ms(ds);return e?[(s,n)=>he(()=>{e.language();const l={...n,ns:t};return e.t(s,l)})(),{changeLanguage:e.changeLanguage,language:e.language,isReady:e.isReady}]:(console.warn("useTranslation must be used within I18nProvider"),[s=>s,{changeLanguage:async()=>{},language:()=>"en"}])};var Op=v('<header class="h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-6 shadow-sm"><div class="flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-blue-600 dark:bg-blue-500 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">DN</span></div><h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h1></div></div><div class="flex items-center gap-4"><div class=relative><select class="bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 px-3 py-2 pr-8 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none cursor-pointer"><option value=en>🇺🇸 EN</option><option value=de>🇩🇪 DE</option></select><div class="absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></div></div><button class="flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">'),Tp=v('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"clip-rule=evenodd>'),jp=v('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z">');const Ip=()=>{const[t,{changeLanguage:e}]=Me("common"),r=()=>{const n=h.ui.darkMode?"light":"dark";w.setThemePreference(n)},s=async n=>{console.log(`Header: handleLanguageChange called with ${n}`),console.log("Header: current globalState.ui.language:",h.ui.language),w.setLanguage(n),console.log("Header: after globalActions.setLanguage, globalState.ui.language:",h.ui.language),await e(n),console.log("Header: after changeLanguage call completed")};return(()=>{var n=Op(),i=n.firstChild,l=i.firstChild,o=l.firstChild,d=o.nextSibling,c=i.nextSibling,u=c.firstChild,g=u.firstChild,m=u.nextSibling;return a(d,()=>t("navigation.page_title")),g.addEventListener("change",f=>s(f.currentTarget.value)),m.$$click=r,a(m,(()=>{var f=Fe(()=>!!h.ui.darkMode);return()=>f()?Tp():jp()})()),A(()=>oe(m,"title",h.ui.darkMode?"Switch to light mode":"Switch to dark mode")),A(()=>g.value=h.ui.language),n})()};Te(["click"]);var Dp=v('<nav class="h-full bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col w-full"><div class="flex flex-col py-4"><div class="px-4 mb-4"><h2 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">Navigation</h2></div></div><div class="mt-auto p-4 border-t border-gray-200 dark:border-gray-700"><div class="text-xs text-gray-500 dark:text-gray-400 text-center"><div>DeepNest Frontend</div><div class="mt-1 opacity-75">v2.0.0'),zp=v("<button><span></span><span class=font-medium>"),Bp=v('<div class="ml-auto w-1 h-6 bg-blue-600 dark:bg-blue-400 rounded-full">');const Vp=()=>{const[t]=Me("common"),e=[{id:"parts",labelKey:"navigation.parts",icon:"📦"},{id:"nests",labelKey:"navigation.nests",icon:"🔧"},{id:"sheets",labelKey:"navigation.sheets",icon:"📄"},{id:"settings",labelKey:"navigation.settings",icon:"⚙️"}],r=s=>{w.setActiveTab(s)};return(()=>{var s=Dp(),n=s.firstChild;return n.firstChild,a(n,k(Ie,{each:e,children:i=>(()=>{var l=zp(),o=l.firstChild,d=o.nextSibling;return l.$$click=()=>r(i.id),a(o,()=>i.icon),a(d,()=>t(i.labelKey)),a(l,(()=>{var c=Fe(()=>h.ui.activeTab===i.id);return()=>c()&&Bp()})(),null),A(c=>{var u=`mx-2 mb-1 flex items-center px-4 py-3 text-left transition-all duration-200 rounded-lg group ${h.ui.activeTab===i.id?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 shadow-sm border border-blue-200 dark:border-blue-700":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100"}`,g=t(i.labelKey),m=`text-xl mr-4 transition-transform duration-200 ${h.ui.activeTab===i.id?"scale-110":"group-hover:scale-105"}`;return u!==c.e&&ke(l,c.e=u),g!==c.t&&oe(l,"title",c.t=g),m!==c.a&&ke(o,c.a=m),c},{e:void 0,t:void 0,a:void 0}),l})()}),null),s})()};Te(["click"]);var Up=v('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"><div class="relative flex-1 max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-4 h-4 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200"></div><div class="flex items-center gap-3"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><option value=name></option><option value=quantity></option><option value=size></option></select><button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button></div></div></div><div class="flex-1 overflow-auto"><div class=min-w-full><div class="sticky top-0 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10"><div class="grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><button><span></span></button><button><span></span></button><button><span></span></button><div class="col-span-2 text-center"></div></div></div><div class="bg-white dark:bg-gray-900">'),Tt=v('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 15l7-7 7 7"></svg>',!1,!0,!1),jt=v('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></svg>',!1,!0,!1),ar=v('<svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24">'),Hp=v('<div><div class="col-span-1 flex items-center"><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div><div class="col-span-4 flex items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4 text-gray-500 dark:text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"></p><p class="text-xs text-gray-500 dark:text-gray-400 truncate"></p></div></div></div><div class="col-span-2 flex items-center"><div class=relative><input type=number min=1 class="w-20 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div></div><div class="col-span-3 flex items-center"><div class="flex items-center gap-2"><div class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-gray-600 dark:text-gray-300"></div><span class="text-xs text-gray-500 dark:text-gray-400">mm</span></div></div><div class="col-span-2 flex items-center justify-center"><div class="flex items-center gap-1"><input type=number min=0 max=360 step=90 class="w-16 px-2 py-1.5 text-sm text-center border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-xs text-gray-500 dark:text-gray-400">°');const Wp=()=>{const[t]=Me("parts"),[e,r]=Y(""),[s,n]=Y("name"),[i,l]=Y("asc"),o=he(()=>{let f=h.app.parts;if(e()){const p=e().toLowerCase();f=f.filter(b=>b.name.toLowerCase().includes(p)||b.source.toLowerCase().includes(p))}return f=[...f].sort((p,b)=>{let _,$;switch(s()){case"name":_=p.name,$=b.name;break;case"quantity":_=p.quantity,$=b.quantity;break;case"size":_=p.bounds.width*p.bounds.height,$=b.bounds.width*b.bounds.height;break;default:_=p.name,$=b.name}return typeof _=="string"&&typeof $=="string"?i()==="asc"?_.localeCompare($):$.localeCompare(_):i()==="asc"?_-$:$-_}),f}),d=f=>{w.updatePart(f.id,{selected:!f.selected})},c=(f,p)=>{p<1&&(p=1),w.updatePart(f,{quantity:p})},u=(f,p)=>{w.updatePart(f,{rotation:p})},g=f=>{s()===f?l(i()==="asc"?"desc":"asc"):(n(f),l("asc"))},m=f=>`${f.width.toFixed(1)} × ${f.height.toFixed(1)}`;return(()=>{var f=Up(),p=f.firstChild,b=p.firstChild,_=b.firstChild,$=_.firstChild,E=$.nextSibling,M=_.nextSibling,C=M.firstChild,j=C.firstChild,J=C.nextSibling,D=J.firstChild,W=D.nextSibling,y=W.nextSibling,x=J.nextSibling,R=x.firstChild,P=p.nextSibling,S=P.firstChild,L=S.firstChild,F=L.firstChild,T=F.firstChild,B=T.firstChild,H=T.nextSibling,q=H.firstChild,K=H.nextSibling,I=K.firstChild,se=K.nextSibling,de=se.firstChild,ie=se.nextSibling,U=L.nextSibling;return E.$$input=N=>r(N.currentTarget.value),a(C,()=>t("sort_by"),j),J.addEventListener("change",N=>n(N.currentTarget.value)),a(D,()=>t("name")),a(W,()=>t("quantity")),a(y,()=>t("size")),x.$$click=()=>l(i()==="asc"?"desc":"asc"),a(R,(()=>{var N=Fe(()=>i()==="asc");return()=>N()?Tt():jt()})()),B.addEventListener("change",N=>{const G=N.currentTarget.checked;h.app.parts.forEach(Q=>{w.updatePart(Q.id,{selected:G})})}),H.$$click=()=>g("name"),a(q,()=>t("name")),a(H,(()=>{var N=Fe(()=>s()==="name");return()=>N()&&(()=>{var G=ar();return a(G,(()=>{var Q=Fe(()=>i()==="asc");return()=>Q()?Tt():jt()})()),G})()})(),null),K.$$click=()=>g("quantity"),a(I,()=>t("quantity")),a(K,(()=>{var N=Fe(()=>s()==="quantity");return()=>N()&&(()=>{var G=ar();return a(G,(()=>{var Q=Fe(()=>i()==="asc");return()=>Q()?Tt():jt()})()),G})()})(),null),se.$$click=()=>g("size"),a(de,()=>t("size")),a(se,(()=>{var N=Fe(()=>s()==="size");return()=>N()&&(()=>{var G=ar();return a(G,(()=>{var Q=Fe(()=>i()==="asc");return()=>Q()?Tt():jt()})()),G})()})(),null),a(ie,()=>t("rotation")),a(U,k(Ie,{get each(){return o()},children:N=>(()=>{var G=Hp(),Q=G.firstChild,ce=Q.firstChild,pe=Q.nextSibling,xe=pe.firstChild,we=xe.firstChild,me=we.nextSibling,be=me.firstChild,Ee=be.nextSibling,Se=pe.nextSibling,Ae=Se.firstChild,Ce=Ae.firstChild,Re=Se.nextSibling,Pe=Re.firstChild,ae=Pe.firstChild,_e=Re.nextSibling,z=_e.firstChild,te=z.firstChild;return ce.addEventListener("change",()=>d(N)),a(be,()=>N.name),a(Ee,()=>N.source),Ce.addEventListener("change",X=>c(N.id,parseInt(X.currentTarget.value))),a(ae,()=>m(N.bounds)),te.addEventListener("change",X=>u(N.id,parseInt(X.currentTarget.value))),A(X=>{var V=`grid grid-cols-12 gap-4 px-4 py-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200 ${N.selected?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,le=N.source;return V!==X.e&&ke(G,X.e=V),le!==X.t&&oe(be,"title",X.t=le),X},{e:void 0,t:void 0}),A(()=>ce.checked=N.selected),A(()=>Ce.value=N.quantity),A(()=>te.value=N.rotation),G})()})),A(N=>{var G=t("search_parts"),Q=i()==="asc"?"Sort descending":"Sort ascending",ce=h.app.parts.some(me=>me.selected)&&!h.app.parts.every(me=>me.selected),pe=`col-span-4 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="name"?"text-blue-600 dark:text-blue-400":""}`,xe=`col-span-2 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="quantity"?"text-blue-600 dark:text-blue-400":""}`,we=`col-span-3 flex items-center gap-2 text-left hover:text-gray-700 dark:hover:text-gray-200 transition-colors duration-200 ${s()==="size"?"text-blue-600 dark:text-blue-400":""}`;return G!==N.e&&oe(E,"placeholder",N.e=G),Q!==N.t&&oe(x,"title",N.t=Q),ce!==N.a&&(B.indeterminate=N.a=ce),pe!==N.o&&ke(H,N.o=pe),xe!==N.i&&ke(K,N.i=xe),we!==N.n&&ke(se,N.n=we),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),A(()=>E.value=e()),A(()=>J.value=s()),A(()=>B.checked=h.app.parts.every(N=>N.selected)),f})()};Te(["input","click"]);var Kp=v('<div class="flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm text-blue-700 dark:text-blue-300 font-medium"> part<!> selected'),qp=v('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="px-6 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm"><svg class="w-5 h-5 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div><h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h1><p class="text-sm text-gray-500 dark:text-gray-400">Manage your parts and import new ones</p></div></div><div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><div class="flex items-center gap-2"><button class="inline-flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></button><button class="inline-flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></div><div class="bg-gray-50 dark:bg-gray-800/50 px-6 py-4 border-b border-gray-200 dark:border-gray-700"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400"></p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-600 dark:text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Selected</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg></div><div><p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Area</p><p class="text-2xl font-bold text-gray-900 dark:text-gray-100"></p></div></div></div></div></div><div class="bg-white dark:bg-gray-800 px-6 py-3 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><span class="text-sm text-gray-600 dark:text-gray-400">Bulk Actions:</span><div class="flex items-center gap-2"><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button><span class="text-gray-300 dark:text-gray-600">•</span><button class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"></button></div></div></div></div><div class="flex-1 overflow-hidden bg-gray-50 dark:bg-gray-900">'),Gp=v('<div class="h-full flex flex-col items-center justify-center text-center gap-6 p-8"><div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"><svg class="w-12 h-12 text-gray-400 dark:text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="max-w-sm space-y-3"><h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400 leading-relaxed"></p></div><div class="flex flex-col sm:flex-row gap-3"><button class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button><button class="inline-flex items-center gap-2 px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 font-medium rounded-lg border border-gray-300 dark:border-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Learn More</button></div><div class="text-xs text-gray-500 dark:text-gray-600 max-w-md"><p>Supported formats: SVG, DXF • Drag and drop files here');const Jp=()=>{const[t]=Me("parts"),e=he(()=>h.app.parts.length),r=he(()=>h.app.parts.reduce((u,g)=>u+g.quantity,0)),s=he(()=>h.app.parts.filter(u=>u.selected).length),n=he(()=>h.app.parts.reduce((u,g)=>u+(g.area||0),0)),i=async()=>{if(!Z.isAvailable){console.warn("IPC not available");return}try{const u=await Z.openFileDialog({title:t("import_parts"),filters:[{name:"Vector Files",extensions:["svg","dxf"]},{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(u.canceled||!u.filePaths?.length)return;const g=await Z.importParts(u.filePaths);w.setParts([...h.app.parts,...g])}catch(u){console.error("Failed to import parts:",u),w.setError(t("import_failed"))}},l=async()=>{const u=h.app.parts.filter(g=>g.selected);if(u.length===0){w.setError(t("no_parts_selected"));return}try{const g=await Z.saveFileDialog({title:t("export_parts"),defaultPath:"parts.svg",filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(g.canceled||!g.filePath)return;await Z.exportParts(u,g.filePath)}catch(g){console.error("Failed to export parts:",g),w.setError(t("export_failed"))}},o=()=>{if(h.app.parts.filter(m=>m.selected).length===0){w.setError(t("no_parts_selected"));return}const g=h.app.parts.filter(m=>!m.selected);w.setParts(g)},d=()=>{h.app.parts.forEach(u=>{w.updatePart(u.id,{selected:!0})})},c=()=>{h.app.parts.forEach(u=>{w.updatePart(u.id,{selected:!1})})};return(()=>{var u=qp(),g=u.firstChild,m=g.firstChild,f=m.firstChild,p=f.firstChild,b=p.nextSibling,_=b.firstChild,$=f.nextSibling,E=$.firstChild;E.firstChild;var M=E.nextSibling,C=M.firstChild;C.firstChild;var j=C.nextSibling;j.firstChild;var J=g.nextSibling,D=J.firstChild,W=D.firstChild,y=W.firstChild,x=y.firstChild,R=x.nextSibling,P=R.firstChild,S=P.nextSibling,L=W.nextSibling,F=L.firstChild,T=F.firstChild,B=T.nextSibling,H=B.firstChild,q=H.nextSibling,K=L.nextSibling,I=K.firstChild,se=I.firstChild,de=se.nextSibling,ie=de.firstChild,U=ie.nextSibling,N=K.nextSibling,G=N.firstChild,Q=G.firstChild,ce=Q.nextSibling,pe=ce.firstChild,xe=pe.nextSibling,we=J.nextSibling,me=we.firstChild,be=me.firstChild,Ee=be.firstChild,Se=Ee.nextSibling,Ae=Se.firstChild,Ce=Ae.nextSibling,Re=Ce.nextSibling,Pe=we.nextSibling;return a(_,()=>t("parts_title")),E.$$click=i,a(E,()=>t("import"),null),C.$$click=l,a(C,()=>t("export"),null),j.$$click=o,a(j,()=>t("delete"),null),a(P,()=>t("total_parts")),a(S,e),a(H,()=>t("total_quantity")),a(q,r),a(U,s),a(xe,()=>Math.round(n())),Ae.$$click=d,a(Ae,()=>t("select_all")),Re.$$click=c,a(Re,()=>t("deselect_all")),a(me,k(ee,{get when(){return s()>0},get children(){var ae=Kp(),_e=ae.firstChild,z=_e.nextSibling,te=z.firstChild,X=te.nextSibling;return X.nextSibling,a(z,s,te),a(z,()=>s()===1?"":"s",X),ae}}),null),a(Pe,k(ee,{get when(){return e()>0},get fallback(){return(()=>{var ae=Gp(),_e=ae.firstChild,z=_e.nextSibling,te=z.firstChild,X=te.nextSibling,V=z.nextSibling,le=V.firstChild;return le.firstChild,a(te,()=>t("no_parts_loaded")),a(X,()=>t("import_parts_to_get_started")),le.$$click=i,a(le,()=>t("import_parts"),null),ae})()},get children(){return k(Wp,{})}})),A(ae=>{var _e=t("import_parts"),z=t("export_selected"),te=h.app.parts.filter(ge=>ge.selected).length===0,X=t("delete_selected"),V=h.app.parts.filter(ge=>ge.selected).length===0,le=e()===0,ye=e()===0;return _e!==ae.e&&oe(E,"title",ae.e=_e),z!==ae.t&&oe(C,"title",ae.t=z),te!==ae.a&&(C.disabled=ae.a=te),X!==ae.o&&oe(j,"title",ae.o=X),V!==ae.i&&(j.disabled=ae.i=V),le!==ae.n&&(Ae.disabled=ae.n=le),ye!==ae.s&&(Re.disabled=ae.s=ye),ae},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),u})()};Te(["click"]);class Qp{progressCleanup=null;statusCleanup=null;completeCleanup=null;errorCleanup=null;constructor(){this.initializeEventListeners()}initializeEventListeners(){this.progressCleanup=Z.onNestProgress(e=>{w.setNestingProgress(e)}),this.statusCleanup=Z.onNestStatus(e=>{w.setNestingStatus(e.isRunning),w.setWorkerStatus({isRunning:e.isRunning,currentOperation:e.operation})}),this.completeCleanup=Z.onNestComplete(e=>{if(w.setNests(e),e.length>0){const r=e.reduce((s,n)=>n.fitness<s.fitness?n:s);w.setCurrentNest(r)}}),this.errorCleanup=Z.onNestError(e=>{w.setError(e)})}async startNesting(){try{w.setError(null);const e=h.config;if(!this.validateConfig(e))throw new Error("Invalid configuration");if(h.app.parts.length===0)throw new Error("No parts loaded. Please import parts before starting nesting.");if(h.app.sheets.length===0)throw new Error("No sheets configured. Please configure sheets before starting nesting.");await Z.startNesting(e)}catch(e){const r=e instanceof Error?e.message:"Unknown error occurred";throw w.setError(r),w.setNestingStatus(!1),e}}async stopNesting(){try{await Z.stopNesting(),w.setNestingStatus(!1),w.setNestingProgress(0),w.setError(null)}catch(e){const r=e instanceof Error?e.message:"Failed to stop nesting";throw w.setError(r),e}}stopBackgroundWorker(){Z.stopBackgroundWorker(),w.setNestingStatus(!1),w.setNestingProgress(0),w.setWorkerStatus({isRunning:!1,currentOperation:"Stopped"})}validateConfig(e){return!(!e||e.spacing<0||e.rotations<1||e.populationSize<1||e.mutationRate<0||e.mutationRate>100||e.threads<1||!e.units||!e.placementType)}get isNesting(){return h.process.isNesting}get progress(){return h.process.progress}get workerStatus(){return h.process.workerStatus}get results(){return h.app.nests}get lastError(){return h.process.lastError}onBackgroundProgress(e){return Z.onBackgroundProgress(e)}onBackgroundResponse(e){return Z.onBackgroundResponse(e)}cleanup(){this.progressCleanup?.(),this.statusCleanup?.(),this.completeCleanup?.(),this.errorCleanup?.(),this.progressCleanup=null,this.statusCleanup=null,this.completeCleanup=null,this.errorCleanup=null}}const Yt=new Qp;var Xp=v('<div class="text-sm text-gray-600 dark:text-gray-400 text-center">: '),Zp=v('<div class="bg-gray-50 dark:bg-gray-700 p-3 rounded"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">:</span><span class="ml-2 text-sm text-gray-900 dark:text-gray-100">'),Yp=v('<div class="grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-600"><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100">'),em=v('<div class="p-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 m-4"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><div class="text-2xl font-bold text-blue-600 dark:text-blue-400">%</div></div><div class=mb-6><div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2 overflow-hidden"><div class="h-full bg-blue-500 dark:bg-blue-400 rounded-full transition-all duration-300 ease-out"></div></div></div><div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span></span></div></div></div><div class="flex justify-center pt-4 border-t border-gray-200 dark:border-gray-600"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm">');const tm=()=>{const[t]=Me("nesting"),e=he(()=>Math.max(0,Math.min(100,h.process.progress))),r=he(()=>{const s=e();if(s===0)return null;const i=6e4*(100-s)/s;return i<6e4?`${Math.round(i/1e3)}s`:`${Math.round(i/6e4)}m`});return(()=>{var s=em(),n=s.firstChild,i=n.firstChild,l=i.nextSibling,o=l.firstChild,d=n.nextSibling,c=d.firstChild,u=c.firstChild,g=d.nextSibling,m=g.firstChild,f=m.firstChild,p=f.firstChild,b=p.firstChild,_=p.nextSibling,$=f.nextSibling,E=$.firstChild,M=E.firstChild,C=E.nextSibling,j=g.nextSibling,J=j.firstChild;return a(i,()=>t("nesting_in_progress")),a(l,()=>e().toFixed(1),o),a(d,k(ee,{get when(){return r()},get children(){var D=Xp(),W=D.firstChild;return a(D,()=>t("estimated_time_remaining"),W),a(D,r,null),D}}),null),a(g,k(ee,{get when(){return h.process.workerStatus.currentOperation},get children(){var D=Zp(),W=D.firstChild,y=W.firstChild,x=W.nextSibling;return a(W,()=>t("current_operation"),y),a(x,()=>h.process.workerStatus.currentOperation),D}}),m),a(p,()=>t("threads_active"),b),a(_,()=>h.process.workerStatus.threadsActive),a(E,()=>t("worker_status"),M),a(C,(()=>{var D=Fe(()=>!!h.process.workerStatus.isRunning);return()=>D()?t("running"):t("stopped")})()),a(g,k(ee,{get when(){return h.process.currentNest},get children(){var D=Yp(),W=D.firstChild,y=W.firstChild,x=y.firstChild,R=y.nextSibling,P=W.nextSibling,S=P.firstChild,L=S.firstChild,F=S.nextSibling;return a(y,()=>t("current_generation"),x),a(R,()=>h.process.currentNest?.generation||0),a(S,()=>t("best_fitness"),L),a(F,()=>h.process.currentNest?.fitness?.toFixed(2)||"N/A"),D}}),null),J.$$click=()=>window.location.reload(),a(J,()=>t("refresh_status")),A(D=>{var W=`${e()}%`,y=`text-sm font-medium ${h.process.workerStatus.isRunning?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`;return W!==D.e&&((D.e=W)!=null?u.style.setProperty("width",W):u.style.removeProperty("width")),y!==D.t&&ke(C,D.t=y),D},{e:void 0,t:void 0}),s})()};Te(["click"]);class rm{isConnectedSignal=Y(!1);lastHeartbeatSignal=Y(Date.now());reconnectAttemptsSignal=Y(0);connectionErrorSignal=Y(null);get isConnected(){return this.isConnectedSignal[0]}get setIsConnected(){return this.isConnectedSignal[1]}get lastHeartbeat(){return this.lastHeartbeatSignal[0]}get setLastHeartbeat(){return this.lastHeartbeatSignal[1]}get reconnectAttempts(){return this.reconnectAttemptsSignal[0]}get setReconnectAttempts(){return this.reconnectAttemptsSignal[1]}get connectionError(){return this.connectionErrorSignal[0]}get setConnectionError(){return this.connectionErrorSignal[1]}heartbeatInterval=null;reconnectTimeout=null;maxReconnectAttempts=5;heartbeatInterval_ms=5e3;reconnectDelay_ms=2e3;constructor(){this.initializeConnection()}initializeConnection(){this.checkConnection(),this.startHeartbeat(),this.setupEventListeners()}async checkConnection(){try{if(Z.isAvailable)await Z.readConfig(),this.setConnectionStatus(!0),this.setReconnectAttempts(0),this.setConnectionError(null);else throw new Error("IPC not available")}catch(e){const r=e instanceof Error?e.message:"Connection failed";this.setConnectionStatus(!1),this.setConnectionError(r),this.reconnectAttempts()<this.maxReconnectAttempts&&this.scheduleReconnect()}}setConnectionStatus(e){this.setIsConnected(e),this.setLastHeartbeat(Date.now()),w.setWorkerStatus({isRunning:e&&h.process.isNesting,currentOperation:e?"Connected":"Disconnected"})}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{this.checkConnection()},this.heartbeatInterval_ms)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}scheduleReconnect(){this.reconnectTimeout&&clearTimeout(this.reconnectTimeout);const e=this.reconnectAttempts();this.setReconnectAttempts(e+1);const r=Math.min(this.reconnectDelay_ms*Math.pow(2,e),3e4);this.reconnectTimeout=setTimeout(()=>{this.checkConnection()},r)}setupEventListeners(){Z.onNestError(e=>{(e.includes("IPC")||e.includes("connection")||e.includes("timeout"))&&(this.setConnectionError(e),this.setConnectionStatus(!1))}),pt(()=>{const e=this.isConnected(),r=this.connectionError();!e&&r?w.setError(`Connection lost: ${r}`):e&&h.process.lastError?.includes("Connection lost")&&w.setError(null)})}async forceReconnect(){this.setReconnectAttempts(0),this.setConnectionError(null),await this.checkConnection()}get connected(){return this.isConnected()}get error(){return this.connectionError()}get reconnectionAttempts(){return this.reconnectAttempts()}get lastHeartbeatTime(){return this.lastHeartbeat()}get isHealthy(){const e=Date.now(),r=this.lastHeartbeat(),s=e-r;return this.isConnected()&&s<this.heartbeatInterval_ms*2}get status(){return{connected:this.connected,healthy:this.isHealthy,error:this.error,reconnectAttempts:this.reconnectionAttempts,lastHeartbeat:this.lastHeartbeatTime}}cleanup(){this.stopHeartbeat(),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}}const $t=new rm;var sm=v('<div class="text-sm text-gray-600 dark:text-gray-400">'),nm=v('<div class="p-4 border-b border-gray-200 dark:border-gray-700"><h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"></h4><div class="grid grid-cols-2 gap-4"><div><span class="text-xs text-gray-500 dark:text-gray-400"></span><div class="font-mono text-sm text-gray-900 dark:text-gray-100"></div></div><div><span class="text-xs text-gray-500 dark:text-gray-400"></span><div class="font-mono text-sm text-gray-900 dark:text-gray-100">%'),im=v('<div class="space-y-2 max-h-64 overflow-y-auto">'),am=v('<div class=p-4><h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"> (<!>)'),om=v('<span class="text-xs text-red-600 dark:text-red-400">(<!>)'),lm=v('<div class="p-4 bg-red-50 dark:bg-red-900/20 border-t border-red-200 dark:border-red-700"><div class="flex items-center space-x-2"><div class="w-2 h-2 rounded-full bg-red-500"></div><span class="text-sm text-red-700 dark:text-red-300">'),dm=v('<div class="p-4 bg-red-50 dark:bg-red-900/20 border-t border-red-200 dark:border-red-700"><div class="flex items-start space-x-2"><div class="w-2 h-2 rounded-full bg-red-500 mt-1"></div><div><div class="text-sm font-medium text-red-700 dark:text-red-300"></div><div class="text-xs text-red-600 dark:text-red-400 mt-1">'),cm=v('<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 m-4"><div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center space-x-3"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><div></div></div><div class="flex items-center space-x-2"><span class="text-sm text-gray-500 dark:text-gray-400">: </span><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button></div></div><div class="p-4 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-gray-700 dark:text-gray-300"></span><span class="text-sm font-bold text-blue-600 dark:text-blue-400">%</span></div><div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2"><div class="h-full bg-blue-500 dark:bg-blue-400 rounded-full transition-all duration-300">'),gm=v('<div class="text-sm text-gray-500 dark:text-gray-400 text-center py-4">'),um=v('<div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded"><div class="flex items-center space-x-3"><div class="w-2 h-2 rounded-full bg-blue-500"></div><span class="text-sm font-medium text-gray-700 dark:text-gray-300">#</span></div><div class="flex items-center space-x-4"><div class=text-right><div class="text-xs text-gray-500 dark:text-gray-400"></div><div class="font-mono text-sm text-gray-900 dark:text-gray-100"></div></div><div class=text-right><div class="text-xs text-gray-500 dark:text-gray-400"></div><div class="font-mono text-sm text-gray-900 dark:text-gray-100">%</div></div><div class=text-right><div class="text-xs text-gray-500 dark:text-gray-400"></div><div class="font-mono text-sm text-gray-900 dark:text-gray-100">');const fm=()=>{const[t]=Me("nesting"),[e,r]=Y([]),[s,n]=Y(Date.now()),[i,l]=Y(!1),o=Yt.onBackgroundProgress(f=>{n(Date.now()),console.log("Background progress:",f)}),d=Yt.onBackgroundResponse(f=>{r(p=>[f,...p].slice(0,10)),n(Date.now())});_r(()=>{o?.(),d?.()});const c=()=>{const f=Date.now(),p=s(),b=f-p;return b<1e3?t("just_now"):b<6e4?t("seconds_ago",{count:Math.floor(b/1e3)}):b<36e5?t("minutes_ago",{count:Math.floor(b/6e4)}):t("hours_ago",{count:Math.floor(b/36e5)})},u=()=>{const f=$t.status;return f.connected?f.healthy?"text-green-500":"text-yellow-500":"text-red-500"},g=f=>f.toFixed(4),m=f=>(f*100).toFixed(1);return(()=>{var f=cm(),p=f.firstChild,b=p.firstChild,_=b.firstChild,$=_.nextSibling,E=b.nextSibling,M=E.firstChild,C=M.firstChild,j=M.nextSibling,J=p.nextSibling,D=J.firstChild,W=D.firstChild,y=W.nextSibling,x=y.firstChild,R=D.nextSibling,P=R.firstChild;return a(_,()=>t("live_results")),a(M,()=>t("last_update"),C),a(M,c,null),j.$$click=()=>l(!i()),a(j,(()=>{var S=Fe(()=>!!i());return()=>S()?t("collapse"):t("expand")})()),a(W,()=>t("current_progress")),a(y,()=>(h.process.progress*100).toFixed(1),x),a(J,k(ee,{get when(){return h.process.workerStatus.currentOperation},get children(){var S=sm();return a(S,()=>h.process.workerStatus.currentOperation),S}}),null),a(f,k(ee,{get when(){return h.process.currentNest},get children(){var S=nm(),L=S.firstChild,F=L.nextSibling,T=F.firstChild,B=T.firstChild,H=B.nextSibling,q=T.nextSibling,K=q.firstChild,I=K.nextSibling,se=I.firstChild;return a(L,()=>t("best_result")),a(B,()=>t("fitness")),a(H,()=>g(h.process.currentNest.fitness)),a(K,()=>t("utilization")),a(I,()=>m(h.process.currentNest.utilisation),se),S}}),null),a(f,k(ee,{get when(){return i()},get children(){var S=am(),L=S.firstChild,F=L.firstChild,T=F.nextSibling;return T.nextSibling,a(L,()=>t("intermediate_results"),F),a(L,()=>e().length,T),a(S,k(ee,{get when(){return e().length>0},get fallback(){return(()=>{var B=gm();return a(B,()=>t("no_intermediate_results")),B})()},get children(){var B=im();return a(B,k(Ie,{get each(){return e()},children:(H,q)=>(()=>{var K=um(),I=K.firstChild,se=I.firstChild,de=se.nextSibling;de.firstChild;var ie=I.nextSibling,U=ie.firstChild,N=U.firstChild,G=N.nextSibling,Q=U.nextSibling,ce=Q.firstChild,pe=ce.nextSibling,xe=pe.firstChild,we=Q.nextSibling,me=we.firstChild,be=me.nextSibling;return a(de,()=>H.index,null),a(N,()=>t("fitness")),a(G,()=>g(H.fitness)),a(ce,()=>t("utilization")),a(pe,()=>m(H.utilisation),xe),a(me,()=>t("sheets")),a(be,()=>H.placements.length),K})()})),B}}),null),S}}),null),a(f,k(ee,{get when(){return!$t.status.connected},get children(){var S=lm(),L=S.firstChild,F=L.firstChild,T=F.nextSibling;return a(T,()=>t("connection_lost")),a(L,k(ee,{get when(){return $t.status.reconnectAttempts>0},get children(){var B=om(),H=B.firstChild,q=H.nextSibling;return q.nextSibling,a(B,()=>t("reconnect_attempts",{count:$t.status.reconnectAttempts}),q),B}}),null),S}}),null),a(f,k(ee,{get when(){return h.process.lastError},get children(){var S=dm(),L=S.firstChild,F=L.firstChild,T=F.nextSibling,B=T.firstChild,H=B.nextSibling;return a(B,()=>t("error_occurred")),a(H,()=>h.process.lastError),S}}),null),A(S=>{var L=`w-2 h-2 rounded-full ${u()}`,F=$t.status.connected?t("connected"):t("disconnected"),T=`${h.process.progress*100}%`;return L!==S.e&&ke($,S.e=L),F!==S.t&&oe($,"title",S.t=F),T!==S.a&&((S.a=T)!=null?P.style.setProperty("width",T):P.style.removeProperty("width")),S},{e:void 0,t:void 0,a:void 0}),f})()};Te(["click"]);var hm=v('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">ms'),pm=v('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),mm=v('<div class="h-full flex flex-col"><div class="flex items-center justify-center p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><div class="flex items-center gap-4"><button class="inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">🔍−</button><span class="text-sm font-medium text-gray-900 dark:text-gray-100 min-w-16 text-center">%</span><button class="inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">🔍+</button><button class="inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">🎯</button></div></div><div class="flex-1 flex"><div class="flex-1 bg-white dark:bg-gray-900"><svg class="w-full h-96 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"width=100% height=400 viewBox="0 0 800 400"><g><defs><pattern id=grid width=20 height=20 patternUnits=userSpaceOnUse><path d="M 20 0 L 0 0 0 20"fill=none stroke=#e0e0e0 stroke-width=1></path></pattern></defs><rect width=800 height=400 fill=url(#grid)></rect></g></svg></div><div class="w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 overflow-y-auto"><div class=p-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-2 gap-3 mb-6"><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-green-600 dark:text-green-400"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-gray-900 dark:text-gray-100"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-gray-900 dark:text-gray-100"></div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div><div class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-center"><div class="text-2xl font-bold text-red-600 dark:text-red-400">%</div><div class="text-xs text-gray-600 dark:text-gray-400 mt-1"></div></div></div><div class=space-y-3><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),bm=v('<svg><g class=sheet-group><rect fill="rgba(200, 200, 200, 0.3)"stroke=#e5e7eb stroke-width=2></rect><text font-size=12 fill=#6b7280> </svg>',!1,!0,!1),_m=v('<svg><g class=part-group><rect fill="rgba(59, 130, 246, 0.7)"stroke=#3b82f6 stroke-width=1></svg>',!1,!0,!1);const xm=t=>{const[e]=Me("nesting"),[r,s]=Y(1),[n,i]=Y({x:0,y:0}),[l,o]=Y(!1),[d,c]=Y({x:0,y:0}),u=he(()=>t.result.sheets?.reduce((C,j)=>C+j.width*j.height,0)||0),g=he(()=>t.result.placedParts||0),m=he(()=>{const C=u(),j=g();return C===0?0:(C-j)/C*100}),f=()=>{s(C=>Math.min(C*1.2,5))},p=()=>{s(C=>Math.max(C/1.2,.1))},b=()=>{s(1),i({x:0,y:0})},_=C=>{o(!0),c({x:C.clientX-n().x,y:C.clientY-n().y})},$=C=>{if(!l())return;const j={x:C.clientX-d().x,y:C.clientY-d().y};i(j)},E=()=>{o(!1)},M=he(()=>{const C=r(),j=n();return`translate(${j.x}, ${j.y}) scale(${C})`});return(()=>{var C=mm(),j=C.firstChild,J=j.firstChild,D=J.firstChild,W=D.nextSibling,y=W.firstChild,x=W.nextSibling,R=x.nextSibling,P=j.nextSibling,S=P.firstChild,L=S.firstChild,F=L.firstChild,T=F.firstChild;T.nextSibling;var B=S.nextSibling,H=B.firstChild,q=H.firstChild,K=q.nextSibling,I=K.firstChild,se=I.firstChild,de=se.nextSibling,ie=I.nextSibling,U=ie.firstChild,N=U.nextSibling,G=ie.nextSibling,Q=G.firstChild,ce=Q.nextSibling,pe=G.nextSibling,xe=pe.firstChild,we=xe.firstChild,me=xe.nextSibling,be=K.nextSibling,Ee=be.firstChild,Se=Ee.firstChild,Ae=Se.firstChild,Ce=Se.nextSibling,Re=Ee.nextSibling,Pe=Re.firstChild,ae=Pe.firstChild,_e=Pe.nextSibling;return D.$$click=p,a(W,()=>Math.round(r()*100),y),x.$$click=f,R.$$click=b,L.addEventListener("mouseleave",E),L.$$mouseup=E,L.$$mousemove=$,L.$$mousedown=_,a(F,k(Ie,{get each(){return t.result.sheets||[]},children:(z,te)=>(()=>{var X=bm(),V=X.firstChild,le=V.nextSibling,ye=le.firstChild;return a(le,()=>e("sheet"),ye),a(le,()=>te()+1,null),A(ge=>{var Oe=z.x||0,ze=z.y||0,Ge=z.width,Ve=z.height,Ue=(z.x||0)+10,He=(z.y||0)+25;return Oe!==ge.e&&oe(V,"x",ge.e=Oe),ze!==ge.t&&oe(V,"y",ge.t=ze),Ge!==ge.a&&oe(V,"width",ge.a=Ge),Ve!==ge.o&&oe(V,"height",ge.o=Ve),Ue!==ge.i&&oe(le,"x",ge.i=Ue),He!==ge.n&&oe(le,"y",ge.n=He),ge},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),X})()}),null),a(F,k(Ie,{get each(){return t.result.placements||[]},children:z=>(()=>{var te=_m(),X=te.firstChild;return A(V=>{var le=z.x,ye=z.y,ge=z.width||50,Oe=z.height||50,ze=`rotate(${z.rotation||0} ${z.x+(z.width||50)/2} ${z.y+(z.height||50)/2})`;return le!==V.e&&oe(X,"x",V.e=le),ye!==V.t&&oe(X,"y",V.t=ye),ge!==V.a&&oe(X,"width",V.a=ge),Oe!==V.o&&oe(X,"height",V.o=Oe),ze!==V.i&&oe(X,"transform",V.i=ze),V},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),te})()}),null),a(q,()=>e("statistics")),a(se,(()=>{var z=Fe(()=>!!t.result.efficiency);return()=>z()?`${(t.result.efficiency*100).toFixed(1)}%`:"N/A"})()),a(de,()=>e("material_efficiency")),a(U,()=>t.result.fitness?.toFixed(2)||"N/A"),a(N,()=>e("fitness_score")),a(Q,()=>t.result.sheets?.length||0),a(ce,()=>e("sheets_used")),a(xe,()=>m().toFixed(1),we),a(me,()=>e("material_waste")),a(Se,()=>e("total_parts_placed"),Ae),a(Ce,()=>t.result.placedParts||0),a(Pe,()=>e("total_material_used"),ae),a(_e,()=>u().toFixed(2)),a(be,k(ee,{get when(){return t.result.generationTime},get children(){var z=hm(),te=z.firstChild,X=te.firstChild,V=te.nextSibling,le=V.firstChild;return a(te,()=>e("generation_time"),X),a(V,()=>t.result.generationTime,le),z}}),null),a(be,k(ee,{get when(){return t.result.generation},get children(){var z=pm(),te=z.firstChild,X=te.firstChild,V=te.nextSibling;return a(te,()=>e("generation_number"),X),a(V,()=>t.result.generation),z}}),null),A(z=>{var te=e("zoom_out"),X=e("zoom_in"),V=e("reset_view"),le=l()?"grabbing":"grab",ye=M();return te!==z.e&&oe(D,"title",z.e=te),X!==z.t&&oe(x,"title",z.t=X),V!==z.a&&oe(R,"title",z.a=V),le!==z.o&&((z.o=le)!=null?L.style.setProperty("cursor",le):L.style.removeProperty("cursor")),ye!==z.i&&oe(F,"transform",z.i=ye),z},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),C})()};Te(["click","mousedown","mousemove","mouseup"]);var ym=v('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><button class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">← </button><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><div class="flex gap-2"><button class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">📤 '),vm=v('<div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"> (<!>)</h3><div class="text-sm text-gray-600 dark:text-gray-400"><label>'),$m=v('<div class="flex-1 overflow-y-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),km=v('<div class="h-full flex flex-col">'),wm=v('<span class="text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full">'),Sm=v('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100">'),Cm=v('<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow duration-200"><div class="h-32 bg-gray-50 dark:bg-gray-700 flex items-center justify-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"><div class=text-center><div class="text-2xl mb-1">🎯</div><div class="text-sm text-gray-600 dark:text-gray-400"></div></div></div><div class=p-4><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900 dark:text-gray-100"> #</h4></div><div class="space-y-2 mb-4"><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-green-600 dark:text-green-400"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div></div><div class="flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><div class="flex gap-2"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><button class="text-red-600 dark:text-red-400 hover:underline text-sm">');const Pm=()=>{const[t]=Me("nesting"),[e,r]=Y(null),[s,n]=Y("grid"),i=he(()=>[...h.app.nests].sort((m,f)=>m.efficiency!==f.efficiency?(f.efficiency||0)-(m.efficiency||0):(f.fitness||0)-(m.fitness||0))),l=m=>{r(m),n("detail")},o=()=>{r(null),n("grid")},d=async m=>{if(Z.isAvailable)try{const f=await Z.saveFileDialog({title:t("export_result"),defaultPath:`nest_result_${m.id}.svg`,filters:[{name:"SVG Files",extensions:["svg"]},{name:"DXF Files",extensions:["dxf"]},{name:"All Files",extensions:["*"]}]});if(f.canceled||!f.filePath)return;await Z.exportNestResult(m,f.filePath)}catch(f){console.error("Failed to export result:",f),w.setError(t("export_failed"))}},c=m=>{const f=h.app.nests.filter(p=>p.id!==m.id);w.setNests(f)},u=m=>m?`${(m*100).toFixed(1)}%`:"N/A",g=m=>m?m.toFixed(2):"N/A";return(()=>{var m=km();return a(m,k(ee,{get when(){return Fe(()=>s()==="detail")()&&e()},get children(){var f=ym(),p=f.firstChild,b=p.firstChild;b.firstChild;var _=b.nextSibling,$=_.nextSibling,E=$.firstChild;return E.firstChild,b.$$click=o,a(b,()=>t("back_to_results"),null),a(_,()=>t("result_details")),E.$$click=()=>d(e()),a(E,()=>t("export"),null),a(f,k(xm,{get result(){return e()}}),null),f}}),null),a(m,k(ee,{get when(){return s()==="grid"},get children(){return[(()=>{var f=vm(),p=f.firstChild,b=p.firstChild,_=b.nextSibling;_.nextSibling;var $=p.nextSibling,E=$.firstChild;return a(p,()=>t("nesting_results"),b),a(p,()=>i().length,_),a(E,()=>t("sorted_by_efficiency")),f})(),(()=>{var f=$m();return a(f,k(Ie,{get each(){return i()},children:(p,b)=>(()=>{var _=Cm(),$=_.firstChild,E=$.firstChild,M=E.firstChild,C=M.nextSibling,j=$.nextSibling,J=j.firstChild,D=J.firstChild,W=D.firstChild,y=J.nextSibling,x=y.firstChild,R=x.firstChild,P=R.firstChild,S=R.nextSibling,L=x.nextSibling,F=L.firstChild,T=F.firstChild,B=F.nextSibling,H=L.nextSibling,q=H.firstChild,K=q.firstChild,I=q.nextSibling,se=y.nextSibling,de=se.firstChild,ie=de.nextSibling,U=ie.firstChild,N=U.nextSibling;return $.$$click=()=>l(p),a(C,()=>t("click_to_view")),a(D,()=>t("result"),W),a(D,()=>b()+1,null),a(J,k(ee,{get when(){return b()===0},get children(){var G=wm();return a(G,()=>t("best")),G}}),null),a(R,()=>t("efficiency"),P),a(S,()=>u(p.efficiency)),a(F,()=>t("fitness"),T),a(B,()=>g(p.fitness)),a(q,()=>t("sheets_used"),K),a(I,()=>p.sheets?.length||0),a(y,k(ee,{get when(){return p.placedParts},get children(){var G=Sm(),Q=G.firstChild,ce=Q.firstChild,pe=Q.nextSibling;return a(Q,()=>t("parts_placed"),ce),a(pe,()=>p.placedParts),G}}),null),de.$$click=()=>l(p),a(de,()=>t("view_details")),U.$$click=()=>d(p),a(U,()=>t("export")),N.$$click=()=>c(p),a(N,()=>t("delete")),_})()})),f})()]}}),null),m})()};Te(["click"]);var Lm=v('<button class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">🗑️ '),Em=v('<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 p-4">'),Am=v('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200">▶️ </button><button class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200">⏹️ </button></div></div><div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-6"><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div></div></div><div class="flex-1 overflow-hidden">'),Rm=v('<p class="text-amber-600 dark:text-amber-400">'),Nm=v('<div class="h-full flex flex-col items-center justify-center text-center gap-4 p-8"><div class="text-6xl opacity-30">🎯</div><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3><p class="text-gray-600 dark:text-gray-400">');const Fm=()=>{const[t]=Me("nesting"),e=he(()=>h.app.parts.length>0&&h.app.sheets.length>0&&!h.process.isNesting),r=he(()=>h.app.nests.length>0),s=async()=>{if(e())try{await Yt.startNesting()}catch(o){console.error("Failed to start nesting:",o)}},n=async()=>{if(h.process.isNesting)try{await Yt.stopNesting()}catch(o){console.error("Failed to stop nesting:",o)}},i=()=>{w.setNests([])},l=he(()=>h.app.parts.filter(o=>o.quantity>0).length);return(()=>{var o=Am(),d=o.firstChild,c=d.firstChild,u=c.nextSibling,g=u.firstChild;g.firstChild;var m=g.nextSibling;m.firstChild;var f=d.nextSibling,p=f.firstChild,b=p.firstChild,_=b.firstChild,$=_.firstChild,E=_.nextSibling,M=b.nextSibling,C=M.firstChild,j=C.firstChild,J=C.nextSibling,D=M.nextSibling,W=D.firstChild,y=W.firstChild,x=W.nextSibling,R=f.nextSibling;return a(c,()=>t("nesting_title")),g.$$click=s,a(g,()=>t("start_nesting"),null),m.$$click=n,a(m,()=>t("stop_nesting"),null),a(u,k(ee,{get when(){return r()&&!h.process.isNesting},get children(){var P=Lm();return P.firstChild,P.$$click=i,a(P,()=>t("clear_results"),null),A(()=>oe(P,"title",t("clear_results"))),P}}),null),a(_,()=>t("parts_to_nest"),$),a(E,l),a(C,()=>t("available_sheets"),j),a(J,()=>h.app.sheets.length),a(W,()=>t("results_count"),y),a(x,()=>h.app.nests.length),a(R,k(ee,{get when(){return h.process.isNesting},get children(){var P=Em();return a(P,k(tm,{}),null),a(P,k(fm,{}),null),P}}),null),a(R,k(ee,{get when(){return r()},get fallback(){return(()=>{var P=Nm(),S=P.firstChild,L=S.nextSibling,F=L.nextSibling;return a(L,()=>t("no_nesting_results")),a(F,()=>t("start_nesting_to_see_results")),a(P,k(ee,{get when(){return!e()},get children(){var T=Rm();return a(T,()=>t("add_parts_and_sheets_first")),T}}),null),P})()},get children(){return k(Pm,{})}}),null),A(P=>{var S=!e(),L=e()?t("start_nesting"):t("cannot_start_nesting"),F=!h.process.isNesting,T=t("stop_nesting");return S!==P.e&&(g.disabled=P.e=S),L!==P.t&&oe(g,"title",P.t=L),F!==P.a&&(m.disabled=P.a=F),T!==P.o&&oe(m,"title",P.o=T),P},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()};Te(["click"]);var kt=v('<span class="text-red-500 dark:text-red-400 text-xs mt-1 block">'),Mm=v('<div class="text-sm text-gray-600 dark:text-gray-400">: <!> mm'),Om=v('<div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]"><div class=space-y-6><div class=space-y-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h4><div class=space-y-2><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"for=sheet-name>:</label><input id=sheet-name type=text class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"></div><div class=space-y-2><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"for=material>:</label><select id=material class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"></select></div></div><div class=space-y-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h4><div class="grid grid-cols-3 gap-2 mb-4"></div><div class="flex items-end gap-2"><div class=flex-1><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"for=width> (mm):</label><input id=width type=number min=1 step=0.1></div><button type=button class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200 mb-1">⇄</button><div class=flex-1><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"for=height> (mm):</label><input id=height type=number min=1 step=0.1></div></div><div class="text-sm text-gray-600 dark:text-gray-400 mt-2">: <!> mm²</div></div><div class=space-y-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h4><div class="grid grid-cols-3 gap-4"><div class=space-y-2><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"for=thickness> (mm):</label><input id=thickness type=number min=0.1 step=0.1></div><div class=space-y-2><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"for=quantity>:</label><input id=quantity type=number min=1></div><div class=space-y-2><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"for=margin> (mm):</label><input id=margin type=number min=0 step=0.1></div></div></div><div class=space-y-4><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h4><div class="flex items-center gap-6"><div class=flex-shrink-0><div class="bg-white dark:bg-gray-600 border-2 border-gray-300 dark:border-gray-500 rounded shadow-sm relative"><div class="absolute border border-dashed border-gray-400 dark:border-gray-400 rounded-sm"></div></div></div><div class=space-y-2><div class="text-sm text-gray-900 dark:text-gray-100"> × <!> mm</div><div class="text-sm text-gray-600 dark:text-gray-400">: <!> mm²'),Tm=v('<div class="flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700"><button type=button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200"></button><button type=button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200">'),jm=v("<option>"),Im=v('<button type=button class="px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200">');const Dm=t=>{const[e]=Me("sheets"),[r,s]=Y(""),[n,i]=Y(200),[l,o]=Y(200),[d,c]=Y(3),[u,g]=Y(1),[m,f]=Y(5),[p,b]=Y("Generic"),[_,$]=Y({}),E=["Generic","Wood - Plywood","Wood - MDF","Wood - Hardwood","Metal - Aluminum","Metal - Steel","Metal - Brass","Plastic - Acrylic","Plastic - ABS","Cardboard","Fabric","Leather","Paper"],M=[{name:"A4",width:210,height:297},{name:"A3",width:297,height:420},{name:"A2",width:420,height:594},{name:"A1",width:594,height:841},{name:"Letter",width:216,height:279},{name:"Legal",width:216,height:356},{name:'12×12"',width:305,height:305},{name:'24×24"',width:610,height:610},{name:'48×24"',width:1219,height:610}];pt(()=>{const y=t.sheet;y?(s(y.name||""),i(y.width),o(y.height),c(y.thickness||3),g(y.quantity||1),f(y.margin||5),b(y.material||"Generic")):(s(""),i(200),o(200),c(3),g(1),f(5),b("Generic")),$({})});const C=()=>{const y={};return n()<=0&&(y.width=e("width_must_be_positive")),l()<=0&&(y.height=e("height_must_be_positive")),d()<=0&&(y.thickness=e("thickness_must_be_positive")),u()<=0&&(y.quantity=e("quantity_must_be_positive")),m()<0&&(y.margin=e("margin_cannot_be_negative")),$(y),Object.keys(y).length===0},j=()=>{if(!C())return;const y={id:t.sheet?.id||`sheet_${Date.now()}`,name:r().trim()||`Sheet ${Date.now()}`,width:n(),height:l(),thickness:d(),quantity:u(),margin:m(),material:p()};t.onSave(y)},J=y=>{i(y.width),o(y.height),r().trim()||s(y.name)},D=()=>{const y=n();i(l()),o(y)},W=()=>(n()*l()).toFixed(0);return[(()=>{var y=Om(),x=y.firstChild,R=x.firstChild,P=R.firstChild,S=P.nextSibling,L=S.firstChild,F=L.firstChild,T=L.nextSibling,B=S.nextSibling,H=B.firstChild,q=H.firstChild,K=H.nextSibling,I=R.nextSibling,se=I.firstChild,de=se.nextSibling,ie=de.nextSibling,U=ie.firstChild,N=U.firstChild,G=N.firstChild,Q=N.nextSibling,ce=U.nextSibling,pe=ce.nextSibling,xe=pe.firstChild,we=xe.firstChild,me=xe.nextSibling,be=ie.nextSibling,Ee=be.firstChild,Se=Ee.nextSibling;Se.nextSibling;var Ae=I.nextSibling,Ce=Ae.firstChild,Re=Ce.nextSibling,Pe=Re.firstChild,ae=Pe.firstChild,_e=ae.firstChild,z=ae.nextSibling,te=Pe.nextSibling,X=te.firstChild,V=X.firstChild,le=X.nextSibling,ye=te.nextSibling,ge=ye.firstChild,Oe=ge.firstChild,ze=ge.nextSibling,Ge=Ae.nextSibling,Ve=Ge.firstChild,Ue=Ve.nextSibling,He=Ue.firstChild,We=He.firstChild,ne=We.firstChild,ve=He.nextSibling,Je=ve.firstChild,at=Je.firstChild,ot=at.nextSibling;ot.nextSibling;var Xe=Je.nextSibling,lt=Xe.firstChild,Ze=lt.nextSibling;return Ze.nextSibling,a(P,()=>e("basic_information")),a(L,()=>e("sheet_name"),F),T.$$input=O=>s(O.currentTarget.value),a(H,()=>e("material"),q),K.addEventListener("change",O=>b(O.currentTarget.value)),a(K,k(Ie,{each:E,children:O=>(()=>{var Ne=jm();return Ne.value=O,a(Ne,O),Ne})()})),a(se,()=>e("dimensions")),a(de,k(Ie,{each:M,children:O=>(()=>{var Ne=Im();return Ne.$$click=()=>J(O),a(Ne,()=>O.name),A(()=>oe(Ne,"title",`${O.width} × ${O.height} mm`)),Ne})()})),a(N,()=>e("width"),G),Q.$$input=O=>i(parseFloat(O.currentTarget.value)||0),a(U,k(ee,{get when(){return _().width},get children(){var O=kt();return a(O,()=>_().width),O}}),null),ce.$$click=D,a(xe,()=>e("height"),we),me.$$input=O=>o(parseFloat(O.currentTarget.value)||0),a(pe,k(ee,{get when(){return _().height},get children(){var O=kt();return a(O,()=>_().height),O}}),null),a(be,()=>e("area"),Ee),a(be,W,Se),a(Ce,()=>e("properties")),a(ae,()=>e("thickness"),_e),z.$$input=O=>c(parseFloat(O.currentTarget.value)||0),a(Pe,k(ee,{get when(){return _().thickness},get children(){var O=kt();return a(O,()=>_().thickness),O}}),null),a(X,()=>e("quantity"),V),le.$$input=O=>g(parseInt(O.currentTarget.value)||0),a(te,k(ee,{get when(){return _().quantity},get children(){var O=kt();return a(O,()=>_().quantity),O}}),null),a(ge,()=>e("margin"),Oe),ze.$$input=O=>f(parseFloat(O.currentTarget.value)||0),a(ye,k(ee,{get when(){return _().margin},get children(){var O=kt();return a(O,()=>_().margin),O}}),null),a(Ve,()=>e("preview")),We.style.setProperty("width","120px"),We.style.setProperty("max-height","120px"),a(Je,n,at),a(Je,l,ot),a(Xe,()=>e("area"),lt),a(Xe,W,Ze),a(ve,k(ee,{get when(){return m()>0},get children(){var O=Mm(),Ne=O.firstChild,Be=Ne.nextSibling;return Be.nextSibling,a(O,()=>e("margin"),Ne),a(O,m,Be),O}}),null),A(O=>{var Ne=e("enter_sheet_name"),Be=`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${_().width?"border-red-500":"border-gray-300 dark:border-gray-600"}`,Ke=e("swap_dimensions"),Ye=`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${_().height?"border-red-500":"border-gray-300 dark:border-gray-600"}`,et=`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${_().thickness?"border-red-500":"border-gray-300 dark:border-gray-600"}`,Ft=`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${_().quantity?"border-red-500":"border-gray-300 dark:border-gray-600"}`,bt=`block w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${_().margin?"border-red-500":"border-gray-300 dark:border-gray-600"}`,ct=`${n()} / ${l()}`,_t=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,gt=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,xt=`${Math.max(m()/Math.max(n(),l())*100,2)}%`,yt=`${Math.max(m()/Math.max(n(),l())*100,2)}%`;return Ne!==O.e&&oe(T,"placeholder",O.e=Ne),Be!==O.t&&ke(Q,O.t=Be),Ke!==O.a&&oe(ce,"title",O.a=Ke),Ye!==O.o&&ke(me,O.o=Ye),et!==O.i&&ke(z,O.i=et),Ft!==O.n&&ke(le,O.n=Ft),bt!==O.s&&ke(ze,O.s=bt),ct!==O.h&&((O.h=ct)!=null?We.style.setProperty("aspect-ratio",ct):We.style.removeProperty("aspect-ratio")),_t!==O.r&&((O.r=_t)!=null?ne.style.setProperty("top",_t):ne.style.removeProperty("top")),gt!==O.d&&((O.d=gt)!=null?ne.style.setProperty("left",gt):ne.style.removeProperty("left")),xt!==O.l&&((O.l=xt)!=null?ne.style.setProperty("right",xt):ne.style.removeProperty("right")),yt!==O.u&&((O.u=yt)!=null?ne.style.setProperty("bottom",yt):ne.style.removeProperty("bottom")),O},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),A(()=>T.value=r()),A(()=>K.value=p()),A(()=>Q.value=n()),A(()=>me.value=l()),A(()=>z.value=d()),A(()=>le.value=u()),A(()=>ze.value=m()),y})(),(()=>{var y=Tm(),x=y.firstChild,R=x.nextSibling;return Ps(x,"click",t.onCancel),a(x,()=>e("cancel")),R.$$click=j,a(R,(()=>{var P=Fe(()=>!!t.sheet);return()=>P()?e("update_sheet"):e("add_sheet")})()),y})()]};Te(["input","click"]);var zm=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"><div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"><h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h3><button class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl leading-none">×'),Bm=v('<div class="h-full flex flex-col"><div class="p-4 border-b border-gray-200 dark:border-gray-700"><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h3></div><div class="flex-1 overflow-y-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),Vm=v('<div class="h-full flex flex-col"><div class="flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"><h2 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h2><div class="flex gap-2"><button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">➕ </button></div></div><div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-6"><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex items-center gap-2"><span class="text-sm text-gray-600 dark:text-gray-400">:</span><span class="text-sm font-medium text-gray-900 dark:text-gray-100"> mm²</span></div></div></div><div class="flex-1 overflow-hidden">'),Um=v('<div class="h-full flex flex-col items-center justify-center text-center gap-6 p-8"><div class="text-6xl opacity-30">📄</div><div><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"></h3><p class="text-gray-600 dark:text-gray-400"></p></div><div class="w-full max-w-2xl"><h4 class="text-md font-medium text-gray-900 dark:text-gray-100 mb-4"></h4><div class="grid grid-cols-3 gap-3">'),Hm=v('<button class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-center"><div class="font-medium text-gray-900 dark:text-gray-100 mb-1"></div><div class="text-sm text-gray-600 dark:text-gray-400"> × '),Wm=v('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"> mm'),Km=v('<div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow duration-200"><div class="h-32 bg-gray-50 dark:bg-gray-700 flex items-center justify-center p-4"><div class=relative><div class="bg-white dark:bg-gray-600 border-2 border-gray-300 dark:border-gray-500 rounded shadow-sm"><div class="absolute inset-1 border border-dashed border-gray-400 dark:border-gray-400 rounded-sm"></div></div></div></div><div class=p-4><div class="font-medium text-gray-900 dark:text-gray-100 mb-3"></div><div class="space-y-2 mb-4"><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="font-medium text-gray-900 dark:text-gray-100"></span></div></div><div class="flex justify-between items-center pt-2 border-t border-gray-200 dark:border-gray-700"><button class="text-blue-600 dark:text-blue-400 hover:underline text-sm"></button><button class="text-red-600 dark:text-red-400 hover:underline text-sm">');const qm=()=>{const[t]=Me("sheets"),[e,r]=Y(!1),[s,n]=Y(null),i=he(()=>h.app.sheets.length),l=he(()=>h.app.sheets.reduce((b,_)=>b+_.width*_.height,0)),o=[{name:"A4",width:210,height:297,units:"mm"},{name:"A3",width:297,height:420,units:"mm"},{name:"A2",width:420,height:594,units:"mm"},{name:"A1",width:594,height:841,units:"mm"},{name:"Letter",width:216,height:279,units:"mm"},{name:"Legal",width:216,height:356,units:"mm"},{name:'12x12"',width:305,height:305,units:"mm"},{name:'24x24"',width:610,height:610,units:"mm"},{name:'48x24"',width:1219,height:610,units:"mm"}],d=()=>{n(null),r(!0)},c=b=>{n(b),r(!0)},u=b=>{const _=h.app.sheets.filter($=>$.id!==b);w.setSheets(_)},g=b=>{s()?w.updateSheet(b.id,b):w.addSheet(b),r(!1),n(null)},m=()=>{r(!1),n(null)},f=b=>{const _={name:b.name,width:b.width,height:b.height,thickness:3,quantity:1,margin:5,material:"Generic"};w.addSheet(_)},p=b=>`${b.width} × ${b.height} mm`;return(()=>{var b=Vm(),_=b.firstChild,$=_.firstChild,E=$.nextSibling,M=E.firstChild;M.firstChild;var C=_.nextSibling,j=C.firstChild,J=j.firstChild,D=J.firstChild,W=D.firstChild,y=D.nextSibling,x=J.nextSibling,R=x.firstChild,P=R.firstChild,S=R.nextSibling,L=S.firstChild,F=C.nextSibling;return a($,()=>t("sheets_title")),M.$$click=d,a(M,()=>t("add_sheet"),null),a(D,()=>t("total_sheets"),W),a(y,i),a(R,()=>t("total_area"),P),a(S,()=>l().toFixed(0),L),a(b,k(ee,{get when(){return e()},get children(){var T=zm(),B=T.firstChild,H=B.firstChild,q=H.firstChild,K=q.nextSibling;return a(q,(()=>{var I=Fe(()=>!!s());return()=>I()?t("edit_sheet"):t("add_new_sheet")})()),K.$$click=m,a(B,k(Dm,{get sheet(){return s()},onSave:g,onCancel:m}),null),T}}),F),a(F,k(ee,{get when(){return i()>0},get fallback(){return(()=>{var T=Um(),B=T.firstChild,H=B.nextSibling,q=H.firstChild,K=q.nextSibling,I=H.nextSibling,se=I.firstChild,de=se.nextSibling;return a(q,()=>t("no_sheets_loaded")),a(K,()=>t("add_sheets_to_get_started")),a(se,()=>t("quick_templates")),a(de,k(Ie,{each:o,children:ie=>(()=>{var U=Hm(),N=U.firstChild,G=N.nextSibling,Q=G.firstChild;return U.$$click=()=>f(ie),a(N,()=>ie.name),a(G,()=>ie.width,Q),a(G,()=>ie.height,null),A(()=>oe(U,"title",`${ie.width} × ${ie.height} ${ie.units}`)),U})()})),T})()},get children(){var T=Bm(),B=T.firstChild,H=B.firstChild,q=B.nextSibling;return a(H,()=>t("configured_sheets")),a(q,k(Ie,{get each(){return h.app.sheets},children:(K,I)=>(()=>{var se=Km(),de=se.firstChild,ie=de.firstChild,U=ie.firstChild,N=de.nextSibling,G=N.firstChild,Q=G.nextSibling,ce=Q.firstChild,pe=ce.firstChild,xe=pe.firstChild,we=pe.nextSibling,me=ce.nextSibling,be=me.firstChild,Ee=be.firstChild,Se=be.nextSibling,Ae=me.nextSibling,Ce=Ae.firstChild,Re=Ce.firstChild,Pe=Ce.nextSibling,ae=Q.nextSibling,_e=ae.firstChild,z=_e.nextSibling;return U.style.setProperty("max-width","80px"),U.style.setProperty("max-height","80px"),U.style.setProperty("min-width","40px"),U.style.setProperty("min-height","40px"),a(G,()=>K.name||`${t("sheet")} ${I()+1}`),a(pe,()=>t("dimensions"),xe),a(we,()=>p(K)),a(be,()=>t("quantity"),Ee),a(Se,()=>K.quantity),a(Ce,()=>t("material"),Re),a(Pe,()=>K.material||"Generic"),a(Q,k(ee,{get when(){return K.margin},get children(){var te=Wm(),X=te.firstChild,V=X.firstChild,le=X.nextSibling,ye=le.firstChild;return a(X,()=>t("margin"),V),a(le,()=>K.margin,ye),te}}),null),_e.$$click=()=>c(K),a(_e,()=>t("edit")),z.$$click=()=>u(K.id),a(z,()=>t("delete")),A(te=>(te=`${K.width} / ${K.height}`)!=null?U.style.setProperty("aspect-ratio",te):U.style.removeProperty("aspect-ratio")),se})()})),T}})),A(()=>oe(M,"title",t("add_sheet"))),b})()};Te(["click"]);var Gm=v('<div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 space-y-4"><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100"></h4><div class=space-y-3><label for=preset-name class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><input id=preset-name type=text class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></div><div class=space-y-3><label for=preset-description class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><textarea id=preset-description rows=3 class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></textarea></div><div class="flex gap-3 pt-2"><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"></button><button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed border border-transparent rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">'),Jm=v('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">'),Qm=v('<div class=space-y-6><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-violet-100 dark:bg-violet-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-violet-600 dark:text-violet-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></div><h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h3></div><div class="flex gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg></button><button class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 border border-transparent rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button></div></div><p class="text-sm text-gray-500 dark:text-gray-400"></p><div class=space-y-4>'),Xm=v('<div class="text-center py-12"><div class="mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"><svg class="w-8 h-8 text-gray-400 dark:text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"></h4><p class="text-sm text-gray-500 dark:text-gray-400">'),Zm=v('<p class="text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2">'),Ym=v('<div class="flex justify-between text-xs text-gray-500 dark:text-gray-400"><span>:</span><span>'),eb=v('<div><div class=p-4><div class="flex items-center justify-between mb-3"><h4 class="text-base font-medium text-gray-900 dark:text-gray-100 truncate"></h4><div class="flex gap-1"><button class="p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg></button><button class="p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div><div class="space-y-1 mb-4"><div class="flex justify-between text-xs text-gray-500 dark:text-gray-400"><span>:</span><span></span></div></div><button>');const tb=()=>{const[t]=Me("settings"),[e,r]=Y(!1),[s,n]=Y(""),[i,l]=Y(""),[o,d]=Y(""),c=async()=>{const b=s().trim();if(!b){w.setError(t("preset_name_required"));return}try{const _={id:`preset_${Date.now()}`,name:b,description:i().trim(),config:{...h.config},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};w.addPreset(_),Z.isAvailable&&await Z.savePreset(_),n(""),l(""),r(!1)}catch(_){console.error("Failed to create preset:",_),w.setError(t("preset_create_failed"))}},u=async b=>{const _=Object.values(h.app.presets||{}).find($=>$.id===b);if(_)try{w.updateConfig(_.config),Z.isAvailable&&await Z.saveConfig(_.config),d(b)}catch($){console.error("Failed to load preset:",$),w.setError(t("preset_load_failed"))}},g=async b=>{const _=Object.values(h.app.presets||{}).find(E=>E.id===b);if(!(!_||!confirm(t("confirm_delete_preset",{name:_.name}))))try{w.removePreset(b),Z.isAvailable&&await Z.deletePreset(b),o()===b&&d("")}catch(E){console.error("Failed to delete preset:",E),w.setError(t("preset_delete_failed"))}},m=async b=>{const _=Object.values(h.app.presets||{}).find($=>$.id===b);if(!(!_||!Z.isAvailable))try{const $=await Z.saveFileDialog({title:t("export_preset"),defaultPath:`${_.name}.json`,filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}]});if($.canceled||!$.filePath)return;await Z.exportPreset(_,$.filePath)}catch($){console.error("Failed to export preset:",$),w.setError(t("preset_export_failed"))}},f=async()=>{if(Z.isAvailable)try{const b=await Z.openFileDialog({title:t("import_preset"),filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}],properties:["openFile","multiSelections"]});if(b.canceled||!b.filePaths?.length)return;for(const _ of b.filePaths){const $=await Z.importPreset(_);w.addPreset({...$,id:`preset_${Date.now()}_${Math.random()}`,updatedAt:new Date().toISOString()})}}catch(b){console.error("Failed to import preset:",b),w.setError(t("preset_import_failed"))}},p=b=>new Date(b).toLocaleDateString();return(()=>{var b=Qm(),_=b.firstChild,$=_.firstChild,E=$.firstChild,M=E.firstChild,C=M.nextSibling,j=E.nextSibling,J=j.firstChild;J.firstChild;var D=J.nextSibling;D.firstChild;var W=$.nextSibling,y=W.nextSibling;return a(C,()=>t("preset_management")),J.$$click=f,a(J,()=>t("import"),null),D.$$click=()=>r(!0),a(D,()=>t("create_preset"),null),a(W,()=>t("preset_description")),a(_,k(ee,{get when(){return e()},get children(){var x=Gm(),R=x.firstChild,P=R.nextSibling,S=P.firstChild,L=S.nextSibling,F=P.nextSibling,T=F.firstChild,B=T.nextSibling,H=F.nextSibling,q=H.firstChild,K=q.nextSibling;return a(R,()=>t("create_new_preset")),a(S,()=>t("preset_name")),L.$$input=I=>n(I.currentTarget.value),a(T,()=>t("preset_description_optional")),B.$$input=I=>l(I.currentTarget.value),q.$$click=()=>{r(!1),n(""),l("")},a(q,()=>t("cancel")),K.$$click=c,a(K,()=>t("create_preset")),A(I=>{var se=t("enter_preset_name"),de=t("enter_preset_description"),ie=!s().trim();return se!==I.e&&oe(L,"placeholder",I.e=se),de!==I.t&&oe(B,"placeholder",I.t=de),ie!==I.a&&(K.disabled=I.a=ie),I},{e:void 0,t:void 0,a:void 0}),A(()=>L.value=s()),A(()=>B.value=i()),x}}),y),a(y,k(ee,{get when(){return Fe(()=>!!h.app.presets)()&&Object.keys(h.app.presets).length>0},get fallback(){return(()=>{var x=Xm(),R=x.firstChild,P=R.nextSibling,S=P.nextSibling;return a(P,()=>t("no_presets_available")),a(S,()=>t("create_preset_to_get_started")),x})()},get children(){var x=Jm();return a(x,k(Ie,{get each(){return Object.values(h.app.presets||{})},children:R=>(()=>{var P=eb(),S=P.firstChild,L=S.firstChild,F=L.firstChild,T=F.nextSibling,B=T.firstChild,H=B.nextSibling,q=L.nextSibling,K=q.firstChild,I=K.firstChild,se=I.firstChild,de=I.nextSibling,ie=q.nextSibling;return a(F,()=>R.name),B.$$click=()=>m(R.id),H.$$click=()=>g(R.id),a(S,k(ee,{get when(){return R.description},get children(){var U=Zm();return a(U,()=>R.description),U}}),q),a(I,()=>t("created"),se),a(de,()=>p(R.createdAt)),a(q,k(ee,{get when(){return R.updatedAt!==R.createdAt},get children(){var U=Ym(),N=U.firstChild,G=N.firstChild,Q=N.nextSibling;return a(N,()=>t("updated"),G),a(Q,()=>p(R.updatedAt)),U}}),null),ie.$$click=()=>u(R.id),a(ie,(()=>{var U=Fe(()=>o()===R.id);return()=>U()?t("active"):t("load_preset")})()),A(U=>{var N=`bg-white dark:bg-gray-700 rounded-lg border-2 transition-all duration-200 ${o()===R.id?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,G=t("export_preset"),Q=t("delete_preset"),ce=o()===R.id,pe=`w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-700 ${o()===R.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 cursor-default":"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"}`;return N!==U.e&&ke(P,U.e=N),G!==U.t&&oe(B,"title",U.t=G),Q!==U.a&&oe(H,"title",U.a=Q),ce!==U.o&&(ie.disabled=U.o=ce),pe!==U.i&&ke(ie,U.i=pe),U},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),P})()})),x}})),A(x=>{var R=t("import_preset"),P=t("create_new_preset");return R!==x.e&&oe(J,"title",x.e=R),P!==x.t&&oe(D,"title",x.t=P),x},{e:void 0,t:void 0}),b})()};Te(["click","input"]);var rb=v('<div class=space-y-6><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> (mm)</label><div class=space-y-3><input type=range min=0 max=20 step=0.1 class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"><div class="flex items-center gap-3"><input type=number min=0 max=20 step=0.1 class="w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-sm text-gray-500 dark:text-gray-400">mm</span></div></div><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> (mm)</label><div class=space-y-3><input type=range min=0.1 max=2 step=0.1 class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"><div class="flex items-center gap-3"><input type=number min=0.1 max=2 step=0.1 class="w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-sm text-gray-500 dark:text-gray-400">mm</span></div></div><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><select class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></select><p class="text-sm text-gray-500 dark:text-gray-400"></p></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><div class=space-y-3><input type=range min=5 max=50 step=1 class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"><div class="flex items-center gap-3"><input type=number min=5 max=50 step=1 class="w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-sm text-gray-500 dark:text-gray-400">individuals</span></div></div><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> (%)</label><div class=space-y-3><input type=range min=1 max=50 step=1 class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"><div class="flex items-center gap-3"><input type=number min=1 max=50 step=1 class="w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><span class="text-sm text-gray-500 dark:text-gray-400">%</span></div></div><p class="text-sm text-gray-500 dark:text-gray-400"></p></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2">'),sb=v("<option>");const nb=()=>{const[t]=Me("settings"),[e,r]=Y(0),[s,n]=Y(.3),[i,l]=Y(4),[o,d]=Y(10),[c,u]=Y(10),[g,m]=Y(!1),[f,p]=Y(!1),[b,_]=Y(!1),[$,E]=Y(!0);pt(()=>{const x=h.config;r(x.spacing||0),n(x.curveTolerance||.3),l(x.rotations||4),d(x.populationSize||10),u(x.mutationRate||10),m(x.useHoles||!1),p(x.exploreConcave||!1),_(x.mergeLines||!1),E(x.useRoughApproximation!==!1)});const M=x=>{w.updateConfig({...h.config,...x})},C=x=>{r(x),M({spacing:x})},j=x=>{n(x),M({curveTolerance:x})},J=x=>{l(x),M({rotations:x})},D=x=>{d(x),M({populationSize:x})},W=x=>{u(x),M({mutationRate:x})},y=[{value:0,label:t("no_rotation")},{value:2,label:t("2_rotations")},{value:4,label:t("4_rotations")},{value:8,label:t("8_rotations")},{value:12,label:t("12_rotations")},{value:360,label:t("free_rotation")}];return(()=>{var x=rb(),R=x.firstChild,P=R.firstChild,S=P.firstChild,L=S.nextSibling,F=P.nextSibling,T=F.firstChild,B=T.firstChild,H=T.nextSibling,q=H.firstChild,K=q.nextSibling,I=K.firstChild,se=H.nextSibling,de=F.nextSibling,ie=de.firstChild,U=ie.firstChild,N=ie.nextSibling,G=N.firstChild,Q=G.nextSibling,ce=Q.firstChild,pe=N.nextSibling,xe=de.nextSibling,we=xe.firstChild,me=we.nextSibling,be=me.nextSibling,Ee=R.nextSibling,Se=Ee.firstChild,Ae=Se.firstChild,Ce=Ae.nextSibling,Re=Se.nextSibling,Pe=Re.firstChild,ae=Pe.nextSibling,_e=ae.firstChild,z=_e.nextSibling,te=z.firstChild,X=ae.nextSibling,V=Re.nextSibling,le=V.firstChild,ye=le.firstChild,ge=le.nextSibling,Oe=ge.firstChild,ze=Oe.nextSibling,Ge=ze.firstChild,Ve=ge.nextSibling,Ue=Ee.nextSibling,He=Ue.firstChild,We=He.firstChild,ne=We.nextSibling,ve=He.nextSibling,Je=ve.firstChild,at=Je.firstChild,ot=at.firstChild,Xe=ot.nextSibling,lt=at.nextSibling,Ze=ve.nextSibling,O=Ze.firstChild,Ne=O.firstChild,Be=Ne.firstChild,Ke=Be.nextSibling,Ye=Ne.nextSibling,et=Ze.nextSibling,Ft=et.firstChild,bt=Ft.firstChild,ct=bt.firstChild,_t=ct.nextSibling,gt=bt.nextSibling,xt=et.nextSibling,yt=xt.firstChild,yr=yt.firstChild,vr=yr.firstChild,cs=vr.nextSibling,$r=yr.nextSibling;return a(L,()=>t("nesting_parameters")),a(T,()=>t("space_between_parts"),B),q.$$input=ue=>C(parseFloat(ue.currentTarget.value)),I.$$input=ue=>C(parseFloat(ue.currentTarget.value)||0),a(se,()=>t("spacing_description")),a(ie,()=>t("curve_tolerance"),U),G.$$input=ue=>j(parseFloat(ue.currentTarget.value)),ce.$$input=ue=>j(parseFloat(ue.currentTarget.value)||.3),a(pe,()=>t("curve_tolerance_description")),a(we,()=>t("part_rotations")),me.addEventListener("change",ue=>J(parseInt(ue.currentTarget.value))),a(me,k(Ie,{each:y,children:ue=>(()=>{var rr=sb();return a(rr,()=>ue.label),A(()=>rr.value=ue.value),rr})()})),a(be,()=>t("rotations_description")),a(Ce,()=>t("genetic_algorithm")),a(Pe,()=>t("population_size")),_e.$$input=ue=>D(parseInt(ue.currentTarget.value)),te.$$input=ue=>D(parseInt(ue.currentTarget.value)||10),a(X,()=>t("population_size_description")),a(le,()=>t("mutation_rate"),ye),Oe.$$input=ue=>W(parseInt(ue.currentTarget.value)),Ge.$$input=ue=>W(parseInt(ue.currentTarget.value)||10),a(Ve,()=>t("mutation_rate_description")),a(ne,()=>t("advanced_options")),a(ot,()=>t("use_holes")),a(Xe,()=>t("use_holes_description")),lt.addEventListener("change",ue=>{m(ue.currentTarget.checked),M({useHoles:ue.currentTarget.checked})}),a(Be,()=>t("explore_concave")),a(Ke,()=>t("explore_concave_description")),Ye.addEventListener("change",ue=>{p(ue.currentTarget.checked),M({exploreConcave:ue.currentTarget.checked})}),a(ct,()=>t("merge_common_lines")),a(_t,()=>t("merge_lines_description")),gt.addEventListener("change",ue=>{_(ue.currentTarget.checked),M({mergeLines:ue.currentTarget.checked})}),a(vr,()=>t("use_rough_approximation")),a(cs,()=>t("rough_approximation_description")),$r.addEventListener("change",ue=>{E(ue.currentTarget.checked),M({useRoughApproximation:ue.currentTarget.checked})}),A(()=>q.value=e()),A(()=>I.value=e()),A(()=>G.value=s()),A(()=>ce.value=s()),A(()=>me.value=i()),A(()=>_e.value=o()),A(()=>te.value=o()),A(()=>Oe.value=c()),A(()=>Ge.value=c()),A(()=>lt.checked=g()),A(()=>Ye.checked=f()),A(()=>gt.checked=b()),A(()=>$r.checked=$()),x})()};Te(["input"]);var ib=v('<div class=space-y-6><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><select class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></select><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><select class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></select><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><button type=button><span class=sr-only>Toggle dark mode</span><span></span></button></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h7"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><select class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"></select><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><div class="flex gap-3"><input type=number min=200 max=600 class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"></button></div><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2">'),or=v("<option>");const ab=()=>{const[t,{changeLanguage:e}]=Me("settings"),r=[{code:"en",name:"English"},{code:"de",name:"Deutsch"}],s=[{value:"mm",label:t("millimeters")},{value:"in",label:t("inches")},{value:"cm",label:t("centimeters")}],n=[{value:"system",label:t("auto_theme")},{value:"light",label:t("light_theme")},{value:"dark",label:t("dark_theme")}],i=async u=>{w.setLanguage(u),await e(u)},l=u=>{w.setThemePreference(u)},o=()=>typeof localStorage<"u"&&"theme"in localStorage?localStorage.theme:"system",d=u=>{w.updateConfig({...h.config,units:u})},c=()=>{w.setPanelWidth("partsWidth",300)};return(()=>{var u=ib(),g=u.firstChild,m=g.firstChild,f=m.firstChild,p=f.nextSibling,b=m.nextSibling,_=b.firstChild,$=_.nextSibling,E=$.nextSibling,M=b.nextSibling,C=M.firstChild,j=C.nextSibling,J=j.nextSibling,D=M.nextSibling,W=D.firstChild,y=W.firstChild,x=y.firstChild,R=x.nextSibling,P=y.nextSibling,S=P.firstChild,L=S.nextSibling,F=g.nextSibling,T=F.firstChild,B=T.firstChild,H=B.nextSibling,q=T.nextSibling,K=q.firstChild,I=K.nextSibling,se=I.nextSibling,de=q.nextSibling,ie=de.firstChild,U=ie.firstChild,N=U.firstChild,G=N.nextSibling,Q=U.nextSibling,ce=de.nextSibling,pe=ce.firstChild,xe=pe.firstChild,we=xe.firstChild,me=we.nextSibling,be=xe.nextSibling,Ee=F.nextSibling,Se=Ee.firstChild,Ae=Se.firstChild,Ce=Ae.nextSibling,Re=Se.nextSibling,Pe=Re.firstChild,ae=Pe.nextSibling,_e=ae.firstChild,z=_e.nextSibling,te=ae.nextSibling,X=Re.nextSibling,V=X.firstChild,le=V.firstChild,ye=le.firstChild,ge=ye.nextSibling,Oe=le.nextSibling,ze=X.nextSibling,Ge=ze.firstChild,Ve=Ge.firstChild,Ue=Ve.firstChild,He=Ue.nextSibling,We=Ve.nextSibling;return a(p,()=>t("appearance")),a(_,()=>t("language")),$.addEventListener("change",ne=>i(ne.currentTarget.value)),a($,k(Ie,{each:r,children:ne=>(()=>{var ve=or();return a(ve,()=>ne.name),A(()=>ve.value=ne.code),ve})()})),a(E,()=>t("language_description")),a(C,()=>t("theme")),j.addEventListener("change",ne=>l(ne.currentTarget.value)),a(j,k(Ie,{each:n,children:ne=>(()=>{var ve=or();return a(ve,()=>ne.label),A(()=>ve.value=ne.value),ve})()})),a(J,()=>t("theme_description")),a(x,()=>t("dark_mode")),a(R,()=>t("dark_mode_description")),P.$$click=()=>w.setThemePreference(h.ui.darkMode?"light":"dark"),a(H,()=>t("units_and_formatting")),a(K,()=>t("display_units")),I.addEventListener("change",ne=>d(ne.currentTarget.value)),a(I,k(Ie,{each:s,children:ne=>(()=>{var ve=or();return a(ve,()=>ne.label),A(()=>ve.value=ne.value),ve})()})),a(se,()=>t("units_description")),a(N,()=>t("show_grid")),a(G,()=>t("show_grid_description")),Q.addEventListener("change",ne=>w.updateConfig({...h.config,showGrid:ne.currentTarget.checked})),a(we,()=>t("show_rulers")),a(me,()=>t("show_rulers_description")),be.addEventListener("change",ne=>w.updateConfig({...h.config,showRulers:ne.currentTarget.checked})),a(Ce,()=>t("layout_preferences")),a(Pe,()=>t("parts_panel_width")),_e.$$input=ne=>w.setPanelWidth("partsWidth",parseInt(ne.currentTarget.value)||300),z.$$click=c,a(z,()=>t("reset")),a(te,()=>t("panel_width_description")),a(ye,()=>t("show_tooltips")),a(ge,()=>t("tooltips_description")),Oe.addEventListener("change",ne=>w.setShowTooltips(ne.currentTarget.checked)),a(Ue,()=>t("show_status_bar")),a(He,()=>t("status_bar_description")),We.addEventListener("change",ne=>w.setShowStatusBar(ne.currentTarget.checked)),A(ne=>{var ve=`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${h.ui.darkMode?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,Je=`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${h.ui.darkMode?"translate-x-5":"translate-x-0"}`;return ve!==ne.e&&ke(P,ne.e=ve),Je!==ne.t&&ke(L,ne.t=Je),ne},{e:void 0,t:void 0}),A(()=>$.value=h.ui.language),A(()=>j.value=o()),A(()=>I.value=h.config.units||"mm"),A(()=>Q.checked=h.config.showGrid!==!1),A(()=>be.checked=h.config.showRulers!==!1),A(()=>_e.value=h.ui.panels.partsWidth||300),A(()=>Oe.checked=h.ui.showTooltips!==!1),A(()=>We.checked=h.ui.showStatusBar!==!1),u})()};Te(["click","input"]);var Ur=v('<div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="text-gray-900 dark:text-gray-100">'),ob=v('<div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-4"><h5 class="text-sm font-medium text-gray-900 dark:text-gray-100"></h5><div class=space-y-2><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="text-gray-900 dark:text-gray-100"></span></div><div class="flex justify-between text-sm"><span class="text-gray-600 dark:text-gray-400">:</span><span class="text-gray-900 dark:text-gray-100"> × </span></div></div><button class="w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">'),lb=v('<div class=space-y-6><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"></label><input type=number min=1 class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-red-600 dark:text-red-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><div class="flex items-center justify-between"><div><label class="text-sm font-medium text-gray-700 dark:text-gray-300"></label><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><input type=checkbox class="w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2"></div></div><div class=space-y-3><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"></button></div></div><div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-6"><div class="flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="w-8 h-8 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-cyan-600 dark:text-cyan-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100"></h4></div><div class=space-y-3><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"></button><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"></button><p class="text-sm text-gray-500 dark:text-gray-400"></p></div><div class=space-y-3><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> (<!>)</label><input type=number min=0 max=60 class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-200"><p class="text-sm text-gray-500 dark:text-gray-400">');const db=()=>{const[t]=Me("settings"),[e,r]=Y(!1),s=()=>{if(confirm(t("confirm_clear_cache")))try{localStorage.clear(),w.setError(null),alert(t("cache_cleared_success"))}catch(d){console.error("Failed to clear cache:",d),w.setError(t("cache_clear_failed"))}},n=()=>{w.setPanelWidth("partsWidth",300),w.setActiveTab("parts")},i=()=>{const o={timestamp:new Date().toISOString(),platform:navigator.platform,userAgent:navigator.userAgent,language:navigator.language,viewport:{width:window.innerWidth,height:window.innerHeight},globalState:{ui:h.ui,config:h.config,partsCount:h.app.parts.length,sheetsCount:h.app.sheets.length,nestsCount:h.app.nests.length,presetsCount:h.presets.length},performance:{memory:performance.memory?{usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit}:null}},d=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),c=URL.createObjectURL(d),u=document.createElement("a");u.href=c,u.download=`deepnest-debug-${Date.now()}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)},l=o=>{if(o===0)return"0 Bytes";const d=1024,c=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(o)/Math.log(d));return parseFloat((o/Math.pow(d,u)).toFixed(2))+" "+c[u]};return(()=>{var o=lb(),d=o.firstChild,c=d.firstChild,u=c.firstChild,g=u.nextSibling,m=c.nextSibling,f=m.firstChild,p=f.nextSibling,b=p.nextSibling,_=m.nextSibling,$=_.firstChild,E=$.firstChild,M=E.firstChild,C=M.nextSibling,j=E.nextSibling,J=_.nextSibling,D=J.firstChild,W=D.firstChild,y=W.firstChild,x=y.nextSibling,R=W.nextSibling,P=d.nextSibling,S=P.firstChild,L=S.firstChild,F=L.nextSibling,T=S.nextSibling,B=T.firstChild,H=B.firstChild,q=H.firstChild,K=q.nextSibling,I=H.nextSibling,se=T.nextSibling,de=se.firstChild,ie=de.firstChild,U=ie.firstChild,N=U.nextSibling,G=ie.nextSibling,Q=se.nextSibling,ce=Q.firstChild,pe=P.nextSibling,xe=pe.firstChild,we=xe.firstChild,me=we.nextSibling,be=xe.nextSibling,Ee=be.firstChild,Se=Ee.nextSibling,Ae=be.nextSibling,Ce=Ae.firstChild,Re=Ce.nextSibling,Pe=Ae.nextSibling,ae=Pe.firstChild,_e=ae.firstChild,z=_e.nextSibling;z.nextSibling;var te=ae.nextSibling,X=te.nextSibling;return a(g,()=>t("performance")),a(f,()=>t("worker_threads")),p.$$input=V=>w.updateConfig({...h.config,workerThreads:parseInt(V.currentTarget.value)||4}),a(b,()=>t("worker_threads_description",{max:navigator.hardwareConcurrency||8})),a(M,()=>t("enable_gpu_acceleration")),a(C,()=>t("gpu_acceleration_description")),j.addEventListener("change",V=>w.updateConfig({...h.config,enableGPU:V.currentTarget.checked})),a(y,()=>t("enable_caching")),a(x,()=>t("caching_description")),R.addEventListener("change",V=>w.updateConfig({...h.config,enableCaching:V.currentTarget.checked})),a(F,()=>t("debugging")),a(q,()=>t("debug_mode")),a(K,()=>t("debug_mode_description")),I.addEventListener("change",V=>w.updateConfig({...h.config,debugMode:V.currentTarget.checked})),a(U,()=>t("verbose_logging")),a(N,()=>t("verbose_logging_description")),G.addEventListener("change",V=>w.updateConfig({...h.config,verboseLogging:V.currentTarget.checked})),ce.$$click=()=>r(!e()),a(ce,(()=>{var V=Fe(()=>!!e());return()=>V()?t("hide_debug_info"):t("show_debug_info")})()),a(Q,k(ee,{get when(){return e()},get children(){var V=ob(),le=V.firstChild,ye=le.nextSibling,ge=ye.firstChild,Oe=ge.firstChild,ze=Oe.firstChild,Ge=Oe.nextSibling,Ve=ge.nextSibling,Ue=Ve.firstChild,He=Ue.firstChild,We=Ue.nextSibling,ne=Ve.nextSibling,ve=ne.firstChild,Je=ve.firstChild,at=ve.nextSibling,ot=ne.nextSibling,Xe=ot.firstChild,lt=Xe.firstChild,Ze=Xe.nextSibling,O=Ze.firstChild,Ne=ye.nextSibling;return a(le,()=>t("system_information")),a(Oe,()=>t("platform"),ze),a(Ge,()=>navigator.platform),a(Ue,()=>t("language"),He),a(We,()=>navigator.language),a(ve,()=>t("cpu_cores"),Je),a(at,()=>navigator.hardwareConcurrency||"Unknown"),a(Xe,()=>t("viewport"),lt),a(Ze,()=>window.innerWidth,O),a(Ze,()=>window.innerHeight,null),a(ye,k(ee,{get when(){return performance.memory},get children(){return[(()=>{var Be=Ur(),Ke=Be.firstChild,Ye=Ke.firstChild,et=Ke.nextSibling;return a(Ke,()=>t("memory_used"),Ye),a(et,()=>l(performance.memory.usedJSHeapSize)),Be})(),(()=>{var Be=Ur(),Ke=Be.firstChild,Ye=Ke.firstChild,et=Ke.nextSibling;return a(Ke,()=>t("memory_total"),Ye),a(et,()=>l(performance.memory.totalJSHeapSize)),Be})()]}}),null),Ne.$$click=i,a(Ne,()=>t("export_debug_info")),V}}),null),a(me,()=>t("maintenance")),Ee.$$click=s,a(Ee,()=>t("clear_cache")),a(Se,()=>t("clear_cache_description")),Ce.$$click=n,a(Ce,()=>t("reset_layout")),a(Re,()=>t("reset_layout_description")),a(ae,()=>t("auto_save_interval"),_e),a(ae,()=>t("minutes"),z),te.$$input=V=>w.updateConfig({...h.config,autoSaveInterval:parseInt(V.currentTarget.value)||5}),a(X,()=>t("auto_save_description")),A(()=>oe(p,"max",navigator.hardwareConcurrency||8)),A(()=>p.value=h.config.workerThreads||navigator.hardwareConcurrency||4),A(()=>j.checked=h.config.enableGPU||!1),A(()=>R.checked=h.config.enableCaching!==!1),A(()=>I.checked=h.config.debugMode||!1),A(()=>G.checked=h.config.verboseLogging||!1),A(()=>te.value=h.config.autoSaveInterval||5),o})()};Te(["input","click"]);var cb=v('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12">'),gb=v('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">'),ub=v('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z">'),fb=v('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4">'),hb=v('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"><div class="p-6 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h2><p class="text-sm text-gray-500 dark:text-gray-400">Save and manage configuration presets</p></div></div></div><div class=p-6>'),pb=v('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"><div class="p-6 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h2><p class="text-sm text-gray-500 dark:text-gray-400">Configure nesting algorithm parameters</p></div></div></div><div class=p-6>'),mb=v('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"><div class="p-6 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-green-600 dark:text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h2><p class="text-sm text-gray-500 dark:text-gray-400">Customize interface and appearance</p></div></div></div><div class=p-6>'),bb=v('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"><div class="p-6 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-orange-600 dark:text-orange-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h2><p class="text-sm text-gray-500 dark:text-gray-400">Advanced configuration options</p></div></div></div><div class=p-6>'),_b=v('<div class="h-full flex flex-col bg-white dark:bg-gray-900"><div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><div class="px-6 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center shadow-sm"><svg class="w-5 h-5 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path></svg></div><div><h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100"></h1><p class="text-sm text-gray-500 dark:text-gray-400">Configure your preferences and application settings</p></div></div><div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg></button><button class="inline-flex items-center gap-2 px-3 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button class="inline-flex items-center gap-2 px-4 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 font-medium rounded-lg border border-red-200 dark:border-red-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div></div><div class="flex-1 flex overflow-hidden bg-gray-50 dark:bg-gray-900"><div class="w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700"><div class=p-6><h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4">Settings Categories</h3><nav class=space-y-2></nav></div></div><div class="flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900"><div class=p-6>'),xb=v('<button><div></div><div class="flex-1 min-w-0"><div></div><div>'),yb=v('<div class="w-1 h-8 bg-blue-500 dark:bg-blue-400 rounded-full flex-shrink-0">');const vb=()=>{const[t]=Me("settings"),[e,r]=Y("presets"),s=async()=>{if(confirm(t("confirm_reset_defaults")))try{w.resetToDefaults(),Z.isAvailable&&await Z.saveConfig(h.config)}catch(d){console.error("Failed to reset to defaults:",d),w.setError(t("reset_failed"))}},n=async()=>{if(Z.isAvailable)try{const o=await Z.saveFileDialog({title:t("export_configuration"),defaultPath:"deepnest-config.json",filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}]});if(o.canceled||!o.filePath)return;await Z.exportConfig(h.config,o.filePath)}catch(o){console.error("Failed to export config:",o),w.setError(t("export_failed"))}},i=async()=>{if(Z.isAvailable)try{const o=await Z.openFileDialog({title:t("import_configuration"),filters:[{name:"JSON Files",extensions:["json"]},{name:"All Files",extensions:["*"]}],properties:["openFile"]});if(o.canceled||!o.filePaths?.length)return;const d=await Z.importConfig(o.filePaths[0]);w.updateConfig(d)}catch(o){console.error("Failed to import config:",o),w.setError(t("import_failed"))}},l=[{id:"presets",label:t("preset_management"),description:"Save and manage configuration presets",icon:cb()},{id:"algorithm",label:t("algorithm_settings"),description:"Configure nesting algorithm parameters",icon:gb()},{id:"ui",label:t("ui_preferences"),description:"Customize interface and appearance",icon:ub()},{id:"advanced",label:t("advanced_settings"),description:"Advanced configuration options",icon:fb()}];return(()=>{var o=_b(),d=o.firstChild,c=d.firstChild,u=c.firstChild,g=u.firstChild,m=g.nextSibling,f=m.firstChild,p=u.nextSibling,b=p.firstChild;b.firstChild;var _=b.nextSibling;_.firstChild;var $=_.nextSibling;$.firstChild;var E=d.nextSibling,M=E.firstChild,C=M.firstChild,j=C.firstChild,J=j.nextSibling,D=M.nextSibling,W=D.firstChild;return a(f,()=>t("settings_title")),b.$$click=i,a(b,()=>t("import"),null),_.$$click=n,a(_,()=>t("export"),null),$.$$click=s,a($,()=>t("reset_defaults"),null),a(J,k(Ie,{each:l,children:y=>(()=>{var x=xb(),R=x.firstChild,P=R.nextSibling,S=P.firstChild,L=S.nextSibling;return x.$$click=()=>r(y.id),a(R,()=>y.icon),a(S,()=>y.label),a(L,()=>y.description),a(x,(()=>{var F=Fe(()=>e()===y.id);return()=>F()&&yb()})(),null),A(F=>{var T=`w-full flex items-start gap-4 px-4 py-3 rounded-xl text-left transition-all duration-200 group ${e()===y.id?"bg-blue-50 dark:bg-blue-900/30 border-2 border-blue-200 dark:border-blue-700 shadow-sm":"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-2 border-transparent"}`,B=`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors duration-200 ${e()===y.id?"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 group-hover:bg-gray-200 dark:group-hover:bg-gray-600"}`,H=`font-medium transition-colors duration-200 ${e()===y.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 group-hover:text-gray-900 dark:group-hover:text-gray-100"}`,q=`text-sm mt-1 transition-colors duration-200 ${e()===y.id?"text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"}`;return T!==F.e&&ke(x,F.e=T),B!==F.t&&ke(R,F.t=B),H!==F.a&&ke(S,F.a=H),q!==F.o&&ke(L,F.o=q),F},{e:void 0,t:void 0,a:void 0,o:void 0}),x})()})),a(W,k(ee,{get when(){return e()==="presets"},get children(){var y=hb(),x=y.firstChild,R=x.firstChild,P=R.firstChild,S=P.nextSibling,L=S.firstChild,F=x.nextSibling;return a(L,()=>t("preset_management")),a(F,k(tb,{})),y}}),null),a(W,k(ee,{get when(){return e()==="algorithm"},get children(){var y=pb(),x=y.firstChild,R=x.firstChild,P=R.firstChild,S=P.nextSibling,L=S.firstChild,F=x.nextSibling;return a(L,()=>t("algorithm_settings")),a(F,k(nb,{})),y}}),null),a(W,k(ee,{get when(){return e()==="ui"},get children(){var y=mb(),x=y.firstChild,R=x.firstChild,P=R.firstChild,S=P.nextSibling,L=S.firstChild,F=x.nextSibling;return a(L,()=>t("ui_preferences")),a(F,k(ab,{})),y}}),null),a(W,k(ee,{get when(){return e()==="advanced"},get children(){var y=bb(),x=y.firstChild,R=x.firstChild,P=R.firstChild,S=P.nextSibling,L=S.firstChild,F=x.nextSibling;return a(L,()=>t("advanced_settings")),a(F,k(db,{})),y}}),null),A(y=>{var x=t("import_configuration"),R=t("export_configuration"),P=t("reset_to_defaults");return x!==y.e&&oe(b,"title",y.e=x),R!==y.t&&oe(_,"title",y.t=R),P!==y.a&&oe($,"title",y.a=P),y},{e:void 0,t:void 0,a:void 0}),o})()};Te(["click"]);var $b=v('<main class="flex-1 overflow-hidden bg-gray-50 dark:bg-gray-900 w-full h-full">');const kb=()=>(()=>{var t=$b();return a(t,k(ws,{get children(){return[k(Mt,{get when(){return h.ui.activeTab==="parts"},get children(){return k(Jp,{})}}),k(Mt,{get when(){return h.ui.activeTab==="nests"},get children(){return k(Fm,{})}}),k(Mt,{get when(){return h.ui.activeTab==="sheets"},get children(){return k(qm,{})}}),k(Mt,{get when(){return h.ui.activeTab==="settings"},get children(){return k(vb,{})}})]}})),t})();var wb=v('<div class="flex items-center gap-3"><div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"><div class="h-full bg-blue-500 dark:bg-blue-400 rounded-full transition-all duration-300 ease-out"></div></div><span class="text-gray-600 dark:text-gray-400 min-w-10 text-right font-mono">%'),Sb=v('<div class="flex items-center gap-1"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"clip-rule=evenodd></path></svg><span> threads'),Cb=v('<div class="flex items-center gap-1"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"clip-rule=evenodd></path></svg><span> parts'),Pb=v('<div class="flex items-center gap-1"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg><span> results'),Lb=v('<div class="flex items-center gap-1 text-red-500 dark:text-red-400"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><span class="max-w-64 truncate">'),Eb=v('<footer class="h-10 bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 text-xs"><div class="flex items-center gap-4"><div class="flex items-center gap-2"><div></div><span class="text-gray-900 dark:text-gray-100 font-medium"></span></div></div><div class="flex items-center gap-6 text-gray-600 dark:text-gray-400">');const Ab=()=>{const[t]=Me("common"),e=he(()=>{const{process:s}=h;return s.isNesting?t("status.nesting_in_progress"):s.lastError?t("status.error_occurred"):s.workerStatus.isRunning?s.workerStatus.currentOperation||t("status.processing"):t("status.ready")}),r=he(()=>Math.max(0,Math.min(100,h.process.progress)));return(()=>{var s=Eb(),n=s.firstChild,i=n.firstChild,l=i.firstChild,o=l.nextSibling,d=n.nextSibling;return a(o,e),a(n,k(ee,{get when(){return h.process.isNesting},get children(){var c=wb(),u=c.firstChild,g=u.firstChild,m=u.nextSibling,f=m.firstChild;return a(m,()=>r().toFixed(1),f),A(p=>(p=`${r()}%`)!=null?g.style.setProperty("width",p):g.style.removeProperty("width")),c}}),null),a(d,k(ee,{get when(){return h.process.workerStatus.threadsActive>0},get children(){var c=Sb(),u=c.firstChild,g=u.nextSibling,m=g.firstChild;return a(g,()=>h.process.workerStatus.threadsActive,m),c}}),null),a(d,k(ee,{get when(){return h.app.parts.length>0},get children(){var c=Cb(),u=c.firstChild,g=u.nextSibling,m=g.firstChild;return a(g,()=>h.app.parts.length,m),c}}),null),a(d,k(ee,{get when(){return h.app.nests.length>0},get children(){var c=Pb(),u=c.firstChild,g=u.nextSibling,m=g.firstChild;return a(g,()=>h.app.nests.length,m),c}}),null),a(d,k(ee,{get when(){return h.process.lastError},get children(){var c=Lb(),u=c.firstChild,g=u.nextSibling;return a(g,()=>h.process.lastError),c}}),null),A(()=>ke(l,`w-2 h-2 rounded-full ${h.process.isNesting?"bg-blue-500 animate-pulse":h.process.lastError?"bg-red-500":"bg-green-500"}`)),s})()};var Rb=v('<div><div class="flex-shrink-0 h-full w-full"></div><div title="Drag to resize panels"><div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1 h-8 bg-gray-400 dark:bg-gray-500 group-hover:bg-blue-300 dark:group-hover:bg-blue-300 rounded-full transition-colors duration-200"></div><div class="absolute -left-1 -right-1 top-0 bottom-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200"><div class="w-full h-full bg-blue-500/20 dark:bg-blue-400/20"></div></div></div><div class="flex-1 h-full min-w-0 w-full">');const Nb=t=>{const{minLeftWidth:e=250,maxLeftWidth:r=500,defaultLeftWidth:s=300}=t,[n,i]=Y(!1),[l,o]=Y(h.ui.panels.partsWidth||s);let d,c;const u=f=>{f.preventDefault(),i(!0),document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},g=f=>{if(!n()||!d)return;const p=d.getBoundingClientRect(),b=f.clientX-p.left,_=Math.max(e,Math.min(r,b));o(_),w.setPanelWidth("partsWidth",_)},m=()=>{i(!1),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""};return br(()=>{o(h.ui.panels.partsWidth||s)}),_r(()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""}),(()=>{var f=Rb(),p=f.firstChild,b=p.nextSibling,_=b.nextSibling,$=d;typeof $=="function"?Sr($,f):d=f,a(p,()=>t.left),b.$$mousedown=u;var E=c;return typeof E=="function"?Sr(E,b):c=b,a(_,()=>t.right),A(M=>{var C=`flex h-full w-full ${n()?"select-none":""}`,j=`${l()}px`,J=`w-1 bg-gray-200 dark:bg-gray-700 hover:bg-blue-500 dark:hover:bg-blue-400 cursor-col-resize transition-colors duration-200 relative group ${n()?"bg-blue-500 dark:bg-blue-400":""}`;return C!==M.e&&ke(f,M.e=C),j!==M.t&&((M.t=j)!=null?p.style.setProperty("width",j):p.style.removeProperty("width")),J!==M.a&&ke(b,M.a=J),M},{e:void 0,t:void 0,a:void 0}),f})()};Te(["mousedown"]);var Fb=v('<div class="h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100"><div class="flex-1 flex overflow-hidden">');const Mb=()=>(()=>{var t=Fb(),e=t.firstChild;return a(t,k(Ip,{}),e),a(e,k(Nb,{get left(){return k(Vp,{})},get right(){return k(kb,{})},minLeftWidth:200,maxLeftWidth:600,defaultLeftWidth:300})),a(t,k(Ab,{}),null),t})();var Ob=v('<div class="app min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">');const Tb=()=>{const[t]=Me("common");pt(()=>{const r=h.ui.darkMode;typeof document<"u"&&(document.documentElement.classList.toggle("dark",r),document.documentElement.setAttribute("data-theme",r?"dark":"light"))}),br(async()=>{if(e(),Z.isAvailable)try{const r=await Z.readConfig();w.updateConfig(r)}catch(r){console.warn("Failed to load initial config:",r)}});const e=()=>{Z.isAvailable&&(Z.onNestProgress(r=>{w.setNestingProgress(r)}),Z.onNestComplete(r=>{w.setNests(r),w.setNestingStatus(!1)}),Z.onBackgroundProgress(r=>{w.setNestingProgress(r.progress)}),Z.onWorkerStatus(r=>{w.setWorkerStatus(r)}),Z.onNestError(r=>{w.setError(r),w.setNestingStatus(!1)}))};return(()=>{var r=Ob();return a(r,k(Mb,{})),r})()},jb=document.getElementById("root"),[,{isReady:Ib}]=Me("common");Cs(()=>k(Mp,{get children(){return k(ee,{get when(){return Ib()},get children(){return k(Tb,{})}})}}),jb);
